var g4=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var rCe=g4((Gn,Qn)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zw={},AS={exports:{}},ir={},A={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d=Symbol.for("react.element"),y4=Symbol.for("react.portal"),v4=Symbol.for("react.fragment"),_4=Symbol.for("react.strict_mode"),w4=Symbol.for("react.profiler"),E4=Symbol.for("react.provider"),S4=Symbol.for("react.context"),b4=Symbol.for("react.forward_ref"),T4=Symbol.for("react.suspense"),I4=Symbol.for("react.memo"),C4=Symbol.for("react.lazy"),EC=Symbol.iterator;function k4(t){return t===null||typeof t!="object"?null:(t=EC&&t[EC]||t["@@iterator"],typeof t=="function"?t:null)}var HP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KP=Object.assign,GP={};function Ou(t,e,n){this.props=t,this.context=e,this.refs=GP,this.updater=n||HP}Ou.prototype.isReactComponent={};Ou.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ou.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function QP(){}QP.prototype=Ou.prototype;function RS(t,e,n){this.props=t,this.context=e,this.refs=GP,this.updater=n||HP}var xS=RS.prototype=new QP;xS.constructor=RS;KP(xS,Ou.prototype);xS.isPureReactComponent=!0;var SC=Array.isArray,YP=Object.prototype.hasOwnProperty,NS={current:null},XP={key:!0,ref:!0,__self:!0,__source:!0};function JP(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)YP.call(e,r)&&!XP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:$d,type:t,key:s,ref:o,props:i,_owner:NS.current}}function A4(t,e){return{$$typeof:$d,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function PS(t){return typeof t=="object"&&t!==null&&t.$$typeof===$d}function R4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bC=/\/+/g;function i_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?R4(""+t.key):e.toString(36)}function Sp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $d:case y4:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+i_(o,0):r,SC(i)?(n="",t!=null&&(n=t.replace(bC,"$&/")+"/"),Sp(i,e,n,"",function(u){return u})):i!=null&&(PS(i)&&(i=A4(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",SC(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+i_(s,a);o+=Sp(s,e,n,l,i)}else if(l=k4(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+i_(s,a++),o+=Sp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mf(t,e,n){if(t==null)return t;var r=[],i=0;return Sp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function x4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var En={current:null},bp={transition:null},N4={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:bp,ReactCurrentOwner:NS};ae.Children={map:Mf,forEach:function(t,e,n){Mf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mf(t,function(){e++}),e},toArray:function(t){return Mf(t,function(e){return e})||[]},only:function(t){if(!PS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Ou;ae.Fragment=v4;ae.Profiler=w4;ae.PureComponent=RS;ae.StrictMode=_4;ae.Suspense=T4;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N4;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=KP({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=NS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)YP.call(e,l)&&!XP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:$d,type:t.type,key:i,ref:s,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:S4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:E4,_context:t},t.Consumer=t};ae.createElement=JP;ae.createFactory=function(t){var e=JP.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:b4,render:t}};ae.isValidElement=PS;ae.lazy=function(t){return{$$typeof:C4,_payload:{_status:-1,_result:t},_init:x4}};ae.memo=function(t,e){return{$$typeof:I4,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=bp.transition;bp.transition={};try{t()}finally{bp.transition=e}};ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ae.useCallback=function(t,e){return En.current.useCallback(t,e)};ae.useContext=function(t){return En.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return En.current.useDeferredValue(t)};ae.useEffect=function(t,e){return En.current.useEffect(t,e)};ae.useId=function(){return En.current.useId()};ae.useImperativeHandle=function(t,e,n){return En.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return En.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return En.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return En.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return En.current.useReducer(t,e,n)};ae.useRef=function(t){return En.current.useRef(t)};ae.useState=function(t){return En.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return En.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return En.current.useTransition()};ae.version="18.2.0";(function(t){t.exports=ae})(A);const P4=m4(A.exports);var ZP={exports:{}},eO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,X){var J=L.length;L.push(X);e:for(;0<J;){var De=J-1>>>1,Ke=L[De];if(0<i(Ke,X))L[De]=X,L[J]=Ke,J=De;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var X=L[0],J=L.pop();if(J!==X){L[0]=J;e:for(var De=0,Ke=L.length,Cr=Ke>>>1;De<Cr;){var Kr=2*(De+1)-1,Io=L[Kr],Gr=Kr+1,Co=L[Gr];if(0>i(Io,J))Gr<Ke&&0>i(Co,Io)?(L[De]=Co,L[Gr]=J,De=Gr):(L[De]=Io,L[Kr]=J,De=Kr);else if(Gr<Ke&&0>i(Co,J))L[De]=Co,L[Gr]=J,De=Gr;else break e}}return X}function i(L,X){var J=L.sortIndex-X.sortIndex;return J!==0?J:L.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=L)r(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(u)}}function _(L){if(g=!1,v(L),!p)if(n(l)!==null)p=!0,ul(E);else{var X=n(u);X!==null&&cl(_,X.startTime-L)}}function E(L,X){p=!1,g&&(g=!1,m(k),k=-1),f=!0;var J=d;try{for(v(X),h=n(l);h!==null&&(!(h.expirationTime>X)||L&&!le());){var De=h.callback;if(typeof De=="function"){h.callback=null,d=h.priorityLevel;var Ke=De(h.expirationTime<=X);X=t.unstable_now(),typeof Ke=="function"?h.callback=Ke:h===n(l)&&r(l),v(X)}else r(l);h=n(l)}if(h!==null)var Cr=!0;else{var Kr=n(u);Kr!==null&&cl(_,Kr.startTime-X),Cr=!1}return Cr}finally{h=null,d=J,f=!1}}var T=!1,C=null,k=-1,z=5,W=-1;function le(){return!(t.unstable_now()-W<z)}function gt(){if(C!==null){var L=t.unstable_now();W=L;var X=!0;try{X=C(!0,L)}finally{X?ar():(T=!1,C=null)}}else T=!1}var ar;if(typeof y=="function")ar=function(){y(gt)};else if(typeof MessageChannel<"u"){var Ii=new MessageChannel,Df=Ii.port2;Ii.port1.onmessage=gt,ar=function(){Df.postMessage(null)}}else ar=function(){w(gt,0)};function ul(L){C=L,T||(T=!0,ar())}function cl(L,X){k=w(function(){L(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ul(E))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(d){case 1:case 2:case 3:var X=3;break;default:X=d}var J=d;d=X;try{return L()}finally{d=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,X){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var J=d;d=L;try{return X()}finally{d=J}},t.unstable_scheduleCallback=function(L,X,J){var De=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?De+J:De):J=De,L){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=J+Ke,L={id:c++,callback:X,priorityLevel:L,startTime:J,expirationTime:Ke,sortIndex:-1},J>De?(L.sortIndex=J,e(u,L),n(l)===null&&L===n(u)&&(g?(m(k),k=-1):g=!0,cl(_,J-De))):(L.sortIndex=Ke,e(l,L),p||f||(p=!0,ul(E))),L},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(L){var X=d;return function(){var J=d;d=X;try{return L.apply(this,arguments)}finally{d=J}}}})(eO);(function(t){t.exports=eO})(ZP);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO=A.exports,Jn=ZP.exports;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nO=new Set,bh={};function Ba(t,e){nu(t,e),nu(t+"Capture",e)}function nu(t,e){for(bh[t]=e,t=0;t<e.length;t++)nO.add(e[t])}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qw=Object.prototype.hasOwnProperty,O4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TC={},IC={};function D4(t){return qw.call(IC,t)?!0:qw.call(TC,t)?!1:O4.test(t)?IC[t]=!0:(TC[t]=!0,!1)}function $4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M4(t,e,n,r){if(e===null||typeof e>"u"||$4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new Sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new Sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new Sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new Sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new Sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new Sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new Sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new Sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new Sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var OS=/[\-:]([a-z])/g;function DS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(OS,DS);Gt[e]=new Sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(OS,DS);Gt[e]=new Sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(OS,DS);Gt[e]=new Sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $S(t,e,n,r){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(M4(e,n,i,r)&&(n=null),r||i===null?D4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=tO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ff=Symbol.for("react.element"),wl=Symbol.for("react.portal"),El=Symbol.for("react.fragment"),MS=Symbol.for("react.strict_mode"),Ww=Symbol.for("react.profiler"),rO=Symbol.for("react.provider"),iO=Symbol.for("react.context"),FS=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),Kw=Symbol.for("react.suspense_list"),LS=Symbol.for("react.memo"),ms=Symbol.for("react.lazy"),sO=Symbol.for("react.offscreen"),CC=Symbol.iterator;function dc(t){return t===null||typeof t!="object"?null:(t=CC&&t[CC]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,s_;function Fc(t){if(s_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);s_=e&&e[1]||""}return`
`+s_+t}var o_=!1;function a_(t,e){if(!t||o_)return"";o_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{o_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fc(t):""}function F4(t){switch(t.tag){case 5:return Fc(t.type);case 16:return Fc("Lazy");case 13:return Fc("Suspense");case 19:return Fc("SuspenseList");case 0:case 2:case 15:return t=a_(t.type,!1),t;case 11:return t=a_(t.type.render,!1),t;case 1:return t=a_(t.type,!0),t;default:return""}}function Gw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case El:return"Fragment";case wl:return"Portal";case Ww:return"Profiler";case MS:return"StrictMode";case Hw:return"Suspense";case Kw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iO:return(t.displayName||"Context")+".Consumer";case rO:return(t._context.displayName||"Context")+".Provider";case FS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case LS:return e=t.displayName||null,e!==null?e:Gw(t.type)||"Memo";case ms:e=t._payload,t=t._init;try{return Gw(t(e))}catch{}}return null}function L4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gw(e);case 8:return e===MS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ws(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function U4(t){var e=oO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lf(t){t._valueTracker||(t._valueTracker=U4(t))}function aO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=oO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qw(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function kC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ws(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lO(t,e){e=e.checked,e!=null&&$S(t,"checked",e,!1)}function Yw(t,e){lO(t,e);var n=Ws(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xw(t,e.type,Ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function AC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xw(t,e,n){(e!=="number"||Yp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lc=Array.isArray;function Ml(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ws(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Jw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function RC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Lc(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ws(n)}}function uO(t,e){var n=Ws(e.value),r=Ws(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uf,hO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uf=Uf||document.createElement("div"),Uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Th(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j4=["Webkit","ms","Moz","O"];Object.keys(Gc).forEach(function(t){j4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gc[e]=Gc[t]})});function dO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gc.hasOwnProperty(t)&&Gc[t]?(""+e).trim():e+"px"}function fO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=dO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var V4=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function e0(t,e){if(e){if(V4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function t0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n0=null;function US(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var r0=null,Fl=null,Ll=null;function NC(t){if(t=Ld(t)){if(typeof r0!="function")throw Error(O(280));var e=t.stateNode;e&&(e=Um(e),r0(t.stateNode,t.type,e))}}function pO(t){Fl?Ll?Ll.push(t):Ll=[t]:Fl=t}function gO(){if(Fl){var t=Fl,e=Ll;if(Ll=Fl=null,NC(t),e)for(t=0;t<e.length;t++)NC(e[t])}}function mO(t,e){return t(e)}function yO(){}var l_=!1;function vO(t,e,n){if(l_)return t(e,n);l_=!0;try{return mO(t,e,n)}finally{l_=!1,(Fl!==null||Ll!==null)&&(yO(),gO())}}function Ih(t,e){var n=t.stateNode;if(n===null)return null;var r=Um(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var i0=!1;if(Hi)try{var fc={};Object.defineProperty(fc,"passive",{get:function(){i0=!0}}),window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{i0=!1}function B4(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Qc=!1,Xp=null,Jp=!1,s0=null,z4={onError:function(t){Qc=!0,Xp=t}};function q4(t,e,n,r,i,s,o,a,l){Qc=!1,Xp=null,B4.apply(z4,arguments)}function W4(t,e,n,r,i,s,o,a,l){if(q4.apply(this,arguments),Qc){if(Qc){var u=Xp;Qc=!1,Xp=null}else throw Error(O(198));Jp||(Jp=!0,s0=u)}}function za(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _O(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function PC(t){if(za(t)!==t)throw Error(O(188))}function H4(t){var e=t.alternate;if(!e){if(e=za(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return PC(i),t;if(s===r)return PC(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function wO(t){return t=H4(t),t!==null?EO(t):null}function EO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=EO(t);if(e!==null)return e;t=t.sibling}return null}var SO=Jn.unstable_scheduleCallback,OC=Jn.unstable_cancelCallback,K4=Jn.unstable_shouldYield,G4=Jn.unstable_requestPaint,et=Jn.unstable_now,Q4=Jn.unstable_getCurrentPriorityLevel,jS=Jn.unstable_ImmediatePriority,bO=Jn.unstable_UserBlockingPriority,Zp=Jn.unstable_NormalPriority,Y4=Jn.unstable_LowPriority,TO=Jn.unstable_IdlePriority,$m=null,oi=null;function X4(t){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot($m,t,void 0,(t.current.flags&128)===128)}catch{}}var Lr=Math.clz32?Math.clz32:ez,J4=Math.log,Z4=Math.LN2;function ez(t){return t>>>=0,t===0?32:31-(J4(t)/Z4|0)|0}var jf=64,Vf=4194304;function Uc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Uc(a):(s&=o,s!==0&&(r=Uc(s)))}else o=n&~i,o!==0?r=Uc(o):s!==0&&(r=Uc(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Lr(e),i=1<<n,r|=t[n],e&=~i;return r}function tz(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nz(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Lr(s),a=1<<o,l=i[o];l===-1?((a&n)===0||(a&r)!==0)&&(i[o]=tz(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function o0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function IO(){var t=jf;return jf<<=1,(jf&4194240)===0&&(jf=64),t}function u_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Md(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Lr(e),t[e]=n}function rz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Lr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function VS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Lr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function CO(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var kO,BS,AO,RO,xO,a0=!1,Bf=[],xs=null,Ns=null,Ps=null,Ch=new Map,kh=new Map,_s=[],iz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DC(t,e){switch(t){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Ch.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kh.delete(e.pointerId)}}function pc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ld(e),e!==null&&BS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sz(t,e,n,r,i){switch(e){case"focusin":return xs=pc(xs,t,e,n,r,i),!0;case"dragenter":return Ns=pc(Ns,t,e,n,r,i),!0;case"mouseover":return Ps=pc(Ps,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ch.set(s,pc(Ch.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,kh.set(s,pc(kh.get(s)||null,t,e,n,r,i)),!0}return!1}function NO(t){var e=Wo(t.target);if(e!==null){var n=za(e);if(n!==null){if(e=n.tag,e===13){if(e=_O(n),e!==null){t.blockedOn=e,xO(t.priority,function(){AO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=l0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);n0=r,n.target.dispatchEvent(r),n0=null}else return e=Ld(n),e!==null&&BS(e),t.blockedOn=n,!1;e.shift()}return!0}function $C(t,e,n){Tp(t)&&n.delete(e)}function oz(){a0=!1,xs!==null&&Tp(xs)&&(xs=null),Ns!==null&&Tp(Ns)&&(Ns=null),Ps!==null&&Tp(Ps)&&(Ps=null),Ch.forEach($C),kh.forEach($C)}function gc(t,e){t.blockedOn===e&&(t.blockedOn=null,a0||(a0=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,oz)))}function Ah(t){function e(i){return gc(i,t)}if(0<Bf.length){gc(Bf[0],t);for(var n=1;n<Bf.length;n++){var r=Bf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xs!==null&&gc(xs,t),Ns!==null&&gc(Ns,t),Ps!==null&&gc(Ps,t),Ch.forEach(e),kh.forEach(e),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)NO(n),n.blockedOn===null&&_s.shift()}var Ul=ns.ReactCurrentBatchConfig,tg=!0;function az(t,e,n,r){var i=ye,s=Ul.transition;Ul.transition=null;try{ye=1,zS(t,e,n,r)}finally{ye=i,Ul.transition=s}}function lz(t,e,n,r){var i=ye,s=Ul.transition;Ul.transition=null;try{ye=4,zS(t,e,n,r)}finally{ye=i,Ul.transition=s}}function zS(t,e,n,r){if(tg){var i=l0(t,e,n,r);if(i===null)__(t,e,r,ng,n),DC(t,r);else if(sz(i,t,e,n,r))r.stopPropagation();else if(DC(t,r),e&4&&-1<iz.indexOf(t)){for(;i!==null;){var s=Ld(i);if(s!==null&&kO(s),s=l0(t,e,n,r),s===null&&__(t,e,r,ng,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else __(t,e,r,null,n)}}var ng=null;function l0(t,e,n,r){if(ng=null,t=US(r),t=Wo(t),t!==null)if(e=za(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_O(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ng=t,null}function PO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q4()){case jS:return 1;case bO:return 4;case Zp:case Y4:return 16;case TO:return 536870912;default:return 16}default:return 16}}var Ts=null,qS=null,Ip=null;function OO(){if(Ip)return Ip;var t,e=qS,n=e.length,r,i="value"in Ts?Ts.value:Ts.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ip=i.slice(t,1<r?1-r:void 0)}function Cp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zf(){return!0}function MC(){return!1}function sr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zf:MC,this.isPropagationStopped=MC,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zf)},persist:function(){},isPersistent:zf}),e}var Du={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WS=sr(Du),Fd=He({},Du,{view:0,detail:0}),uz=sr(Fd),c_,h_,mc,Mm=He({},Fd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:HS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mc&&(mc&&t.type==="mousemove"?(c_=t.screenX-mc.screenX,h_=t.screenY-mc.screenY):h_=c_=0,mc=t),c_)},movementY:function(t){return"movementY"in t?t.movementY:h_}}),FC=sr(Mm),cz=He({},Mm,{dataTransfer:0}),hz=sr(cz),dz=He({},Fd,{relatedTarget:0}),d_=sr(dz),fz=He({},Du,{animationName:0,elapsedTime:0,pseudoElement:0}),pz=sr(fz),gz=He({},Du,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mz=sr(gz),yz=He({},Du,{data:0}),LC=sr(yz),vz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_z={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ez(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wz[t])?!!e[t]:!1}function HS(){return Ez}var Sz=He({},Fd,{key:function(t){if(t.key){var e=vz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_z[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:HS,charCode:function(t){return t.type==="keypress"?Cp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bz=sr(Sz),Tz=He({},Mm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UC=sr(Tz),Iz=He({},Fd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:HS}),Cz=sr(Iz),kz=He({},Du,{propertyName:0,elapsedTime:0,pseudoElement:0}),Az=sr(kz),Rz=He({},Mm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xz=sr(Rz),Nz=[9,13,27,32],KS=Hi&&"CompositionEvent"in window,Yc=null;Hi&&"documentMode"in document&&(Yc=document.documentMode);var Pz=Hi&&"TextEvent"in window&&!Yc,DO=Hi&&(!KS||Yc&&8<Yc&&11>=Yc),jC=String.fromCharCode(32),VC=!1;function $O(t,e){switch(t){case"keyup":return Nz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sl=!1;function Oz(t,e){switch(t){case"compositionend":return MO(e);case"keypress":return e.which!==32?null:(VC=!0,jC);case"textInput":return t=e.data,t===jC&&VC?null:t;default:return null}}function Dz(t,e){if(Sl)return t==="compositionend"||!KS&&$O(t,e)?(t=OO(),Ip=qS=Ts=null,Sl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DO&&e.locale!=="ko"?null:e.data;default:return null}}var $z={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$z[t.type]:e==="textarea"}function FO(t,e,n,r){pO(r),e=rg(e,"onChange"),0<e.length&&(n=new WS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xc=null,Rh=null;function Mz(t){GO(t,0)}function Fm(t){var e=Il(t);if(aO(e))return t}function Fz(t,e){if(t==="change")return e}var LO=!1;if(Hi){var f_;if(Hi){var p_="oninput"in document;if(!p_){var zC=document.createElement("div");zC.setAttribute("oninput","return;"),p_=typeof zC.oninput=="function"}f_=p_}else f_=!1;LO=f_&&(!document.documentMode||9<document.documentMode)}function qC(){Xc&&(Xc.detachEvent("onpropertychange",UO),Rh=Xc=null)}function UO(t){if(t.propertyName==="value"&&Fm(Rh)){var e=[];FO(e,Rh,t,US(t)),vO(Mz,e)}}function Lz(t,e,n){t==="focusin"?(qC(),Xc=e,Rh=n,Xc.attachEvent("onpropertychange",UO)):t==="focusout"&&qC()}function Uz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fm(Rh)}function jz(t,e){if(t==="click")return Fm(e)}function Vz(t,e){if(t==="input"||t==="change")return Fm(e)}function Bz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Br=typeof Object.is=="function"?Object.is:Bz;function xh(t,e){if(Br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qw.call(e,i)||!Br(t[i],e[i]))return!1}return!0}function WC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function HC(t,e){var n=WC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=WC(n)}}function jO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VO(){for(var t=window,e=Yp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yp(t.document)}return e}function GS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zz(t){var e=VO(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jO(n.ownerDocument.documentElement,n)){if(r!==null&&GS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=HC(n,s);var o=HC(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qz=Hi&&"documentMode"in document&&11>=document.documentMode,bl=null,u0=null,Jc=null,c0=!1;function KC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;c0||bl==null||bl!==Yp(r)||(r=bl,"selectionStart"in r&&GS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jc&&xh(Jc,r)||(Jc=r,r=rg(u0,"onSelect"),0<r.length&&(e=new WS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bl)))}function qf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Tl={animationend:qf("Animation","AnimationEnd"),animationiteration:qf("Animation","AnimationIteration"),animationstart:qf("Animation","AnimationStart"),transitionend:qf("Transition","TransitionEnd")},g_={},BO={};Hi&&(BO=document.createElement("div").style,"AnimationEvent"in window||(delete Tl.animationend.animation,delete Tl.animationiteration.animation,delete Tl.animationstart.animation),"TransitionEvent"in window||delete Tl.transitionend.transition);function Lm(t){if(g_[t])return g_[t];if(!Tl[t])return t;var e=Tl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BO)return g_[t]=e[n];return t}var zO=Lm("animationend"),qO=Lm("animationiteration"),WO=Lm("animationstart"),HO=Lm("transitionend"),KO=new Map,GC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function co(t,e){KO.set(t,e),Ba(e,[t])}for(var m_=0;m_<GC.length;m_++){var y_=GC[m_],Wz=y_.toLowerCase(),Hz=y_[0].toUpperCase()+y_.slice(1);co(Wz,"on"+Hz)}co(zO,"onAnimationEnd");co(qO,"onAnimationIteration");co(WO,"onAnimationStart");co("dblclick","onDoubleClick");co("focusin","onFocus");co("focusout","onBlur");co(HO,"onTransitionEnd");nu("onMouseEnter",["mouseout","mouseover"]);nu("onMouseLeave",["mouseout","mouseover"]);nu("onPointerEnter",["pointerout","pointerover"]);nu("onPointerLeave",["pointerout","pointerover"]);Ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kz=new Set("cancel close invalid load scroll toggle".split(" ").concat(jc));function QC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,W4(r,e,void 0,t),t.currentTarget=null}function GO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;QC(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;QC(i,a,u),s=l}}}if(Jp)throw t=s0,Jp=!1,s0=null,t}function Ae(t,e){var n=e[g0];n===void 0&&(n=e[g0]=new Set);var r=t+"__bubble";n.has(r)||(QO(e,t,2,!1),n.add(r))}function v_(t,e,n){var r=0;e&&(r|=4),QO(n,t,r,e)}var Wf="_reactListening"+Math.random().toString(36).slice(2);function Nh(t){if(!t[Wf]){t[Wf]=!0,nO.forEach(function(n){n!=="selectionchange"&&(Kz.has(n)||v_(n,!1,t),v_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wf]||(e[Wf]=!0,v_("selectionchange",!1,e))}}function QO(t,e,n,r){switch(PO(e)){case 1:var i=az;break;case 4:i=lz;break;default:i=zS}n=i.bind(null,e,n,t),i=void 0,!i0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function __(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Wo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}vO(function(){var u=s,c=US(n),h=[];e:{var d=KO.get(t);if(d!==void 0){var f=WS,p=t;switch(t){case"keypress":if(Cp(n)===0)break e;case"keydown":case"keyup":f=bz;break;case"focusin":p="focus",f=d_;break;case"focusout":p="blur",f=d_;break;case"beforeblur":case"afterblur":f=d_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=FC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=hz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Cz;break;case zO:case qO:case WO:f=pz;break;case HO:f=Az;break;case"scroll":f=uz;break;case"wheel":f=xz;break;case"copy":case"cut":case"paste":f=mz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=UC}var g=(e&4)!==0,w=!g&&t==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var y=u,v;y!==null;){v=y;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,m!==null&&(_=Ih(y,m),_!=null&&g.push(Ph(y,_,v)))),w)break;y=y.return}0<g.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:g}))}}if((e&7)===0){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==n0&&(p=n.relatedTarget||n.fromElement)&&(Wo(p)||p[Ki]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Wo(p):null,p!==null&&(w=za(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=FC,_="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=UC,_="onPointerLeave",m="onPointerEnter",y="pointer"),w=f==null?d:Il(f),v=p==null?d:Il(p),d=new g(_,y+"leave",f,n,c),d.target=w,d.relatedTarget=v,_=null,Wo(c)===u&&(g=new g(m,y+"enter",p,n,c),g.target=v,g.relatedTarget=w,_=g),w=_,f&&p)t:{for(g=f,m=p,y=0,v=g;v;v=hl(v))y++;for(v=0,_=m;_;_=hl(_))v++;for(;0<y-v;)g=hl(g),y--;for(;0<v-y;)m=hl(m),v--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=hl(g),m=hl(m)}g=null}else g=null;f!==null&&YC(h,d,f,g,!1),p!==null&&w!==null&&YC(h,w,p,g,!0)}}e:{if(d=u?Il(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=Fz;else if(BC(d))if(LO)E=Vz;else{E=Uz;var T=Lz}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=jz);if(E&&(E=E(t,u))){FO(h,E,n,c);break e}T&&T(t,d,u),t==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&Xw(d,"number",d.value)}switch(T=u?Il(u):window,t){case"focusin":(BC(T)||T.contentEditable==="true")&&(bl=T,u0=u,Jc=null);break;case"focusout":Jc=u0=bl=null;break;case"mousedown":c0=!0;break;case"contextmenu":case"mouseup":case"dragend":c0=!1,KC(h,n,c);break;case"selectionchange":if(qz)break;case"keydown":case"keyup":KC(h,n,c)}var C;if(KS)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Sl?$O(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(DO&&n.locale!=="ko"&&(Sl||k!=="onCompositionStart"?k==="onCompositionEnd"&&Sl&&(C=OO()):(Ts=c,qS="value"in Ts?Ts.value:Ts.textContent,Sl=!0)),T=rg(u,k),0<T.length&&(k=new LC(k,t,null,n,c),h.push({event:k,listeners:T}),C?k.data=C:(C=MO(n),C!==null&&(k.data=C)))),(C=Pz?Oz(t,n):Dz(t,n))&&(u=rg(u,"onBeforeInput"),0<u.length&&(c=new LC("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=C))}GO(h,e)})}function Ph(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ih(t,n),s!=null&&r.unshift(Ph(t,s,i)),s=Ih(t,e),s!=null&&r.push(Ph(t,s,i))),t=t.return}return r}function hl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function YC(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Ih(n,s),l!=null&&o.unshift(Ph(n,l,a))):i||(l=Ih(n,s),l!=null&&o.push(Ph(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Gz=/\r\n?/g,Qz=/\u0000|\uFFFD/g;function XC(t){return(typeof t=="string"?t:""+t).replace(Gz,`
`).replace(Qz,"")}function Hf(t,e,n){if(e=XC(e),XC(t)!==e&&n)throw Error(O(425))}function ig(){}var h0=null,d0=null;function f0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var p0=typeof setTimeout=="function"?setTimeout:void 0,Yz=typeof clearTimeout=="function"?clearTimeout:void 0,JC=typeof Promise=="function"?Promise:void 0,Xz=typeof queueMicrotask=="function"?queueMicrotask:typeof JC<"u"?function(t){return JC.resolve(null).then(t).catch(Jz)}:p0;function Jz(t){setTimeout(function(){throw t})}function w_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ah(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ah(e)}function Os(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ZC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $u=Math.random().toString(36).slice(2),Xr="__reactFiber$"+$u,Oh="__reactProps$"+$u,Ki="__reactContainer$"+$u,g0="__reactEvents$"+$u,Zz="__reactListeners$"+$u,eq="__reactHandles$"+$u;function Wo(t){var e=t[Xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ki]||n[Xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ZC(t);t!==null;){if(n=t[Xr])return n;t=ZC(t)}return e}t=n,n=t.parentNode}return null}function Ld(t){return t=t[Xr]||t[Ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Il(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function Um(t){return t[Oh]||null}var m0=[],Cl=-1;function ho(t){return{current:t}}function Ne(t){0>Cl||(t.current=m0[Cl],m0[Cl]=null,Cl--)}function Ce(t,e){Cl++,m0[Cl]=t.current,t.current=e}var Hs={},on=ho(Hs),On=ho(!1),ca=Hs;function ru(t,e){var n=t.type.contextTypes;if(!n)return Hs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dn(t){return t=t.childContextTypes,t!=null}function sg(){Ne(On),Ne(on)}function ek(t,e,n){if(on.current!==Hs)throw Error(O(168));Ce(on,e),Ce(On,n)}function YO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,L4(t)||"Unknown",i));return He({},n,r)}function og(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hs,ca=on.current,Ce(on,t),Ce(On,On.current),!0}function tk(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=YO(t,e,ca),r.__reactInternalMemoizedMergedChildContext=t,Ne(On),Ne(on),Ce(on,t)):Ne(On),Ce(On,n)}var Ni=null,jm=!1,E_=!1;function XO(t){Ni===null?Ni=[t]:Ni.push(t)}function tq(t){jm=!0,XO(t)}function fo(){if(!E_&&Ni!==null){E_=!0;var t=0,e=ye;try{var n=Ni;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ni=null,jm=!1}catch(i){throw Ni!==null&&(Ni=Ni.slice(t+1)),SO(jS,fo),i}finally{ye=e,E_=!1}}return null}var kl=[],Al=0,ag=null,lg=0,hr=[],dr=0,ha=null,Oi=1,Di="";function xo(t,e){kl[Al++]=lg,kl[Al++]=ag,ag=t,lg=e}function JO(t,e,n){hr[dr++]=Oi,hr[dr++]=Di,hr[dr++]=ha,ha=t;var r=Oi;t=Di;var i=32-Lr(r)-1;r&=~(1<<i),n+=1;var s=32-Lr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Oi=1<<32-Lr(e)+i|n<<i|r,Di=s+t}else Oi=1<<s|n<<i|r,Di=t}function QS(t){t.return!==null&&(xo(t,1),JO(t,1,0))}function YS(t){for(;t===ag;)ag=kl[--Al],kl[Al]=null,lg=kl[--Al],kl[Al]=null;for(;t===ha;)ha=hr[--dr],hr[dr]=null,Di=hr[--dr],hr[dr]=null,Oi=hr[--dr],hr[dr]=null}var Yn=null,qn=null,Me=!1,Dr=null;function ZO(t,e){var n=pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yn=t,qn=Os(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yn=t,qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ha!==null?{id:Oi,overflow:Di}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yn=t,qn=null,!0):!1;default:return!1}}function y0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function v0(t){if(Me){var e=qn;if(e){var n=e;if(!nk(t,e)){if(y0(t))throw Error(O(418));e=Os(n.nextSibling);var r=Yn;e&&nk(t,e)?ZO(r,n):(t.flags=t.flags&-4097|2,Me=!1,Yn=t)}}else{if(y0(t))throw Error(O(418));t.flags=t.flags&-4097|2,Me=!1,Yn=t}}}function rk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yn=t}function Kf(t){if(t!==Yn)return!1;if(!Me)return rk(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!f0(t.type,t.memoizedProps)),e&&(e=qn)){if(y0(t))throw eD(),Error(O(418));for(;e;)ZO(t,e),e=Os(e.nextSibling)}if(rk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qn=Os(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qn=null}}else qn=Yn?Os(t.stateNode.nextSibling):null;return!0}function eD(){for(var t=qn;t;)t=Os(t.nextSibling)}function iu(){qn=Yn=null,Me=!1}function XS(t){Dr===null?Dr=[t]:Dr.push(t)}var nq=ns.ReactCurrentBatchConfig;function Nr(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ug=ho(null),cg=null,Rl=null,JS=null;function ZS(){JS=Rl=cg=null}function eb(t){var e=ug.current;Ne(ug),t._currentValue=e}function _0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function jl(t,e){cg=t,JS=Rl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(An=!0),t.firstContext=null)}function Er(t){var e=t._currentValue;if(JS!==t)if(t={context:t,memoizedValue:e,next:null},Rl===null){if(cg===null)throw Error(O(308));Rl=t,cg.dependencies={lanes:0,firstContext:t}}else Rl=Rl.next=t;return e}var Ho=null;function tb(t){Ho===null?Ho=[t]:Ho.push(t)}function tD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,tb(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gi(t,r)}function Gi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ys=!1;function nb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ui(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ds(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(he&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gi(t,n)}return i=r.interleaved,i===null?(e.next=e,tb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gi(t,n)}function kp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,VS(t,n)}}function ik(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hg(t,e,n,r){var i=t.updateQueue;ys=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=He({},h,d);break e;case 2:ys=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);fa|=o,t.lanes=o,t.memoizedState=h}}function sk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var rD=new tO.Component().refs;function w0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vm={isMounted:function(t){return(t=t._reactInternals)?za(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vn(),i=Ms(t),s=Ui(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ds(t,s,i),e!==null&&(Ur(e,t,i,r),kp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vn(),i=Ms(t),s=Ui(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ds(t,s,i),e!==null&&(Ur(e,t,i,r),kp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),r=Ms(t),i=Ui(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ds(t,i,r),e!==null&&(Ur(e,t,r,n),kp(e,t,r))}};function ok(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xh(n,r)||!xh(i,s):!0}function iD(t,e,n){var r=!1,i=Hs,s=e.contextType;return typeof s=="object"&&s!==null?s=Er(s):(i=Dn(e)?ca:on.current,r=e.contextTypes,s=(r=r!=null)?ru(t,i):Hs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ak(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vm.enqueueReplaceState(e,e.state,null)}function E0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=rD,nb(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Er(s):(s=Dn(e)?ca:on.current,i.context=ru(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(w0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vm.enqueueReplaceState(i,i.state,null),hg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function yc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===rD&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function Gf(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lk(t){var e=t._init;return e(t._payload)}function sD(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Fs(m,y),m.index=0,m.sibling=null,m}function s(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,v,_){return y===null||y.tag!==6?(y=A_(v,m.mode,_),y.return=m,y):(y=i(y,v),y.return=m,y)}function l(m,y,v,_){var E=v.type;return E===El?c(m,y,v.props.children,_,v.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ms&&lk(E)===y.type)?(_=i(y,v.props),_.ref=yc(m,y,v),_.return=m,_):(_=Op(v.type,v.key,v.props,null,m.mode,_),_.ref=yc(m,y,v),_.return=m,_)}function u(m,y,v,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=R_(v,m.mode,_),y.return=m,y):(y=i(y,v.children||[]),y.return=m,y)}function c(m,y,v,_,E){return y===null||y.tag!==7?(y=ia(v,m.mode,_,E),y.return=m,y):(y=i(y,v),y.return=m,y)}function h(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=A_(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ff:return v=Op(y.type,y.key,y.props,null,m.mode,v),v.ref=yc(m,null,y),v.return=m,v;case wl:return y=R_(y,m.mode,v),y.return=m,y;case ms:var _=y._init;return h(m,_(y._payload),v)}if(Lc(y)||dc(y))return y=ia(y,m.mode,v,null),y.return=m,y;Gf(m,y)}return null}function d(m,y,v,_){var E=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(m,y,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ff:return v.key===E?l(m,y,v,_):null;case wl:return v.key===E?u(m,y,v,_):null;case ms:return E=v._init,d(m,y,E(v._payload),_)}if(Lc(v)||dc(v))return E!==null?null:c(m,y,v,_,null);Gf(m,v)}return null}function f(m,y,v,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(v)||null,a(y,m,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ff:return m=m.get(_.key===null?v:_.key)||null,l(y,m,_,E);case wl:return m=m.get(_.key===null?v:_.key)||null,u(y,m,_,E);case ms:var T=_._init;return f(m,y,v,T(_._payload),E)}if(Lc(_)||dc(_))return m=m.get(v)||null,c(y,m,_,E,null);Gf(y,_)}return null}function p(m,y,v,_){for(var E=null,T=null,C=y,k=y=0,z=null;C!==null&&k<v.length;k++){C.index>k?(z=C,C=null):z=C.sibling;var W=d(m,C,v[k],_);if(W===null){C===null&&(C=z);break}t&&C&&W.alternate===null&&e(m,C),y=s(W,y,k),T===null?E=W:T.sibling=W,T=W,C=z}if(k===v.length)return n(m,C),Me&&xo(m,k),E;if(C===null){for(;k<v.length;k++)C=h(m,v[k],_),C!==null&&(y=s(C,y,k),T===null?E=C:T.sibling=C,T=C);return Me&&xo(m,k),E}for(C=r(m,C);k<v.length;k++)z=f(C,m,k,v[k],_),z!==null&&(t&&z.alternate!==null&&C.delete(z.key===null?k:z.key),y=s(z,y,k),T===null?E=z:T.sibling=z,T=z);return t&&C.forEach(function(le){return e(m,le)}),Me&&xo(m,k),E}function g(m,y,v,_){var E=dc(v);if(typeof E!="function")throw Error(O(150));if(v=E.call(v),v==null)throw Error(O(151));for(var T=E=null,C=y,k=y=0,z=null,W=v.next();C!==null&&!W.done;k++,W=v.next()){C.index>k?(z=C,C=null):z=C.sibling;var le=d(m,C,W.value,_);if(le===null){C===null&&(C=z);break}t&&C&&le.alternate===null&&e(m,C),y=s(le,y,k),T===null?E=le:T.sibling=le,T=le,C=z}if(W.done)return n(m,C),Me&&xo(m,k),E;if(C===null){for(;!W.done;k++,W=v.next())W=h(m,W.value,_),W!==null&&(y=s(W,y,k),T===null?E=W:T.sibling=W,T=W);return Me&&xo(m,k),E}for(C=r(m,C);!W.done;k++,W=v.next())W=f(C,m,k,W.value,_),W!==null&&(t&&W.alternate!==null&&C.delete(W.key===null?k:W.key),y=s(W,y,k),T===null?E=W:T.sibling=W,T=W);return t&&C.forEach(function(gt){return e(m,gt)}),Me&&xo(m,k),E}function w(m,y,v,_){if(typeof v=="object"&&v!==null&&v.type===El&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ff:e:{for(var E=v.key,T=y;T!==null;){if(T.key===E){if(E=v.type,E===El){if(T.tag===7){n(m,T.sibling),y=i(T,v.props.children),y.return=m,m=y;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ms&&lk(E)===T.type){n(m,T.sibling),y=i(T,v.props),y.ref=yc(m,T,v),y.return=m,m=y;break e}n(m,T);break}else e(m,T);T=T.sibling}v.type===El?(y=ia(v.props.children,m.mode,_,v.key),y.return=m,m=y):(_=Op(v.type,v.key,v.props,null,m.mode,_),_.ref=yc(m,y,v),_.return=m,m=_)}return o(m);case wl:e:{for(T=v.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(m,y.sibling),y=i(y,v.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=R_(v,m.mode,_),y.return=m,m=y}return o(m);case ms:return T=v._init,w(m,y,T(v._payload),_)}if(Lc(v))return p(m,y,v,_);if(dc(v))return g(m,y,v,_);Gf(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,v),y.return=m,m=y):(n(m,y),y=A_(v,m.mode,_),y.return=m,m=y),o(m)):n(m,y)}return w}var su=sD(!0),oD=sD(!1),Ud={},ai=ho(Ud),Dh=ho(Ud),$h=ho(Ud);function Ko(t){if(t===Ud)throw Error(O(174));return t}function rb(t,e){switch(Ce($h,e),Ce(Dh,t),Ce(ai,Ud),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zw(e,t)}Ne(ai),Ce(ai,e)}function ou(){Ne(ai),Ne(Dh),Ne($h)}function aD(t){Ko($h.current);var e=Ko(ai.current),n=Zw(e,t.type);e!==n&&(Ce(Dh,t),Ce(ai,n))}function ib(t){Dh.current===t&&(Ne(ai),Ne(Dh))}var je=ho(0);function dg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var S_=[];function sb(){for(var t=0;t<S_.length;t++)S_[t]._workInProgressVersionPrimary=null;S_.length=0}var Ap=ns.ReactCurrentDispatcher,b_=ns.ReactCurrentBatchConfig,da=0,qe=null,lt=null,_t=null,fg=!1,Zc=!1,Mh=0,rq=0;function Xt(){throw Error(O(321))}function ob(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Br(t[n],e[n]))return!1;return!0}function ab(t,e,n,r,i,s){if(da=s,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ap.current=t===null||t.memoizedState===null?aq:lq,t=n(r,i),Zc){s=0;do{if(Zc=!1,Mh=0,25<=s)throw Error(O(301));s+=1,_t=lt=null,e.updateQueue=null,Ap.current=uq,t=n(r,i)}while(Zc)}if(Ap.current=pg,e=lt!==null&&lt.next!==null,da=0,_t=lt=qe=null,fg=!1,e)throw Error(O(300));return t}function lb(){var t=Mh!==0;return Mh=0,t}function Yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?qe.memoizedState=_t=t:_t=_t.next=t,_t}function Sr(){if(lt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=_t===null?qe.memoizedState:_t.next;if(e!==null)_t=e,lt=t;else{if(t===null)throw Error(O(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},_t===null?qe.memoizedState=_t=t:_t=_t.next=t}return _t}function Fh(t,e){return typeof e=="function"?e(t):e}function T_(t){var e=Sr(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((da&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,qe.lanes|=c,fa|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Br(r,e.memoizedState)||(An=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qe.lanes|=s,fa|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function I_(t){var e=Sr(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Br(s,e.memoizedState)||(An=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function lD(){}function uD(t,e){var n=qe,r=Sr(),i=e(),s=!Br(r.memoizedState,i);if(s&&(r.memoizedState=i,An=!0),r=r.queue,ub(dD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,Lh(9,hD.bind(null,n,r,i,e),void 0,null),Tt===null)throw Error(O(349));(da&30)!==0||cD(n,e,i)}return i}function cD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hD(t,e,n,r){e.value=n,e.getSnapshot=r,fD(e)&&pD(t)}function dD(t,e,n){return n(function(){fD(e)&&pD(t)})}function fD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Br(t,n)}catch{return!0}}function pD(t){var e=Gi(t,1);e!==null&&Ur(e,t,1,-1)}function uk(t){var e=Yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fh,lastRenderedState:t},e.queue=t,t=t.dispatch=oq.bind(null,qe,t),[e.memoizedState,t]}function Lh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gD(){return Sr().memoizedState}function Rp(t,e,n,r){var i=Yr();qe.flags|=t,i.memoizedState=Lh(1|e,n,void 0,r===void 0?null:r)}function Bm(t,e,n,r){var i=Sr();r=r===void 0?null:r;var s=void 0;if(lt!==null){var o=lt.memoizedState;if(s=o.destroy,r!==null&&ob(r,o.deps)){i.memoizedState=Lh(e,n,s,r);return}}qe.flags|=t,i.memoizedState=Lh(1|e,n,s,r)}function ck(t,e){return Rp(8390656,8,t,e)}function ub(t,e){return Bm(2048,8,t,e)}function mD(t,e){return Bm(4,2,t,e)}function yD(t,e){return Bm(4,4,t,e)}function vD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _D(t,e,n){return n=n!=null?n.concat([t]):null,Bm(4,4,vD.bind(null,e,t),n)}function cb(){}function wD(t,e){var n=Sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ob(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ED(t,e){var n=Sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ob(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function SD(t,e,n){return(da&21)===0?(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=n):(Br(n,e)||(n=IO(),qe.lanes|=n,fa|=n,t.baseState=!0),e)}function iq(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=b_.transition;b_.transition={};try{t(!1),e()}finally{ye=n,b_.transition=r}}function bD(){return Sr().memoizedState}function sq(t,e,n){var r=Ms(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TD(t))ID(e,n);else if(n=tD(t,e,n,r),n!==null){var i=vn();Ur(n,t,r,i),CD(n,e,r)}}function oq(t,e,n){var r=Ms(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TD(t))ID(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Br(a,o)){var l=e.interleaved;l===null?(i.next=i,tb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=tD(t,e,i,r),n!==null&&(i=vn(),Ur(n,t,r,i),CD(n,e,r))}}function TD(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function ID(t,e){Zc=fg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function CD(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,VS(t,n)}}var pg={readContext:Er,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},aq={readContext:Er,useCallback:function(t,e){return Yr().memoizedState=[t,e===void 0?null:e],t},useContext:Er,useEffect:ck,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rp(4194308,4,vD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rp(4,2,t,e)},useMemo:function(t,e){var n=Yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sq.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=Yr();return t={current:t},e.memoizedState=t},useState:uk,useDebugValue:cb,useDeferredValue:function(t){return Yr().memoizedState=t},useTransition:function(){var t=uk(!1),e=t[0];return t=iq.bind(null,t[1]),Yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,i=Yr();if(Me){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),Tt===null)throw Error(O(349));(da&30)!==0||cD(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ck(dD.bind(null,r,s,t),[t]),r.flags|=2048,Lh(9,hD.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Yr(),e=Tt.identifierPrefix;if(Me){var n=Di,r=Oi;n=(r&~(1<<32-Lr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lq={readContext:Er,useCallback:wD,useContext:Er,useEffect:ub,useImperativeHandle:_D,useInsertionEffect:mD,useLayoutEffect:yD,useMemo:ED,useReducer:T_,useRef:gD,useState:function(){return T_(Fh)},useDebugValue:cb,useDeferredValue:function(t){var e=Sr();return SD(e,lt.memoizedState,t)},useTransition:function(){var t=T_(Fh)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:lD,useSyncExternalStore:uD,useId:bD,unstable_isNewReconciler:!1},uq={readContext:Er,useCallback:wD,useContext:Er,useEffect:ub,useImperativeHandle:_D,useInsertionEffect:mD,useLayoutEffect:yD,useMemo:ED,useReducer:I_,useRef:gD,useState:function(){return I_(Fh)},useDebugValue:cb,useDeferredValue:function(t){var e=Sr();return lt===null?e.memoizedState=t:SD(e,lt.memoizedState,t)},useTransition:function(){var t=I_(Fh)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:lD,useSyncExternalStore:uD,useId:bD,unstable_isNewReconciler:!1};function au(t,e){try{var n="",r=e;do n+=F4(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function C_(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function S0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cq=typeof WeakMap=="function"?WeakMap:Map;function kD(t,e,n){n=Ui(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mg||(mg=!0,P0=r),S0(t,e)},n}function AD(t,e,n){n=Ui(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){S0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){S0(t,e),typeof r!="function"&&($s===null?$s=new Set([this]):$s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cq;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tq.bind(null,t,e,n),e.then(t,t))}function dk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fk(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ui(-1,1),e.tag=2,Ds(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var hq=ns.ReactCurrentOwner,An=!1;function un(t,e,n,r){e.child=t===null?oD(e,null,n,r):su(e,t.child,n,r)}function pk(t,e,n,r,i){n=n.render;var s=e.ref;return jl(e,i),r=ab(t,e,n,r,s,i),n=lb(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qi(t,e,i)):(Me&&n&&QS(e),e.flags|=1,un(t,e,r,i),e.child)}function gk(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!vb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,RD(t,e,s,r,i)):(t=Op(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xh,n(o,r)&&t.ref===e.ref)return Qi(t,e,i)}return e.flags|=1,t=Fs(s,r),t.ref=e.ref,t.return=e,e.child=t}function RD(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(xh(s,r)&&t.ref===e.ref)if(An=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(An=!0);else return e.lanes=t.lanes,Qi(t,e,i)}return b0(t,e,n,r,i)}function xD(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Nl,Vn),Vn|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Nl,Vn),Vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(Nl,Vn),Vn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(Nl,Vn),Vn|=r;return un(t,e,i,n),e.child}function ND(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function b0(t,e,n,r,i){var s=Dn(n)?ca:on.current;return s=ru(e,s),jl(e,i),n=ab(t,e,n,r,s,i),r=lb(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qi(t,e,i)):(Me&&r&&QS(e),e.flags|=1,un(t,e,n,i),e.child)}function mk(t,e,n,r,i){if(Dn(n)){var s=!0;og(e)}else s=!1;if(jl(e,i),e.stateNode===null)xp(t,e),iD(e,n,r),E0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Er(u):(u=Dn(n)?ca:on.current,u=ru(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ak(e,o,r,u),ys=!1;var d=e.memoizedState;o.state=d,hg(e,r,o,i),l=e.memoizedState,a!==r||d!==l||On.current||ys?(typeof c=="function"&&(w0(e,n,c,r),l=e.memoizedState),(a=ys||ok(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,nD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Nr(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Er(l):(l=Dn(n)?ca:on.current,l=ru(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&ak(e,o,r,l),ys=!1,d=e.memoizedState,o.state=d,hg(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||On.current||ys?(typeof f=="function"&&(w0(e,n,f,r),p=e.memoizedState),(u=ys||ok(e,n,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return T0(t,e,n,r,s,i)}function T0(t,e,n,r,i,s){ND(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&tk(e,n,!1),Qi(t,e,s);r=e.stateNode,hq.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=su(e,t.child,null,s),e.child=su(e,null,a,s)):un(t,e,a,s),e.memoizedState=r.state,i&&tk(e,n,!0),e.child}function PD(t){var e=t.stateNode;e.pendingContext?ek(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ek(t,e.context,!1),rb(t,e.containerInfo)}function yk(t,e,n,r,i){return iu(),XS(i),e.flags|=256,un(t,e,n,r),e.child}var I0={dehydrated:null,treeContext:null,retryLane:0};function C0(t){return{baseLanes:t,cachePool:null,transitions:null}}function OD(t,e,n){var r=e.pendingProps,i=je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(je,i&1),t===null)return v0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Wm(o,r,0,null),t=ia(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=C0(n),e.memoizedState=I0,t):hb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return dq(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fs(a,s):(s=ia(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?C0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=I0,r}return s=t.child,t=s.sibling,r=Fs(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hb(t,e){return e=Wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qf(t,e,n,r){return r!==null&&XS(r),su(e,t.child,null,n),t=hb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dq(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=C_(Error(O(422))),Qf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Wm({mode:"visible",children:r.children},i,0,null),s=ia(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&su(e,t.child,null,o),e.child.memoizedState=C0(o),e.memoizedState=I0,s);if((e.mode&1)===0)return Qf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(O(419)),r=C_(s,r,void 0),Qf(t,e,o,r)}if(a=(o&t.childLanes)!==0,An||a){if(r=Tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gi(t,i),Ur(r,t,i,-1))}return yb(),r=C_(Error(O(421))),Qf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Iq.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qn=Os(i.nextSibling),Yn=e,Me=!0,Dr=null,t!==null&&(hr[dr++]=Oi,hr[dr++]=Di,hr[dr++]=ha,Oi=t.id,Di=t.overflow,ha=e),e=hb(e,r.children),e.flags|=4096,e)}function vk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_0(t.return,e,n)}function k_(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function DD(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(un(t,e,r.children,n),r=je.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vk(t,n,e);else if(t.tag===19)vk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(je,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),k_(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}k_(e,!0,n,null,s);break;case"together":k_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xp(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fa|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fq(t,e,n){switch(e.tag){case 3:PD(e),iu();break;case 5:aD(e);break;case 1:Dn(e.type)&&og(e);break;case 4:rb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(ug,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(je,je.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?OD(t,e,n):(Ce(je,je.current&1),t=Qi(t,e,n),t!==null?t.sibling:null);Ce(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return DD(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,xD(t,e,n)}return Qi(t,e,n)}var $D,k0,MD,FD;$D=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};k0=function(){};MD=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ko(ai.current);var s=null;switch(n){case"input":i=Qw(t,i),r=Qw(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=Jw(t,i),r=Jw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ig)}e0(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ae("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};FD=function(t,e,n,r){n!==r&&(e.flags|=4)};function vc(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pq(t,e,n){var r=e.pendingProps;switch(YS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return Dn(e.type)&&sg(),Jt(e),null;case 3:return r=e.stateNode,ou(),Ne(On),Ne(on),sb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Kf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Dr!==null&&($0(Dr),Dr=null))),k0(t,e),Jt(e),null;case 5:ib(e);var i=Ko($h.current);if(n=e.type,t!==null&&e.stateNode!=null)MD(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return Jt(e),null}if(t=Ko(ai.current),Kf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Xr]=e,r[Oh]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<jc.length;i++)Ae(jc[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":kC(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":RC(r,s),Ae("invalid",r)}e0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hf(r.textContent,a,t),i=["children",""+a]):bh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Lf(r),AC(r,s,!0);break;case"textarea":Lf(r),xC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ig)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xr]=e,t[Oh]=r,$D(t,e,!1,!1),e.stateNode=t;e:{switch(o=t0(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<jc.length;i++)Ae(jc[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":kC(t,r),i=Qw(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":RC(t,r),i=Jw(t,r),Ae("invalid",t);break;default:i=r}e0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?fO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Th(t,l):typeof l=="number"&&Th(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ae("scroll",t):l!=null&&$S(t,s,l,o))}switch(n){case"input":Lf(t),AC(t,r,!1);break;case"textarea":Lf(t),xC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ws(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ml(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ml(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ig)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(t&&e.stateNode!=null)FD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Ko($h.current),Ko(ai.current),Kf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xr]=e,(s=r.nodeValue!==n)&&(t=Yn,t!==null))switch(t.tag){case 3:Hf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xr]=e,e.stateNode=r}return Jt(e),null;case 13:if(Ne(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&qn!==null&&(e.mode&1)!==0&&(e.flags&128)===0)eD(),iu(),e.flags|=98560,s=!1;else if(s=Kf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Xr]=e}else iu(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Jt(e),s=!1}else Dr!==null&&($0(Dr),Dr=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(je.current&1)!==0?dt===0&&(dt=3):yb())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return ou(),k0(t,e),t===null&&Nh(e.stateNode.containerInfo),Jt(e),null;case 10:return eb(e.type._context),Jt(e),null;case 17:return Dn(e.type)&&sg(),Jt(e),null;case 19:if(Ne(je),s=e.memoizedState,s===null)return Jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)vc(s,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=dg(t),o!==null){for(e.flags|=128,vc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&et()>lu&&(e.flags|=128,r=!0,vc(s,!1),e.lanes=4194304)}else{if(!r)if(t=dg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return Jt(e),null}else 2*et()-s.renderingStartTime>lu&&n!==1073741824&&(e.flags|=128,r=!0,vc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=et(),e.sibling=null,n=je.current,Ce(je,r?n&1|2:n&1),e):(Jt(e),null);case 22:case 23:return mb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(Vn&1073741824)!==0&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function gq(t,e){switch(YS(e),e.tag){case 1:return Dn(e.type)&&sg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ou(),Ne(On),Ne(on),sb(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return ib(e),null;case 13:if(Ne(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));iu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(je),null;case 4:return ou(),null;case 10:return eb(e.type._context),null;case 22:case 23:return mb(),null;case 24:return null;default:return null}}var Yf=!1,tn=!1,mq=typeof WeakSet=="function"?WeakSet:Set,U=null;function xl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function A0(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var _k=!1;function yq(t,e){if(h0=tg,t=VO(),GS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(d0={focusedElem:t,selectionRange:n},tg=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Nr(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(_){Ge(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return p=_k,_k=!1,p}function eh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&A0(e,n,s)}i=i.next}while(i!==r)}}function zm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function R0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LD(t){var e=t.alternate;e!==null&&(t.alternate=null,LD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xr],delete e[Oh],delete e[g0],delete e[Zz],delete e[eq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function UD(t){return t.tag===5||t.tag===3||t.tag===4}function wk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||UD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function x0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ig));else if(r!==4&&(t=t.child,t!==null))for(x0(t,e,n),t=t.sibling;t!==null;)x0(t,e,n),t=t.sibling}function N0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(N0(t,e,n),t=t.sibling;t!==null;)N0(t,e,n),t=t.sibling}var Lt=null,Or=!1;function ds(t,e,n){for(n=n.child;n!==null;)jD(t,e,n),n=n.sibling}function jD(t,e,n){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount($m,n)}catch{}switch(n.tag){case 5:tn||xl(n,e);case 6:var r=Lt,i=Or;Lt=null,ds(t,e,n),Lt=r,Or=i,Lt!==null&&(Or?(t=Lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(Or?(t=Lt,n=n.stateNode,t.nodeType===8?w_(t.parentNode,n):t.nodeType===1&&w_(t,n),Ah(t)):w_(Lt,n.stateNode));break;case 4:r=Lt,i=Or,Lt=n.stateNode.containerInfo,Or=!0,ds(t,e,n),Lt=r,Or=i;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&A0(n,e,o),i=i.next}while(i!==r)}ds(t,e,n);break;case 1:if(!tn&&(xl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ge(n,e,a)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,ds(t,e,n),tn=r):ds(t,e,n);break;default:ds(t,e,n)}}function Ek(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mq),e.forEach(function(r){var i=Cq.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function kr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Lt=a.stateNode,Or=!1;break e;case 3:Lt=a.stateNode.containerInfo,Or=!0;break e;case 4:Lt=a.stateNode.containerInfo,Or=!0;break e}a=a.return}if(Lt===null)throw Error(O(160));jD(s,o,i),Lt=null,Or=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ge(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VD(e,t),e=e.sibling}function VD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kr(e,t),Qr(t),r&4){try{eh(3,t,t.return),zm(3,t)}catch(g){Ge(t,t.return,g)}try{eh(5,t,t.return)}catch(g){Ge(t,t.return,g)}}break;case 1:kr(e,t),Qr(t),r&512&&n!==null&&xl(n,n.return);break;case 5:if(kr(e,t),Qr(t),r&512&&n!==null&&xl(n,n.return),t.flags&32){var i=t.stateNode;try{Th(i,"")}catch(g){Ge(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lO(i,s),t0(a,o);var u=t0(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?fO(i,h):c==="dangerouslySetInnerHTML"?hO(i,h):c==="children"?Th(i,h):$S(i,c,h,u)}switch(a){case"input":Yw(i,s);break;case"textarea":uO(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ml(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ml(i,!!s.multiple,s.defaultValue,!0):Ml(i,!!s.multiple,s.multiple?[]:"",!1))}i[Oh]=s}catch(g){Ge(t,t.return,g)}}break;case 6:if(kr(e,t),Qr(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Ge(t,t.return,g)}}break;case 3:if(kr(e,t),Qr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ah(e.containerInfo)}catch(g){Ge(t,t.return,g)}break;case 4:kr(e,t),Qr(t);break;case 13:kr(e,t),Qr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(pb=et())),r&4&&Ek(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(u=tn)||c,kr(e,t),tn=u):kr(e,t),Qr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&(t.mode&1)!==0)for(U=t,c=t.child;c!==null;){for(h=U=c;U!==null;){switch(d=U,f=d.child,d.tag){case 0:case 11:case 14:case 15:eh(4,d,d.return);break;case 1:xl(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Ge(r,n,g)}}break;case 5:xl(d,d.return);break;case 22:if(d.memoizedState!==null){bk(h);continue}}f!==null?(f.return=d,U=f):bk(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=dO("display",o))}catch(g){Ge(t,t.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ge(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:kr(e,t),Qr(t),r&4&&Ek(t);break;case 21:break;default:kr(e,t),Qr(t)}}function Qr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(UD(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Th(i,""),r.flags&=-33);var s=wk(t);N0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=wk(t);x0(t,a,o);break;default:throw Error(O(161))}}catch(l){Ge(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vq(t,e,n){U=t,BD(t)}function BD(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||tn;a=Yf;var u=tn;if(Yf=o,(tn=l)&&!u)for(U=i;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?Tk(i):l!==null?(l.return=o,U=l):Tk(i);for(;s!==null;)U=s,BD(s),s=s.sibling;U=i,Yf=a,tn=u}Sk(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,U=s):Sk(t)}}function Sk(t){for(;U!==null;){var e=U;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:tn||zm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Nr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sk(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sk(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ah(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}tn||e.flags&512&&R0(e)}catch(d){Ge(e,e.return,d)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function bk(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function Tk(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zm(4,e)}catch(l){Ge(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ge(e,i,l)}}var s=e.return;try{R0(e)}catch(l){Ge(e,s,l)}break;case 5:var o=e.return;try{R0(e)}catch(l){Ge(e,o,l)}}}catch(l){Ge(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var _q=Math.ceil,gg=ns.ReactCurrentDispatcher,db=ns.ReactCurrentOwner,_r=ns.ReactCurrentBatchConfig,he=0,Tt=null,ot=null,zt=0,Vn=0,Nl=ho(0),dt=0,Uh=null,fa=0,qm=0,fb=0,th=null,Cn=null,pb=0,lu=1/0,Ai=null,mg=!1,P0=null,$s=null,Xf=!1,Is=null,yg=0,nh=0,O0=null,Np=-1,Pp=0;function vn(){return(he&6)!==0?et():Np!==-1?Np:Np=et()}function Ms(t){return(t.mode&1)===0?1:(he&2)!==0&&zt!==0?zt&-zt:nq.transition!==null?(Pp===0&&(Pp=IO()),Pp):(t=ye,t!==0||(t=window.event,t=t===void 0?16:PO(t.type)),t)}function Ur(t,e,n,r){if(50<nh)throw nh=0,O0=null,Error(O(185));Md(t,n,r),((he&2)===0||t!==Tt)&&(t===Tt&&((he&2)===0&&(qm|=n),dt===4&&ws(t,zt)),$n(t,r),n===1&&he===0&&(e.mode&1)===0&&(lu=et()+500,jm&&fo()))}function $n(t,e){var n=t.callbackNode;nz(t,e);var r=eg(t,t===Tt?zt:0);if(r===0)n!==null&&OC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&OC(n),e===1)t.tag===0?tq(Ik.bind(null,t)):XO(Ik.bind(null,t)),Xz(function(){(he&6)===0&&fo()}),n=null;else{switch(CO(r)){case 1:n=jS;break;case 4:n=bO;break;case 16:n=Zp;break;case 536870912:n=TO;break;default:n=Zp}n=YD(n,zD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zD(t,e){if(Np=-1,Pp=0,(he&6)!==0)throw Error(O(327));var n=t.callbackNode;if(Vl()&&t.callbackNode!==n)return null;var r=eg(t,t===Tt?zt:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=vg(t,r);else{e=r;var i=he;he|=2;var s=WD();(Tt!==t||zt!==e)&&(Ai=null,lu=et()+500,ra(t,e));do try{Sq();break}catch(a){qD(t,a)}while(1);ZS(),gg.current=s,he=i,ot!==null?e=0:(Tt=null,zt=0,e=dt)}if(e!==0){if(e===2&&(i=o0(t),i!==0&&(r=i,e=D0(t,i))),e===1)throw n=Uh,ra(t,0),ws(t,r),$n(t,et()),n;if(e===6)ws(t,r);else{if(i=t.current.alternate,(r&30)===0&&!wq(i)&&(e=vg(t,r),e===2&&(s=o0(t),s!==0&&(r=s,e=D0(t,s))),e===1))throw n=Uh,ra(t,0),ws(t,r),$n(t,et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:No(t,Cn,Ai);break;case 3:if(ws(t,r),(r&130023424)===r&&(e=pb+500-et(),10<e)){if(eg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=p0(No.bind(null,t,Cn,Ai),e);break}No(t,Cn,Ai);break;case 4:if(ws(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Lr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_q(r/1960))-r,10<r){t.timeoutHandle=p0(No.bind(null,t,Cn,Ai),r);break}No(t,Cn,Ai);break;case 5:No(t,Cn,Ai);break;default:throw Error(O(329))}}}return $n(t,et()),t.callbackNode===n?zD.bind(null,t):null}function D0(t,e){var n=th;return t.current.memoizedState.isDehydrated&&(ra(t,e).flags|=256),t=vg(t,e),t!==2&&(e=Cn,Cn=n,e!==null&&$0(e)),t}function $0(t){Cn===null?Cn=t:Cn.push.apply(Cn,t)}function wq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Br(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ws(t,e){for(e&=~fb,e&=~qm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Lr(e),r=1<<n;t[n]=-1,e&=~r}}function Ik(t){if((he&6)!==0)throw Error(O(327));Vl();var e=eg(t,0);if((e&1)===0)return $n(t,et()),null;var n=vg(t,e);if(t.tag!==0&&n===2){var r=o0(t);r!==0&&(e=r,n=D0(t,r))}if(n===1)throw n=Uh,ra(t,0),ws(t,e),$n(t,et()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,No(t,Cn,Ai),$n(t,et()),null}function gb(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(lu=et()+500,jm&&fo())}}function pa(t){Is!==null&&Is.tag===0&&(he&6)===0&&Vl();var e=he;he|=1;var n=_r.transition,r=ye;try{if(_r.transition=null,ye=1,t)return t()}finally{ye=r,_r.transition=n,he=e,(he&6)===0&&fo()}}function mb(){Vn=Nl.current,Ne(Nl)}function ra(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yz(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(YS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sg();break;case 3:ou(),Ne(On),Ne(on),sb();break;case 5:ib(r);break;case 4:ou();break;case 13:Ne(je);break;case 19:Ne(je);break;case 10:eb(r.type._context);break;case 22:case 23:mb()}n=n.return}if(Tt=t,ot=t=Fs(t.current,null),zt=Vn=e,dt=0,Uh=null,fb=qm=fa=0,Cn=th=null,Ho!==null){for(e=0;e<Ho.length;e++)if(n=Ho[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ho=null}return t}function qD(t,e){do{var n=ot;try{if(ZS(),Ap.current=pg,fg){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fg=!1}if(da=0,_t=lt=qe=null,Zc=!1,Mh=0,db.current=null,n===null||n.return===null){dt=1,Uh=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=zt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if((c.mode&1)===0&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=dk(o);if(f!==null){f.flags&=-257,fk(f,o,a,s,e),f.mode&1&&hk(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if((e&1)===0){hk(s,u,e),yb();break e}l=Error(O(426))}}else if(Me&&a.mode&1){var w=dk(o);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),fk(w,o,a,s,e),XS(au(l,a));break e}}s=l=au(l,a),dt!==4&&(dt=2),th===null?th=[s]:th.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=kD(s,l,e);ik(s,m);break e;case 1:a=l;var y=s.type,v=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&($s===null||!$s.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=AD(s,a,e);ik(s,_);break e}}s=s.return}while(s!==null)}KD(n)}catch(E){e=E,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(1)}function WD(){var t=gg.current;return gg.current=pg,t===null?pg:t}function yb(){(dt===0||dt===3||dt===2)&&(dt=4),Tt===null||(fa&268435455)===0&&(qm&268435455)===0||ws(Tt,zt)}function vg(t,e){var n=he;he|=2;var r=WD();(Tt!==t||zt!==e)&&(Ai=null,ra(t,e));do try{Eq();break}catch(i){qD(t,i)}while(1);if(ZS(),he=n,gg.current=r,ot!==null)throw Error(O(261));return Tt=null,zt=0,dt}function Eq(){for(;ot!==null;)HD(ot)}function Sq(){for(;ot!==null&&!K4();)HD(ot)}function HD(t){var e=QD(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,e===null?KD(t):ot=e,db.current=null}function KD(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=pq(n,e,Vn),n!==null){ot=n;return}}else{if(n=gq(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,ot=null;return}}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);dt===0&&(dt=5)}function No(t,e,n){var r=ye,i=_r.transition;try{_r.transition=null,ye=1,bq(t,e,n,r)}finally{_r.transition=i,ye=r}return null}function bq(t,e,n,r){do Vl();while(Is!==null);if((he&6)!==0)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rz(t,s),t===Tt&&(ot=Tt=null,zt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Xf||(Xf=!0,YD(Zp,function(){return Vl(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=_r.transition,_r.transition=null;var o=ye;ye=1;var a=he;he|=4,db.current=null,yq(t,n),VD(n,t),zz(d0),tg=!!h0,d0=h0=null,t.current=n,vq(n),G4(),he=a,ye=o,_r.transition=s}else t.current=n;if(Xf&&(Xf=!1,Is=t,yg=i),s=t.pendingLanes,s===0&&($s=null),X4(n.stateNode),$n(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mg)throw mg=!1,t=P0,P0=null,t;return(yg&1)!==0&&t.tag!==0&&Vl(),s=t.pendingLanes,(s&1)!==0?t===O0?nh++:(nh=0,O0=t):nh=0,fo(),null}function Vl(){if(Is!==null){var t=CO(yg),e=_r.transition,n=ye;try{if(_r.transition=null,ye=16>t?16:t,Is===null)var r=!1;else{if(t=Is,Is=null,yg=0,(he&6)!==0)throw Error(O(331));var i=he;for(he|=4,U=t.current;U!==null;){var s=U,o=s.child;if((U.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(U=u;U!==null;){var c=U;switch(c.tag){case 0:case 11:case 15:eh(8,c,s)}var h=c.child;if(h!==null)h.return=c,U=h;else for(;U!==null;){c=U;var d=c.sibling,f=c.return;if(LD(c),c===u){U=null;break}if(d!==null){d.return=f,U=d;break}U=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}U=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:eh(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,U=m;break e}U=s.return}}var y=t.current;for(U=y;U!==null;){o=U;var v=o.child;if((o.subtreeFlags&2064)!==0&&v!==null)v.return=o,U=v;else e:for(o=y;U!==null;){if(a=U,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:zm(9,a)}}catch(E){Ge(a,a.return,E)}if(a===o){U=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,U=_;break e}U=a.return}}if(he=i,fo(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot($m,t)}catch{}r=!0}return r}finally{ye=n,_r.transition=e}}return!1}function Ck(t,e,n){e=au(n,e),e=kD(t,e,1),t=Ds(t,e,1),e=vn(),t!==null&&(Md(t,1,e),$n(t,e))}function Ge(t,e,n){if(t.tag===3)Ck(t,t,n);else for(;e!==null;){if(e.tag===3){Ck(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($s===null||!$s.has(r))){t=au(n,t),t=AD(e,t,1),e=Ds(e,t,1),t=vn(),e!==null&&(Md(e,1,t),$n(e,t));break}}e=e.return}}function Tq(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(zt&n)===n&&(dt===4||dt===3&&(zt&130023424)===zt&&500>et()-pb?ra(t,0):fb|=n),$n(t,e)}function GD(t,e){e===0&&((t.mode&1)===0?e=1:(e=Vf,Vf<<=1,(Vf&130023424)===0&&(Vf=4194304)));var n=vn();t=Gi(t,e),t!==null&&(Md(t,e,n),$n(t,n))}function Iq(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GD(t,n)}function Cq(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),GD(t,n)}var QD;QD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||On.current)An=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return An=!1,fq(t,e,n);An=(t.flags&131072)!==0}else An=!1,Me&&(e.flags&1048576)!==0&&JO(e,lg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xp(t,e),t=e.pendingProps;var i=ru(e,on.current);jl(e,n),i=ab(null,e,r,t,i,n);var s=lb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(r)?(s=!0,og(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,nb(e),i.updater=Vm,e.stateNode=i,i._reactInternals=e,E0(e,r,t,n),e=T0(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&QS(e),un(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Aq(r),t=Nr(r,t),i){case 0:e=b0(null,e,r,t,n);break e;case 1:e=mk(null,e,r,t,n);break e;case 11:e=pk(null,e,r,t,n);break e;case 14:e=gk(null,e,r,Nr(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nr(r,i),b0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nr(r,i),mk(t,e,r,i,n);case 3:e:{if(PD(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,nD(t,e),hg(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=au(Error(O(423)),e),e=yk(t,e,r,n,i);break e}else if(r!==i){i=au(Error(O(424)),e),e=yk(t,e,r,n,i);break e}else for(qn=Os(e.stateNode.containerInfo.firstChild),Yn=e,Me=!0,Dr=null,n=oD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(iu(),r===i){e=Qi(t,e,n);break e}un(t,e,r,n)}e=e.child}return e;case 5:return aD(e),t===null&&v0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,f0(r,i)?o=null:s!==null&&f0(r,s)&&(e.flags|=32),ND(t,e),un(t,e,o,n),e.child;case 6:return t===null&&v0(e),null;case 13:return OD(t,e,n);case 4:return rb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=su(e,null,r,n):un(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nr(r,i),pk(t,e,r,i,n);case 7:return un(t,e,e.pendingProps,n),e.child;case 8:return un(t,e,e.pendingProps.children,n),e.child;case 12:return un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(ug,r._currentValue),r._currentValue=o,s!==null)if(Br(s.value,o)){if(s.children===i.children&&!On.current){e=Qi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ui(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),_0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}un(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,jl(e,n),i=Er(i),r=r(i),e.flags|=1,un(t,e,r,n),e.child;case 14:return r=e.type,i=Nr(r,e.pendingProps),i=Nr(r.type,i),gk(t,e,r,i,n);case 15:return RD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Nr(r,i),xp(t,e),e.tag=1,Dn(r)?(t=!0,og(e)):t=!1,jl(e,n),iD(e,r,i),E0(e,r,i,n),T0(null,e,r,!0,t,n);case 19:return DD(t,e,n);case 22:return xD(t,e,n)}throw Error(O(156,e.tag))};function YD(t,e){return SO(t,e)}function kq(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(t,e,n,r){return new kq(t,e,n,r)}function vb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Aq(t){if(typeof t=="function")return vb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===FS)return 11;if(t===LS)return 14}return 2}function Fs(t,e){var n=t.alternate;return n===null?(n=pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Op(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")vb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case El:return ia(n.children,i,s,e);case MS:o=8,i|=8;break;case Ww:return t=pr(12,n,e,i|2),t.elementType=Ww,t.lanes=s,t;case Hw:return t=pr(13,n,e,i),t.elementType=Hw,t.lanes=s,t;case Kw:return t=pr(19,n,e,i),t.elementType=Kw,t.lanes=s,t;case sO:return Wm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rO:o=10;break e;case iO:o=9;break e;case FS:o=11;break e;case LS:o=14;break e;case ms:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=pr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ia(t,e,n,r){return t=pr(7,t,r,e),t.lanes=n,t}function Wm(t,e,n,r){return t=pr(22,t,r,e),t.elementType=sO,t.lanes=n,t.stateNode={isHidden:!1},t}function A_(t,e,n){return t=pr(6,t,null,e),t.lanes=n,t}function R_(t,e,n){return e=pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Rq(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=u_(0),this.expirationTimes=u_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _b(t,e,n,r,i,s,o,a,l){return t=new Rq(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nb(s),t}function xq(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XD(t){if(!t)return Hs;t=t._reactInternals;e:{if(za(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(Dn(n))return YO(t,n,e)}return e}function JD(t,e,n,r,i,s,o,a,l){return t=_b(n,r,!0,t,i,s,o,a,l),t.context=XD(null),n=t.current,r=vn(),i=Ms(n),s=Ui(r,i),s.callback=e!=null?e:null,Ds(n,s,i),t.current.lanes=i,Md(t,i,r),$n(t,r),t}function Hm(t,e,n,r){var i=e.current,s=vn(),o=Ms(i);return n=XD(n),e.context===null?e.context=n:e.pendingContext=n,e=Ui(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ds(i,e,o),t!==null&&(Ur(t,i,o,s),kp(t,i,o)),o}function _g(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wb(t,e){kk(t,e),(t=t.alternate)&&kk(t,e)}function Nq(){return null}var ZD=typeof reportError=="function"?reportError:function(t){console.error(t)};function Eb(t){this._internalRoot=t}Km.prototype.render=Eb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Hm(t,e,null,null)};Km.prototype.unmount=Eb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pa(function(){Hm(null,t,null,null)}),e[Ki]=null}};function Km(t){this._internalRoot=t}Km.prototype.unstable_scheduleHydration=function(t){if(t){var e=RO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_s.length&&e!==0&&e<_s[n].priority;n++);_s.splice(n,0,t),n===0&&NO(t)}};function Sb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ak(){}function Pq(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=_g(o);s.call(u)}}var o=JD(e,r,t,0,null,!1,!1,"",Ak);return t._reactRootContainer=o,t[Ki]=o.current,Nh(t.nodeType===8?t.parentNode:t),pa(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=_g(l);a.call(u)}}var l=_b(t,0,!1,null,null,!1,!1,"",Ak);return t._reactRootContainer=l,t[Ki]=l.current,Nh(t.nodeType===8?t.parentNode:t),pa(function(){Hm(e,l,n,r)}),l}function Qm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_g(o);a.call(l)}}Hm(e,o,t,i)}else o=Pq(n,e,t,i,r);return _g(o)}kO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uc(e.pendingLanes);n!==0&&(VS(e,n|1),$n(e,et()),(he&6)===0&&(lu=et()+500,fo()))}break;case 13:pa(function(){var r=Gi(t,1);if(r!==null){var i=vn();Ur(r,t,1,i)}}),wb(t,1)}};BS=function(t){if(t.tag===13){var e=Gi(t,134217728);if(e!==null){var n=vn();Ur(e,t,134217728,n)}wb(t,134217728)}};AO=function(t){if(t.tag===13){var e=Ms(t),n=Gi(t,e);if(n!==null){var r=vn();Ur(n,t,e,r)}wb(t,e)}};RO=function(){return ye};xO=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};r0=function(t,e,n){switch(e){case"input":if(Yw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Um(r);if(!i)throw Error(O(90));aO(r),Yw(r,i)}}}break;case"textarea":uO(t,n);break;case"select":e=n.value,e!=null&&Ml(t,!!n.multiple,e,!1)}};mO=gb;yO=pa;var Oq={usingClientEntryPoint:!1,Events:[Ld,Il,Um,pO,gO,gb]},_c={findFiberByHostInstance:Wo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Dq={bundleType:_c.bundleType,version:_c.version,rendererPackageName:_c.rendererPackageName,rendererConfig:_c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wO(t),t===null?null:t.stateNode},findFiberByHostInstance:_c.findFiberByHostInstance||Nq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jf.isDisabled&&Jf.supportsFiber)try{$m=Jf.inject(Dq),oi=Jf}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oq;ir.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sb(e))throw Error(O(200));return xq(t,e,null,n)};ir.createRoot=function(t,e){if(!Sb(t))throw Error(O(299));var n=!1,r="",i=ZD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_b(t,1,!1,null,null,n,!1,r,i),t[Ki]=e.current,Nh(t.nodeType===8?t.parentNode:t),new Eb(e)};ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=wO(e),t=t===null?null:t.stateNode,t};ir.flushSync=function(t){return pa(t)};ir.hydrate=function(t,e,n){if(!Gm(e))throw Error(O(200));return Qm(null,t,e,!0,n)};ir.hydrateRoot=function(t,e,n){if(!Sb(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ZD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JD(e,null,t,1,n!=null?n:null,i,!1,s,o),t[Ki]=e.current,Nh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Km(e)};ir.render=function(t,e,n){if(!Gm(e))throw Error(O(200));return Qm(null,t,e,!1,n)};ir.unmountComponentAtNode=function(t){if(!Gm(t))throw Error(O(40));return t._reactRootContainer?(pa(function(){Qm(null,null,t,!1,function(){t._reactRootContainer=null,t[Ki]=null})}),!0):!1};ir.unstable_batchedUpdates=gb;ir.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gm(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Qm(t,e,n,!1,r)};ir.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=ir})(AS);var Rk=AS.exports;zw.createRoot=Rk.createRoot,zw.hydrateRoot=Rk.hydrateRoot;var e$={exports:{}},t$={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uu=A.exports;function $q(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mq=typeof Object.is=="function"?Object.is:$q,Fq=uu.useState,Lq=uu.useEffect,Uq=uu.useLayoutEffect,jq=uu.useDebugValue;function Vq(t,e){var n=e(),r=Fq({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Uq(function(){i.value=n,i.getSnapshot=e,x_(i)&&s({inst:i})},[t,n,e]),Lq(function(){return x_(i)&&s({inst:i}),t(function(){x_(i)&&s({inst:i})})},[t]),jq(n),n}function x_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mq(t,n)}catch{return!0}}function Bq(t,e){return e()}var zq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bq:Vq;t$.useSyncExternalStore=uu.useSyncExternalStore!==void 0?uu.useSyncExternalStore:zq;(function(t){t.exports=t$})(e$);var n$={exports:{}},r$={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym=A.exports,qq=e$.exports;function Wq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hq=typeof Object.is=="function"?Object.is:Wq,Kq=qq.useSyncExternalStore,Gq=Ym.useRef,Qq=Ym.useEffect,Yq=Ym.useMemo,Xq=Ym.useDebugValue;r$.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=Gq(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Yq(function(){function l(f){if(!u){if(u=!0,c=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return h=p}return h=f}if(p=h,Hq(c,f))return p;var g=r(f);return i!==void 0&&i(p,g)?p:(c=f,h=g)}var u=!1,c,h,d=n===void 0?null:n;return[function(){return l(e())},d===null?void 0:function(){return l(d())}]},[e,n,r,i]);var a=Kq(t,s[0],s[1]);return Qq(function(){o.hasValue=!0,o.value=a},[a]),Xq(a),a};(function(t){t.exports=r$})(n$);function Jq(t){t()}let i$=Jq;const Zq=t=>i$=t,eW=()=>i$,Ks=P4.createContext(null);function s$(){return A.exports.useContext(Ks)}const tW=()=>{throw new Error("uSES not initialized!")};let o$=tW;const nW=t=>{o$=t},rW=(t,e)=>t===e;function iW(t=Ks){const e=t===Ks?s$:()=>A.exports.useContext(t);return function(r,i=rW){const{store:s,subscription:o,getServerState:a}=e(),l=o$(o.addNestedSub,s.getState,a||s.getState,r,i);return A.exports.useDebugValue(l),l}}const sW=iW();function wg(){return wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wg.apply(this,arguments)}var a$={exports:{}},ve={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot=typeof Symbol=="function"&&Symbol.for,bb=Ot?Symbol.for("react.element"):60103,Tb=Ot?Symbol.for("react.portal"):60106,Xm=Ot?Symbol.for("react.fragment"):60107,Jm=Ot?Symbol.for("react.strict_mode"):60108,Zm=Ot?Symbol.for("react.profiler"):60114,ey=Ot?Symbol.for("react.provider"):60109,ty=Ot?Symbol.for("react.context"):60110,Ib=Ot?Symbol.for("react.async_mode"):60111,ny=Ot?Symbol.for("react.concurrent_mode"):60111,ry=Ot?Symbol.for("react.forward_ref"):60112,iy=Ot?Symbol.for("react.suspense"):60113,oW=Ot?Symbol.for("react.suspense_list"):60120,sy=Ot?Symbol.for("react.memo"):60115,oy=Ot?Symbol.for("react.lazy"):60116,aW=Ot?Symbol.for("react.block"):60121,lW=Ot?Symbol.for("react.fundamental"):60117,uW=Ot?Symbol.for("react.responder"):60118,cW=Ot?Symbol.for("react.scope"):60119;function or(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case bb:switch(t=t.type,t){case Ib:case ny:case Xm:case Zm:case Jm:case iy:return t;default:switch(t=t&&t.$$typeof,t){case ty:case ry:case oy:case sy:case ey:return t;default:return e}}case Tb:return e}}}function l$(t){return or(t)===ny}ve.AsyncMode=Ib;ve.ConcurrentMode=ny;ve.ContextConsumer=ty;ve.ContextProvider=ey;ve.Element=bb;ve.ForwardRef=ry;ve.Fragment=Xm;ve.Lazy=oy;ve.Memo=sy;ve.Portal=Tb;ve.Profiler=Zm;ve.StrictMode=Jm;ve.Suspense=iy;ve.isAsyncMode=function(t){return l$(t)||or(t)===Ib};ve.isConcurrentMode=l$;ve.isContextConsumer=function(t){return or(t)===ty};ve.isContextProvider=function(t){return or(t)===ey};ve.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===bb};ve.isForwardRef=function(t){return or(t)===ry};ve.isFragment=function(t){return or(t)===Xm};ve.isLazy=function(t){return or(t)===oy};ve.isMemo=function(t){return or(t)===sy};ve.isPortal=function(t){return or(t)===Tb};ve.isProfiler=function(t){return or(t)===Zm};ve.isStrictMode=function(t){return or(t)===Jm};ve.isSuspense=function(t){return or(t)===iy};ve.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Xm||t===ny||t===Zm||t===Jm||t===iy||t===oW||typeof t=="object"&&t!==null&&(t.$$typeof===oy||t.$$typeof===sy||t.$$typeof===ey||t.$$typeof===ty||t.$$typeof===ry||t.$$typeof===lW||t.$$typeof===uW||t.$$typeof===cW||t.$$typeof===aW)};ve.typeOf=or;(function(t){t.exports=ve})(a$);var u$=a$.exports,hW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dW={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c$={};c$[u$.ForwardRef]=hW;c$[u$.Memo]=dW;var fW={exports:{}},_e={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb=Symbol.for("react.element"),kb=Symbol.for("react.portal"),ay=Symbol.for("react.fragment"),ly=Symbol.for("react.strict_mode"),uy=Symbol.for("react.profiler"),cy=Symbol.for("react.provider"),hy=Symbol.for("react.context"),pW=Symbol.for("react.server_context"),dy=Symbol.for("react.forward_ref"),fy=Symbol.for("react.suspense"),py=Symbol.for("react.suspense_list"),gy=Symbol.for("react.memo"),my=Symbol.for("react.lazy"),gW=Symbol.for("react.offscreen"),h$;h$=Symbol.for("react.module.reference");function Tr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Cb:switch(t=t.type,t){case ay:case uy:case ly:case fy:case py:return t;default:switch(t=t&&t.$$typeof,t){case pW:case hy:case dy:case my:case gy:case cy:return t;default:return e}}case kb:return e}}}_e.ContextConsumer=hy;_e.ContextProvider=cy;_e.Element=Cb;_e.ForwardRef=dy;_e.Fragment=ay;_e.Lazy=my;_e.Memo=gy;_e.Portal=kb;_e.Profiler=uy;_e.StrictMode=ly;_e.Suspense=fy;_e.SuspenseList=py;_e.isAsyncMode=function(){return!1};_e.isConcurrentMode=function(){return!1};_e.isContextConsumer=function(t){return Tr(t)===hy};_e.isContextProvider=function(t){return Tr(t)===cy};_e.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cb};_e.isForwardRef=function(t){return Tr(t)===dy};_e.isFragment=function(t){return Tr(t)===ay};_e.isLazy=function(t){return Tr(t)===my};_e.isMemo=function(t){return Tr(t)===gy};_e.isPortal=function(t){return Tr(t)===kb};_e.isProfiler=function(t){return Tr(t)===uy};_e.isStrictMode=function(t){return Tr(t)===ly};_e.isSuspense=function(t){return Tr(t)===fy};_e.isSuspenseList=function(t){return Tr(t)===py};_e.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ay||t===uy||t===ly||t===fy||t===py||t===gW||typeof t=="object"&&t!==null&&(t.$$typeof===my||t.$$typeof===gy||t.$$typeof===cy||t.$$typeof===hy||t.$$typeof===dy||t.$$typeof===h$||t.getModuleId!==void 0)};_e.typeOf=Tr;(function(t){t.exports=_e})(fW);function mW(){const t=eW();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const xk={notify(){},get:()=>[]};function yW(t,e){let n,r=xk;function i(h){return l(),r.subscribe(h)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return Boolean(n)}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=mW())}function u(){n&&(n(),n=void 0,r.clear(),r=xk)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:u,getListeners:()=>r};return c}const vW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_W=vW?A.exports.useLayoutEffect:A.exports.useEffect;var yy={exports:{}},vy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wW=A.exports,EW=Symbol.for("react.element"),SW=Symbol.for("react.fragment"),bW=Object.prototype.hasOwnProperty,TW=wW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IW={key:!0,ref:!0,__self:!0,__source:!0};function d$(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bW.call(e,r)&&!IW.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:EW,type:t,key:s,ref:o,props:i,_owner:TW.current}}vy.Fragment=SW;vy.jsx=d$;vy.jsxs=d$;(function(t){t.exports=vy})(yy);const qa=yy.exports.Fragment,R=yy.exports.jsx,Ve=yy.exports.jsxs;function CW({store:t,context:e,children:n,serverState:r}){const i=A.exports.useMemo(()=>{const a=yW(t);return{store:t,subscription:a,getServerState:r?()=>r:void 0}},[t,r]),s=A.exports.useMemo(()=>t.getState(),[t]);return _W(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==t.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]),R((e||Ks).Provider,{value:i,children:n})}function f$(t=Ks){const e=t===Ks?s$:()=>A.exports.useContext(t);return function(){const{store:r}=e();return r}}const kW=f$();function AW(t=Ks){const e=t===Ks?kW:f$(t);return function(){return e().dispatch}}const RW=AW();nW(n$.exports.useSyncExternalStoreWithSelector);Zq(AS.exports.unstable_batchedUpdates);function Dp(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dp=function(n){return typeof n}:Dp=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dp(t)}function xW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function NW(t,e,n){return e&&Nk(t.prototype,e),n&&Nk(t,n),t}function PW(t,e){return e&&(Dp(e)==="object"||typeof e=="function")?e:$p(t)}function M0(t){return M0=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},M0(t)}function $p(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OW(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F0(t,e)}function F0(t,e){return F0=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},F0(t,e)}function Mp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p$=function(t){OW(e,t);function e(){var n,r;xW(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=PW(this,(n=M0(e)).call.apply(n,[this].concat(s))),Mp($p(r),"state",{bootstrapped:!1}),Mp($p(r),"_unsubscribe",void 0),Mp($p(r),"handlePersistorState",function(){var a=r.props.persistor,l=a.getState(),u=l.bootstrapped;u&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}return NW(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}(A.exports.PureComponent);Mp(p$,"defaultProps",{children:null,loading:null});function $r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Gs(t){return!!t&&!!t[$e]}function Yi(t){return!!t&&(function(e){if(!e||typeof e!="object")return!1;var n=Object.getPrototypeOf(e);if(n===null)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===BW}(t)||Array.isArray(t)||!!t[Lk]||!!t.constructor[Lk]||Ab(t)||Rb(t))}function ga(t,e,n){n===void 0&&(n=!1),Mu(t)===0?(n?Object.keys:zl)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Mu(t){var e=t[$e];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Ab(t)?2:Rb(t)?3:0}function Bl(t,e){return Mu(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function DW(t,e){return Mu(t)===2?t.get(e):t[e]}function g$(t,e,n){var r=Mu(t);r===2?t.set(e,n):r===3?(t.delete(e),t.add(n)):t[e]=n}function m$(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Ab(t){return jW&&t instanceof Map}function Rb(t){return VW&&t instanceof Set}function Po(t){return t.o||t.t}function xb(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=v$(t);delete e[$e];for(var n=zl(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Nb(t,e){return e===void 0&&(e=!1),Pb(t)||Gs(t)||!Yi(t)||(Mu(t)>1&&(t.set=t.add=t.clear=t.delete=$W),Object.freeze(t),e&&ga(t,function(n,r){return Nb(r,!0)},!0)),t}function $W(){$r(2)}function Pb(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function li(t){var e=V0[t];return e||$r(18,t),e}function MW(t,e){V0[t]||(V0[t]=e)}function L0(){return jh}function N_(t,e){e&&(li("Patches"),t.u=[],t.s=[],t.v=e)}function Eg(t){U0(t),t.p.forEach(FW),t.p=null}function U0(t){t===jh&&(jh=t.l)}function Pk(t){return jh={p:[],l:jh,h:t,m:!0,_:0}}function FW(t){var e=t[$e];e.i===0||e.i===1?e.j():e.O=!0}function P_(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.g||li("ES5").S(e,t,r),r?(n[$e].P&&(Eg(e),$r(4)),Yi(t)&&(t=Sg(e,t),e.l||bg(e,t)),e.u&&li("Patches").M(n[$e].t,t,e.u,e.s)):t=Sg(e,n,[]),Eg(e),e.u&&e.v(e.u,e.s),t!==y$?t:void 0}function Sg(t,e,n){if(Pb(e))return e;var r=e[$e];if(!r)return ga(e,function(s,o){return Ok(t,r,e,s,o,n)},!0),e;if(r.A!==t)return e;if(!r.P)return bg(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=xb(r.k):r.o;ga(r.i===3?new Set(i):i,function(s,o){return Ok(t,r,i,s,o,n)}),bg(t,i,!1),n&&t.u&&li("Patches").R(r,n,t.u,t.s)}return r.o}function Ok(t,e,n,r,i,s){if(Gs(i)){var o=Sg(t,i,s&&e&&e.i!==3&&!Bl(e.D,r)?s.concat(r):void 0);if(g$(n,r,o),!Gs(o))return;t.m=!1}if(Yi(i)&&!Pb(i)){if(!t.h.F&&t._<1)return;Sg(t,i),e&&e.A.l||bg(t,i)}}function bg(t,e,n){n===void 0&&(n=!1),t.h.F&&t.m&&Nb(e,n)}function O_(t,e){var n=t[$e];return(n?Po(n):t)[e]}function Dk(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Es(t){t.P||(t.P=!0,t.l&&Es(t.l))}function D_(t){t.o||(t.o=xb(t.t))}function j0(t,e,n){var r=Ab(e)?li("MapSet").N(e,n):Rb(e)?li("MapSet").T(e,n):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:L0(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=Vh;o&&(l=[a],u=Vc);var c=Proxy.revocable(l,u),h=c.revoke,d=c.proxy;return a.k=d,a.j=h,d}(e,n):li("ES5").J(e,n);return(n?n.A:L0()).p.push(r),r}function LW(t){return Gs(t)||$r(22,t),function e(n){if(!Yi(n))return n;var r,i=n[$e],s=Mu(n);if(i){if(!i.P&&(i.i<4||!li("ES5").K(i)))return i.t;i.I=!0,r=$k(n,s),i.I=!1}else r=$k(n,s);return ga(r,function(o,a){i&&DW(i.t,o)===a||g$(r,o,e(a))}),s===3?new Set(r):r}(t)}function $k(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return xb(t)}function UW(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[$e];return Vh.get(l,s)},set:function(l){var u=this[$e];Vh.set(u,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][$e];if(!a.P)switch(a.i){case 5:r(a)&&Es(a);break;case 4:n(a)&&Es(a)}}}function n(s){for(var o=s.t,a=s.k,l=zl(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==$e){var h=o[c];if(h===void 0&&!Bl(o,c))return!0;var d=a[c],f=d&&d[$e];if(f?f.t!==h:!m$(d,h))return!0}}var p=!!o[$e];return l.length!==zl(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};MW("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(c,h){if(c){for(var d=Array(h.length),f=0;f<h.length;f++)Object.defineProperty(d,""+f,t(f,!0));return d}var p=v$(h);delete p[$e];for(var g=zl(p),w=0;w<g.length;w++){var m=g[w];p[m]=t(m,c||!!p[m].enumerable)}return Object.create(Object.getPrototypeOf(h),p)}(a,s),u={i:a?5:4,A:o?o.A:L0(),P:!1,I:!1,D:{},l:o,t:s,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,$e,{value:u,writable:!0}),l},S:function(s,o,a){a?Gs(o)&&o[$e].A===s&&e(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var c=u[$e];if(c){var h=c.t,d=c.k,f=c.D,p=c.i;if(p===4)ga(d,function(v){v!==$e&&(h[v]!==void 0||Bl(h,v)?f[v]||l(d[v]):(f[v]=!0,Es(c)))}),ga(h,function(v){d[v]!==void 0||Bl(d,v)||(f[v]=!1,Es(c))});else if(p===5){if(r(c)&&(Es(c),f.length=!0),d.length<h.length)for(var g=d.length;g<h.length;g++)f[g]=!1;else for(var w=h.length;w<d.length;w++)f[w]=!0;for(var m=Math.min(d.length,h.length),y=0;y<m;y++)d.hasOwnProperty(y)||(f[y]=!0),f[y]===void 0&&l(d[y])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Mk,jh,Ob=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",jW=typeof Map<"u",VW=typeof Set<"u",Fk=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",y$=Ob?Symbol.for("immer-nothing"):((Mk={})["immer-nothing"]=!0,Mk),Lk=Ob?Symbol.for("immer-draftable"):"__$immer_draftable",$e=Ob?Symbol.for("immer-state"):"__$immer_state",BW=""+Object.prototype.constructor,zl=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,v$=Object.getOwnPropertyDescriptors||function(t){var e={};return zl(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},V0={},Vh={get:function(t,e){if(e===$e)return t;var n=Po(t);if(!Bl(n,e))return function(i,s,o){var a,l=Dk(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!Yi(r)?r:r===O_(t.t,e)?(D_(t),t.o[e]=j0(t.A.h,r,t)):r},has:function(t,e){return e in Po(t)},ownKeys:function(t){return Reflect.ownKeys(Po(t))},set:function(t,e,n){var r=Dk(Po(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=O_(Po(t),e),s=i==null?void 0:i[$e];if(s&&s.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(m$(n,i)&&(n!==void 0||Bl(t.t,e)))return!0;D_(t),Es(t)}return t.o[e]===n&&typeof n!="number"&&(n!==void 0||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return O_(t.t,e)!==void 0||e in t.t?(t.D[e]=!1,D_(t),Es(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Po(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){$r(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){$r(12)}},Vc={};ga(Vh,function(t,e){Vc[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Vc.deleteProperty=function(t,e){return Vc.set.call(this,t,e,void 0)},Vc.set=function(t,e,n){return Vh.set.call(this,t[0],e,n,t[0])};var zW=function(){function t(n){var r=this;this.g=Fk,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(g){var w=this;g===void 0&&(g=a);for(var m=arguments.length,y=Array(m>1?m-1:0),v=1;v<m;v++)y[v-1]=arguments[v];return l.produce(g,function(_){var E;return(E=s).call.apply(E,[w,_].concat(y))})}}var u;if(typeof s!="function"&&$r(6),o!==void 0&&typeof o!="function"&&$r(7),Yi(i)){var c=Pk(r),h=j0(r,i,void 0),d=!0;try{u=s(h),d=!1}finally{d?Eg(c):U0(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(g){return N_(c,o),P_(g,c)},function(g){throw Eg(c),g}):(N_(c,o),P_(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===y$&&(u=void 0),r.F&&Nb(u,!0),o){var f=[],p=[];li("Patches").M(i,u,f,p),o(f,p)}return u}$r(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,h=Array(c>1?c-1:0),d=1;d<c;d++)h[d-1]=arguments[d];return r.produceWithPatches(u,function(f){return i.apply(void 0,[f].concat(h))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Yi(n)||$r(8),Gs(n)&&(n=LW(n));var r=Pk(this),i=j0(this,n,void 0);return i[$e].C=!0,U0(r),i},e.finishDraft=function(n,r){var i=n&&n[$e],s=i.A;return N_(s,r),P_(void 0,s)},e.setAutoFreeze=function(n){this.F=n},e.setUseProxies=function(n){n&&!Fk&&$r(20),this.g=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=li("Patches").$;return Gs(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),Zn=new zW,_$=Zn.produce;Zn.produceWithPatches.bind(Zn);Zn.setAutoFreeze.bind(Zn);Zn.setUseProxies.bind(Zn);Zn.applyPatches.bind(Zn);Zn.createDraft.bind(Zn);Zn.finishDraft.bind(Zn);function qW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uk(Object(n),!0).forEach(function(r){qW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Vk=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),$_=function(){return Math.random().toString(36).substring(7).split("").join(".")},Tg={INIT:"@@redux/INIT"+$_(),REPLACE:"@@redux/REPLACE"+$_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+$_()}};function WW(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Db(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zt(1));return n(Db)(t,e)}if(typeof t!="function")throw new Error(Zt(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(Zt(3));return s}function h(g){if(typeof g!="function")throw new Error(Zt(4));if(l)throw new Error(Zt(5));var w=!0;return u(),a.push(g),function(){if(!!w){if(l)throw new Error(Zt(6));w=!1,u();var y=a.indexOf(g);a.splice(y,1),o=null}}}function d(g){if(!WW(g))throw new Error(Zt(7));if(typeof g.type>"u")throw new Error(Zt(8));if(l)throw new Error(Zt(9));try{l=!0,s=i(s,g)}finally{l=!1}for(var w=o=a,m=0;m<w.length;m++){var y=w[m];y()}return g}function f(g){if(typeof g!="function")throw new Error(Zt(10));i=g,d({type:Tg.REPLACE})}function p(){var g,w=h;return g={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Zt(11));function v(){y.next&&y.next(c())}v();var _=w(v);return{unsubscribe:_}}},g[Vk]=function(){return this},g}return d({type:Tg.INIT}),r={dispatch:d,subscribe:h,getState:c,replaceReducer:f},r[Vk]=p,r}function HW(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Tg.INIT});if(typeof r>"u")throw new Error(Zt(12));if(typeof n(void 0,{type:Tg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zt(13))})}function w$(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{HW(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,h={},d=0;d<s.length;d++){var f=s[d],p=n[f],g=l[f],w=p(g,u);if(typeof w>"u")throw u&&u.type,new Error(Zt(14));h[f]=w,c=c||w!==g}return c=c||s.length!==Object.keys(l).length,c?h:l}}function Ig(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function KW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Zt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=Ig.apply(void 0,a)(i.dispatch),jk(jk({},i),{},{dispatch:s})}}}function E$(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var S$=E$();S$.withExtraArgument=E$;const Bk=S$;var GW=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();globalThis&&globalThis.__generator;var Cg=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},QW=Object.defineProperty,zk=Object.getOwnPropertySymbols,YW=Object.prototype.hasOwnProperty,XW=Object.prototype.propertyIsEnumerable,qk=function(t,e,n){return e in t?QW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Bh=function(t,e){for(var n in e||(e={}))YW.call(e,n)&&qk(t,n,e[n]);if(zk)for(var r=0,i=zk(e);r<i.length;r++){var n=i[r];XW.call(e,n)&&qk(t,n,e[n])}return t},JW=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ig:Ig.apply(null,arguments)};function ZW(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var eH=function(t){GW(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Cg([void 0],n[0].concat(this)))):new(e.bind.apply(e,Cg([void 0],n.concat(this))))},e}(Array);function B0(t){return Yi(t)?_$(t,function(){}):t}function tH(t){return typeof t=="boolean"}function nH(){return function(e){return rH(e)}}function rH(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new eH;return n&&(tH(n)?r.push(Bk):r.push(Bk.withExtraArgument(n.extraArgument))),r}var iH=!0;function sH(t){var e=nH(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,h=n.enhancers,d=h===void 0?void 0:h,f;if(typeof i=="function")f=i;else if(ZW(i))f=w$(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var g=KW.apply(void 0,p),w=Ig;l&&(w=JW(Bh({trace:!iH},typeof l=="object"&&l)));var m=[g];Array.isArray(d)?m=Cg([g],d):typeof d=="function"&&(m=d(m));var y=w.apply(void 0,m);return Db(f,c,y)}function zh(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Bh(Bh({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function b$(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function oH(t){return typeof t=="function"}function aH(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?b$(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(oH(t))l=function(){return B0(t())};else{var u=B0(t);l=function(){return u}}function c(h,d){h===void 0&&(h=l());var f=Cg([s[d.type]],o.filter(function(p){var g=p.matcher;return g(d)}).map(function(p){var g=p.reducer;return g}));return f.filter(function(p){return!!p}).length===0&&(f=[a]),f.reduce(function(p,g){if(g)if(Gs(p)){var w=p,m=g(w,d);return m===void 0?p:m}else{if(Yi(p))return _$(p,function(y){return g(y,d)});var m=g(p,d);if(m===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}return p},h)}return c.getInitialState=l,c}function lH(t,e){return t+"/"+e}function T$(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:B0(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var h=r[c],d=lH(e,c),f,p;"reducer"in h?(f=h.reducer,p=h.prepare):f=h,s[c]=f,o[d]=f,a[c]=p?zh(d,p):zh(d)});function l(){var c=typeof t.extraReducers=="function"?b$(t.extraReducers):[t.extraReducers],h=c[0],d=h===void 0?{}:h,f=c[1],p=f===void 0?[]:f,g=c[2],w=g===void 0?void 0:g,m=Bh(Bh({},d),o);return aH(n,m,p,w)}var u;return{name:e,reducer:function(c,h){return u||(u=l()),u(c,h)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var $b="listenerMiddleware";zh($b+"/add");zh($b+"/removeAll");zh($b+"/remove");UW();const uH={email:null,token:null,id:null},I$=T$({name:"user",initialState:uH,reducers:{setUser(t,e){return{...t,...e.payload}},logOutUser(t){return{...t,email:null,token:null,id:null}}}}),{setUser:C$,logOutUser:cH}=I$.actions,hH=I$.reducer,dH={items:[]},k$=T$({name:"statuses",initialState:dH,reducers:{addStatus(t,e){const{label:n,expirationTimeMS:r=5e3}=e.payload;return{items:[...t.items,{label:n,expirationTimeMS:r}]}},clearStatuses(t){return{items:[]}}}}),{addStatus:Go,clearStatuses:oCe}=k$.actions,fH=t=>t.statuses.items,pH=k$.reducer;var Mb="persist:",Fb="persist/FLUSH",_y="persist/REHYDRATE",Lb="persist/PAUSE",Ub="persist/PERSIST",jb="persist/PURGE",Vb="persist/REGISTER",gH=-1;function Fp(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fp=function(n){return typeof n}:Fp=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fp(t)}function Wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wk(n,!0).forEach(function(r){yH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wk(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vH(t,e,n,r){r.debug;var i=mH({},n);return t&&Fp(t)==="object"&&Object.keys(t).forEach(function(s){s!=="_persist"&&e[s]===n[s]&&(i[s]=t[s])}),i}function _H(t){var e=t.blacklist||null,n=t.whitelist||null,r=t.transforms||[],i=t.throttle||0,s="".concat(t.keyPrefix!==void 0?t.keyPrefix:Mb).concat(t.key),o=t.storage,a;t.serialize===!1?a=function(E){return E}:typeof t.serialize=="function"?a=t.serialize:a=wH;var l=t.writeFailHandler||null,u={},c={},h=[],d=null,f=null,p=function(E){Object.keys(E).forEach(function(T){!m(T)||u[T]!==E[T]&&h.indexOf(T)===-1&&h.push(T)}),Object.keys(u).forEach(function(T){E[T]===void 0&&m(T)&&h.indexOf(T)===-1&&u[T]!==void 0&&h.push(T)}),d===null&&(d=setInterval(g,i)),u=E};function g(){if(h.length===0){d&&clearInterval(d),d=null;return}var _=h.shift(),E=r.reduce(function(T,C){return C.in(T,_,u)},u[_]);if(E!==void 0)try{c[_]=a(E)}catch(T){console.error("redux-persist/createPersistoid: error serializing state",T)}else delete c[_];h.length===0&&w()}function w(){Object.keys(c).forEach(function(_){u[_]===void 0&&delete c[_]}),f=o.setItem(s,a(c)).catch(y)}function m(_){return!(n&&n.indexOf(_)===-1&&_!=="_persist"||e&&e.indexOf(_)!==-1)}function y(_){l&&l(_)}var v=function(){for(;h.length!==0;)g();return f||Promise.resolve()};return{update:p,flush:v}}function wH(t){return JSON.stringify(t)}function EH(t){var e=t.transforms||[],n="".concat(t.keyPrefix!==void 0?t.keyPrefix:Mb).concat(t.key),r=t.storage;t.debug;var i;return t.deserialize===!1?i=function(o){return o}:typeof t.deserialize=="function"?i=t.deserialize:i=SH,r.getItem(n).then(function(s){if(s)try{var o={},a=i(s);return Object.keys(a).forEach(function(l){o[l]=e.reduceRight(function(u,c){return c.out(u,l,a)},i(a[l]))}),o}catch(l){throw l}else return})}function SH(t){return JSON.parse(t)}function bH(t){var e=t.storage,n="".concat(t.keyPrefix!==void 0?t.keyPrefix:Mb).concat(t.key);return e.removeItem(n,TH)}function TH(t){}function Hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hk(n,!0).forEach(function(r){IH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hk(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CH(t,e){if(t==null)return{};var n=kH(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function kH(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var AH=5e3;function RH(t,e){var n=t.version!==void 0?t.version:gH;t.debug;var r=t.stateReconciler===void 0?vH:t.stateReconciler,i=t.getStoredState||EH,s=t.timeout!==void 0?t.timeout:AH,o=null,a=!1,l=!0,u=function(h){return h._persist.rehydrated&&o&&!l&&o.update(h),h};return function(c,h){var d=c||{},f=d._persist,p=CH(d,["_persist"]),g=p;if(h.type===Ub){var w=!1,m=function(k,z){w||(h.rehydrate(t.key,k,z),w=!0)};if(s&&setTimeout(function(){!w&&m(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(t.key,'"')))},s),l=!1,o||(o=_H(t)),f)return ki({},e(g,h),{_persist:f});if(typeof h.rehydrate!="function"||typeof h.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return h.register(t.key),i(t).then(function(C){var k=t.migrate||function(z,W){return Promise.resolve(z)};k(C,n).then(function(z){m(z)},function(z){m(void 0,z)})},function(C){m(void 0,C)}),ki({},e(g,h),{_persist:{version:n,rehydrated:!1}})}else{if(h.type===jb)return a=!0,h.result(bH(t)),ki({},e(g,h),{_persist:f});if(h.type===Fb)return h.result(o&&o.flush()),ki({},e(g,h),{_persist:f});if(h.type===Lb)l=!0;else if(h.type===_y){if(a)return ki({},g,{_persist:ki({},f,{rehydrated:!0})});if(h.key===t.key){var y=e(g,h),v=h.payload,_=r!==!1&&v!==void 0?r(v,c,y,t):y,E=ki({},_,{_persist:ki({},f,{rehydrated:!0})});return u(E)}}}if(!f)return e(c,h);var T=e(g,h);return T===g?c:u(ki({},T,{_persist:f}))}}function Kk(t){return PH(t)||NH(t)||xH()}function xH(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function NH(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function PH(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function Gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gk(n,!0).forEach(function(r){OH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gk(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A$={registry:[],bootstrapped:!1},DH=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A$,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Vb:return z0({},e,{registry:[].concat(Kk(e.registry),[n.key])});case _y:var r=e.registry.indexOf(n.key),i=Kk(e.registry);return i.splice(r,1),z0({},e,{registry:i,bootstrapped:i.length===0});default:return e}};function $H(t,e,n){var r=n||!1,i=Db(DH,A$,e&&e.enhancer?e.enhancer:void 0),s=function(u){i.dispatch({type:Vb,key:u})},o=function(u,c,h){var d={type:_y,payload:c,err:h,key:u};t.dispatch(d),i.dispatch(d),r&&a.getState().bootstrapped&&(r(),r=!1)},a=z0({},i,{purge:function(){var u=[];return t.dispatch({type:jb,result:function(h){u.push(h)}}),Promise.all(u)},flush:function(){var u=[];return t.dispatch({type:Fb,result:function(h){u.push(h)}}),Promise.all(u)},pause:function(){t.dispatch({type:Lb})},persist:function(){t.dispatch({type:Ub,register:s,rehydrate:o})}});return e&&e.manualPersist||a.persist(),a}var Bb={},zb={};zb.__esModule=!0;zb.default=LH;function Lp(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lp=function(n){return typeof n}:Lp=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Lp(t)}function M_(){}var MH={getItem:M_,setItem:M_,removeItem:M_};function FH(t){if((typeof self>"u"?"undefined":Lp(self))!=="object"||!(t in self))return!1;try{var e=self[t],n="redux-persist ".concat(t," test");e.setItem(n,"test"),e.getItem(n),e.removeItem(n)}catch{return!1}return!0}function LH(t){var e="".concat(t,"Storage");return FH(e)?self[e]:MH}Bb.__esModule=!0;Bb.default=VH;var UH=jH(zb);function jH(t){return t&&t.__esModule?t:{default:t}}function VH(t){var e=(0,UH.default)(t);return{getItem:function(r){return new Promise(function(i,s){i(e.getItem(r))})},setItem:function(r,i){return new Promise(function(s,o){s(e.setItem(r,i))})},removeItem:function(r){return new Promise(function(i,s){i(e.removeItem(r))})}}}var R$=void 0,BH=zH(Bb);function zH(t){return t&&t.__esModule?t:{default:t}}var qH=(0,BH.default)("local");R$=qH;const WH=w$({user:hH,statuses:pH}),HH={key:"root",storage:R$,blacklist:["statuses"]},KH=RH(HH,WH),x$=sH({reducer:KH,middleware:t=>t({serializableCheck:{ignoredActions:[Fb,_y,Lb,Ub,jb,Vb]}})}),GH=$H(x$);var Qo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qo||(Qo={}));var Qk=function(t){return t},Yk="beforeunload",QH="popstate";function YH(t){t===void 0&&(t={});var e=t,n=e.window,r=n===void 0?document.defaultView:n,i=r.history;function s(){var C=r.location,k=C.pathname,z=C.search,W=C.hash,le=i.state||{};return[le.idx,Qk({pathname:k,search:z,hash:W,state:le.usr||null,key:le.key||"default"})]}var o=null;function a(){if(o)f.call(o),o=null;else{var C=Qo.Pop,k=s(),z=k[0],W=k[1];if(f.length){if(z!=null){var le=c-z;le&&(o={action:C,location:W,retry:function(){E(le*-1)}},E(le))}}else y(C)}}r.addEventListener(QH,a);var l=Qo.Pop,u=s(),c=u[0],h=u[1],d=Jk(),f=Jk();c==null&&(c=0,i.replaceState(wg({},i.state,{idx:c}),""));function p(C){return typeof C=="string"?C:q0(C)}function g(C,k){return k===void 0&&(k=null),Qk(wg({pathname:h.pathname,hash:"",search:""},typeof C=="string"?Wa(C):C,{state:k,key:XH()}))}function w(C,k){return[{usr:C.state,key:C.key,idx:k},p(C)]}function m(C,k,z){return!f.length||(f.call({action:C,location:k,retry:z}),!1)}function y(C){l=C;var k=s();c=k[0],h=k[1],d.call({action:l,location:h})}function v(C,k){var z=Qo.Push,W=g(C,k);function le(){v(C,k)}if(m(z,W,le)){var gt=w(W,c+1),ar=gt[0],Ii=gt[1];try{i.pushState(ar,"",Ii)}catch{r.location.assign(Ii)}y(z)}}function _(C,k){var z=Qo.Replace,W=g(C,k);function le(){_(C,k)}if(m(z,W,le)){var gt=w(W,c),ar=gt[0],Ii=gt[1];i.replaceState(ar,"",Ii),y(z)}}function E(C){i.go(C)}var T={get action(){return l},get location(){return h},createHref:p,push:v,replace:_,go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(k){return d.push(k)},block:function(k){var z=f.push(k);return f.length===1&&r.addEventListener(Yk,Xk),function(){z(),f.length||r.removeEventListener(Yk,Xk)}}};return T}function Xk(t){t.preventDefault(),t.returnValue=""}function Jk(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter(function(r){return r!==n})}},call:function(n){t.forEach(function(r){return r&&r(n)})}}}function XH(){return Math.random().toString(36).substr(2,8)}function q0(t){var e=t.pathname,n=e===void 0?"/":e,r=t.search,i=r===void 0?"":r,s=t.hash,o=s===void 0?"":s;return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Wa(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qb=A.exports.createContext(null),Wb=A.exports.createContext(null),jd=A.exports.createContext({outlet:null,matches:[]});function zr(t,e){if(!t)throw new Error(e)}function JH(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Wa(e):e,i=O$(r.pathname||"/",n);if(i==null)return null;let s=N$(t);ZH(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=lK(s[a],i);return o}function N$(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((i,s)=>{let o={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||zr(!1),o.relativePath=o.relativePath.slice(r.length));let a=Ls([r,o.relativePath]),l=n.concat(o);i.children&&i.children.length>0&&(i.index===!0&&zr(!1),N$(i.children,e,l,a)),!(i.path==null&&!i.index)&&e.push({path:a,score:oK(a,i.index),routesMeta:l})}),e}function ZH(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aK(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const eK=/^:\w+$/,tK=3,nK=2,rK=1,iK=10,sK=-2,Zk=t=>t==="*";function oK(t,e){let n=t.split("/"),r=n.length;return n.some(Zk)&&(r+=sK),e&&(r+=nK),n.filter(i=>!Zk(i)).reduce((i,s)=>i+(eK.test(s)?tK:s===""?rK:iK),r)}function aK(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function lK(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=uK({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;s.push({params:r,pathname:Ls([i,c.pathname]),pathnameBase:D$(Ls([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=Ls([i,c.pathnameBase]))}return s}function uK(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cK(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{if(c==="*"){let d=a[h]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return u[c]=hK(a[h]||""),u},{}),pathname:s,pathnameBase:o,pattern:t}}function cK(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(i,e?void 0:"i"),r]}function hK(t,e){try{return decodeURIComponent(t)}catch{return t}}function dK(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wa(t):t;return{pathname:n?n.startsWith("/")?n:fK(n,e):e,search:gK(r),hash:mK(i)}}function fK(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function P$(t,e,n){let r=typeof t=="string"?Wa(t):t,i=t===""||r.pathname===""?"/":r.pathname,s;if(i==null)s=n;else{let a=e.length-1;if(i.startsWith("..")){let l=i.split("/");for(;l[0]==="..";)l.shift(),a-=1;r.pathname=l.join("/")}s=a>=0?e[a]:"/"}let o=dK(r,s);return i&&i!=="/"&&i.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function pK(t){return t===""||t.pathname===""?"/":typeof t=="string"?Wa(t).pathname:t.pathname}function O$(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=t.charAt(e.length);return n&&n!=="/"?null:t.slice(e.length)||"/"}const Ls=t=>t.join("/").replace(/\/\/+/g,"/"),D$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gK=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mK=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yK(t){Fu()||zr(!1);let{basename:e,navigator:n}=A.exports.useContext(qb),{hash:r,pathname:i,search:s}=$$(t),o=i;if(e!=="/"){let a=pK(t),l=a!=null&&a.endsWith("/");o=i==="/"?e+(l?"/":""):Ls([e,i])}return n.createHref({pathname:o,search:s,hash:r})}function Fu(){return A.exports.useContext(Wb)!=null}function Vd(){return Fu()||zr(!1),A.exports.useContext(Wb).location}function wy(){Fu()||zr(!1);let{basename:t,navigator:e}=A.exports.useContext(qb),{matches:n}=A.exports.useContext(jd),{pathname:r}=Vd(),i=JSON.stringify(n.map(a=>a.pathnameBase)),s=A.exports.useRef(!1);return A.exports.useEffect(()=>{s.current=!0}),A.exports.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let u=P$(a,JSON.parse(i),r);t!=="/"&&(u.pathname=Ls([t,u.pathname])),(l.replace?e.replace:e.push)(u,l.state)},[t,e,i,r])}const vK=A.exports.createContext(null);function _K(t){let e=A.exports.useContext(jd).outlet;return e&&A.exports.createElement(vK.Provider,{value:t},e)}function $$(t){let{matches:e}=A.exports.useContext(jd),{pathname:n}=Vd(),r=JSON.stringify(e.map(i=>i.pathnameBase));return A.exports.useMemo(()=>P$(t,JSON.parse(r),n),[t,r,n])}function wK(t,e){Fu()||zr(!1);let{matches:n}=A.exports.useContext(jd),r=n[n.length-1],i=r?r.params:{};r&&r.pathname;let s=r?r.pathnameBase:"/";r&&r.route;let o=Vd(),a;if(e){var l;let d=typeof e=="string"?Wa(e):e;s==="/"||((l=d.pathname)==null?void 0:l.startsWith(s))||zr(!1),a=d}else a=o;let u=a.pathname||"/",c=s==="/"?u:u.slice(s.length)||"/",h=JH(t,{pathname:c});return EK(h&&h.map(d=>Object.assign({},d,{params:Object.assign({},i,d.params),pathname:Ls([s,d.pathname]),pathnameBase:d.pathnameBase==="/"?s:Ls([s,d.pathnameBase])})),n)}function EK(t,e){return e===void 0&&(e=[]),t==null?null:t.reduceRight((n,r,i)=>A.exports.createElement(jd.Provider,{children:r.route.element!==void 0?r.route.element:n,value:{outlet:n,matches:e.concat(t.slice(0,i+1))}}),null)}function SK(t){let{to:e,replace:n,state:r}=t;Fu()||zr(!1);let i=wy();return A.exports.useEffect(()=>{i(e,{replace:n,state:r})}),null}function bK(t){return _K(t.context)}function Bc(t){zr(!1)}function TK(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Qo.Pop,navigator:s,static:o=!1}=t;Fu()&&zr(!1);let a=D$(e),l=A.exports.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Wa(r));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=r,p=A.exports.useMemo(()=>{let g=O$(u,a);return g==null?null:{pathname:g,search:c,hash:h,state:d,key:f}},[a,u,c,h,d,f]);return p==null?null:A.exports.createElement(qb.Provider,{value:l},A.exports.createElement(Wb.Provider,{children:n,value:{location:p,navigationType:i}}))}function IK(t){let{children:e,location:n}=t;return wK(W0(e),n)}function W0(t){let e=[];return A.exports.Children.forEach(t,n=>{if(!A.exports.isValidElement(n))return;if(n.type===A.exports.Fragment){e.push.apply(e,W0(n.props.children));return}n.type!==Bc&&zr(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=W0(n.props.children)),e.push(r)}),e}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H0(){return H0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H0.apply(this,arguments)}function CK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const kK=["onClick","reloadDocument","replace","state","target","to"];function AK(t){let{basename:e,children:n,window:r}=t,i=A.exports.useRef();i.current==null&&(i.current=YH({window:r}));let s=i.current,[o,a]=A.exports.useState({action:s.action,location:s.location});return A.exports.useLayoutEffect(()=>s.listen(a),[s]),A.exports.createElement(TK,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}function RK(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Ey=A.exports.forwardRef(function(e,n){let{onClick:r,reloadDocument:i,replace:s=!1,state:o,target:a,to:l}=e,u=CK(e,kK),c=yK(l),h=xK(l,{replace:s,state:o,target:a});function d(f){r&&r(f),!f.defaultPrevented&&!i&&h(f)}return A.exports.createElement("a",H0({},u,{href:c,onClick:d,ref:n,target:a}))});function xK(t,e){let{target:n,replace:r,state:i}=e===void 0?{}:e,s=wy(),o=Vd(),a=$$(t);return A.exports.useCallback(l=>{if(l.button===0&&(!n||n==="_self")&&!RK(l)){l.preventDefault();let u=!!r||q0(o)===q0(a);s(t,{replace:u,state:i})}},[o,s,a,r,i,n,t])}var Rn=(t=>(t.index="/",t.auth="/auth",t.register="/register",t.error404="*",t))(Rn||{}),rh=(t=>(t.userNotFound="auth/user-not-found",t.wrongPassword="auth/wrong-password",t.emailAlreadyInUse="auth/email-already-in-use",t.tooManyRequests="auth/too-many-requests",t))(rh||{}),M$=(t=>(t.isDomReady="is-dom-ready",t))(M$||{}),F$={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(!!s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(o==="object")if(s.toString===Object.prototype.toString)for(var l in s)e.call(s,l)&&s[l]&&r.push(l);else r.push(s.toString())}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(F$);const Qt=F$.exports,Hb=t=>{const{className:e,children:n}=t;return R("div",{className:Qt(e,"container"),children:n})},NK=t=>{const{className:e,children:n}=t;return R("main",{className:Qt(e,"content"),children:R(Hb,{className:"content__body",children:n})})},Kb=RW,L$=sW,U$=()=>{const{email:t,token:e,id:n}=L$(r=>r.user);return{isAuth:!!t,email:t,token:e,id:n}},PK=t=>{const{className:e}=t;return Ve(Ey,{className:Qt(e,"logo"),to:Rn.index,title:"Home page",children:["Fancy",R("br",{}),"Auth",R("br",{}),"Form"]})},OK=t=>{const{className:e,name:n}=t;return R("svg",{className:Qt(e,"svg-icon"),children:R("use",{href:`#icon-${n}`})})},DK=(t=1e3)=>new Promise(e=>{setTimeout(e,t)}),kg=t=>{const{className:e,type:n="button",href:r="",title:i,ariaLabel:s,icon:o,iconPosition:a="after",children:l,onClick:u}=t,[c,h]=A.exports.useState(!1),[d,f]=A.exports.useState(!1),[p,g]=A.exports.useState({x:0,y:0}),w=Boolean(r),m=C=>{h(!1),f(!1),DK(1).then(()=>{g(C),f(!0)})},y=A.exports.useMemo(()=>o?R(OK,{className:"button__icon",name:o}):null,[o]),v=A.exports.useMemo(()=>Ve("span",{className:"button__body",children:[o&&a==="before"&&y,l&&R("span",{className:"button__label",children:l}),o&&a==="after"&&y]}),[y,a,l]),_=A.exports.useCallback(C=>{const{offsetX:k,offsetY:z,target:W}=C.nativeEvent;m({x:k||W.offsetLeft/2,y:z||W.offsetHeight/2}),u==null||u(C)},[u]),E=()=>{h(!0)},T={className:Qt(e,"button",{"is-ripple":d,"is-animation-end":c}),style:{"--rippleOffsetX":`${p.x}px`,"--rippleOffsetY":`${p.y}px`},title:i,["aria-label"]:s,onClick:_,onAnimationEnd:E};return w?R(Ey,{...T,to:r,children:v}):R("button",{...T,type:n,children:v})},$K=t=>{const{className:e,name:n,imgSrc:r="images/user.svg"}=t,i=Kb(),s=()=>{i(cH()),i(Go({label:"Logged out of your account."}))};return Ve("div",{className:Qt(e,"user-panel"),children:[R("div",{className:"user-panel__name",title:n,children:n}),R("div",{className:"user-panel__image-wrapper",children:R("img",{className:"user-panel__image",src:r,alt:"Avatar",width:"50",height:"50",loading:"lazy"})}),R(kg,{className:"user-panel__sign-out-button",type:"button",icon:"sign-out",title:"Sign Out",ariaLabel:"Sign Out",onClick:s})]})},MK=t=>{const{className:e}=t,{isAuth:n,email:r}=U$(),{pathname:i}=Vd(),s=i!==Rn.auth,o=i!==Rn.register;return R("header",{className:Qt(e,"header"),children:Ve(Hb,{className:"header__inner",children:[R(PK,{className:"header__logo"}),n&&r?R($K,{className:"header__user-panel",name:r}):Ve("div",{className:"header__actions",children:[s&&R(kg,{className:"header__button",href:Rn.auth,icon:"sign-in",children:"Sign In"}),o&&R(kg,{className:"header__button",href:Rn.register,icon:"sign-up",children:"Sign Up"})]})]})})},FK=t=>{const{className:e}=t;return R("footer",{className:Qt(e,"footer"),children:R(Hb,{className:"footer__inner",children:Ve("a",{className:"footer__copyright-link",href:"https://aleksanderlamkov.ru/",target:"_blank",children:["\xA9 Alexander Lamkov, ",new Date().getFullYear()]})})})},LK=()=>{const t=L$(fH);if(!t.length)return null;const e=({target:n})=>{n.remove()};return R("div",{className:"status-bar",children:R("ul",{className:"status-bar__list",children:t.map(({label:n,expirationTimeMS:r},i)=>R("li",{className:"status-bar__item",children:R("div",{className:"status-bar__label",style:{"--expirationTimeMS":`${r}ms`},onAnimationEnd:e,children:n})},i))})})},UK=()=>Ve(qa,{children:[R(MK,{}),R(NK,{children:R(bK,{})}),R(FK,{}),R(LK,{})]}),jK=t=>{const{children:e}=t,{isAuth:n}=U$();return n?e:R(SK,{to:Rn.auth})},Gb=t=>{const{className:e,children:n}=t;return R("h1",{className:Qt(e,"page-title"),children:n})},VK=()=>Ve(qa,{children:[R(Gb,{children:"Home page"}),R("p",{children:"The following libraries and technologies were used to create this application:"}),Ve("ul",{children:[R("li",{children:R("a",{href:"https://vitejs.dev/",target:"_blank",title:"Go to an external website",children:"Vite"})}),R("li",{children:R("a",{href:"https://www.typescriptlang.org/",target:"_blank",title:"Go to an external website",children:"TypeScript"})}),R("li",{children:R("a",{href:"https://reactjs.org/",target:"_blank",title:"Go to an external website",children:"React"})}),R("li",{children:R("a",{href:"https://reactrouter.com/en/main",target:"_blank",title:"Go to an external website",children:"React Router"})}),Ve("li",{children:[R("a",{href:"https://redux.js.org/",target:"_blank",title:"Go to an external website",children:"Redux"})," + ",R("a",{href:"https://redux-toolkit.js.org/",target:"_blank",title:"Go to an external website",children:"Redux Toolkit"})," + ",R("a",{href:"https://github.com/rt2zz/redux-persist",target:"_blank",title:"Go to an external website",children:"Redux Persist"})]}),Ve("li",{children:[R("a",{href:"https://formik.org/",target:"_blank",title:"Go to an external website",children:"Formik"})," + ",R("a",{href:"https://github.com/jquense/yup",target:"_blank",title:"Go to an external website",children:"Yup"})]}),R("li",{children:R("a",{href:"https://firebase.google.com/",target:"_blank",title:"Go to an external website",children:"Firebase"})}),R("li",{children:R("a",{href:"https://github.com/JedWatson/classnames",target:"_blank",title:"Go to an external website",children:"ClassNames"})}),Ve("li",{children:["A few favorite must-have ",R("a",{href:"https://postcss.org/",target:"_blank",title:"Go to an external website",children:"PostCSS"})," plugins"]}),Ve("li",{children:["A small ",R("a",{href:"https://github.com/vbenjs/vite-plugin-svg-icons",target:"_blank",title:"Go to an external website",children:"plugin"})," for SVG icons"]})]})]});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw Lu(e)},Lu=function(t){return new Error("Firebase Database ("+j$.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Sy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(V$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw Error();const d=s<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const p=u<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},B$=function(t){const e=V$(t);return Sy.encodeByteArray(e,!0)},Ag=function(t){return B$(t).replace(/\./g,"")},K0=function(t){try{return Sy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zK(t){return qh(void 0,t)}function qh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qK(n)||(t[n]=qh(t[n],e[n]));return t}function qK(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ag(JSON.stringify(n)),Ag(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function by(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Yb(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WK(){return typeof self=="object"&&self.self===self}function Bd(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HK(){return Oe().indexOf("Electron/")>=0}function Xb(){const t=Oe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KK(){return Oe().indexOf("MSAppHost/")>=0}function z$(){return j$.NODE_ADMIN===!0}function GK(){return!Yb()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ln(){return typeof indexedDB=="object"}function qd(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Ty(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}function QK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK="FirebaseError";class We extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YK,Object.setPrototypeOf(this,We.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bn.prototype.create)}}class bn{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?XK(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new We(i,a,r)}}function XK(t,e){return t.replace(JK,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const JK=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){return JSON.parse(t)}function ht(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Wh(K0(s[0])||""),n=Wh(K0(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},ZK=function(t){const e=Jb(t).claims;return typeof e=="object"&&e.hasOwnProperty("iat")?e.iat:null},eG=function(t){const e=Jb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tG=function(t){const e=Jb(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ma(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Rg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xg(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ng(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(eA(s)&&eA(o)){if(!Ng(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function eA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function zc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,c;for(let h=0;h<80;h++){h<40?h<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):h<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const d=(i<<5|i>>>27)+u+l+c+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function q$(t,e){const n=new rG(t,e);return n.subscribe.bind(n)}class rG{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iG(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=F_),i.error===void 0&&(i.error=F_),i.complete===void 0&&(i.complete=F_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iG(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function F_(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Mn(t,e){return`${t} failed: ${e} argument `}function wt(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Mn(t,e)+"must be a valid function.")}function tA(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Mn(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,$(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Iy=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG=1e3,lG=2,uG=4*60*60*1e3,cG=.5;function Pg(t,e=aG,n=lG){const r=e*Math.pow(n,t),i=Math.round(cG*r*(Math.random()-.5)*2);return Math.min(uG,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t){return t&&t._delegate?t._delegate:t}class fe{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ct;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dG(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hG(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hG(t){return t===Oo?void 0:t}function dG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new W$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=[];var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const K$={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},fG=ne.INFO,pG={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},gG=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=pG[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Si{constructor(e){this.name=e,this._logLevel=fG,this._logHandler=gG,this._userLogHandler=null,Zb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}function mG(t){Zb.forEach(e=>{e.setLogLevel(t)})}function yG(t,e){for(const n of Zb){let r=null;e&&e.level&&(r=K$[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:ne[s].toLowerCase(),message:a,args:o,type:i.name})}}}const vG=(t,e)=>e.some(n=>t instanceof n);let nA,rA;function _G(){return nA||(nA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wG(){return rA||(rA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G$=new WeakMap,G0=new WeakMap,Q$=new WeakMap,L_=new WeakMap,eT=new WeakMap;function EG(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ji(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&G$.set(n,t)}).catch(()=>{}),eT.set(e,t),e}function SG(t){if(G0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});G0.set(t,e)}let Q0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return G0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bG(t){Q0=t(Q0)}function TG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(U_(this),e,...n);return Q$.set(r,e.sort?e.sort():[e]),ji(r)}:wG().includes(t)?function(...e){return t.apply(U_(this),e),ji(G$.get(this))}:function(...e){return ji(t.apply(U_(this),e))}}function IG(t){return typeof t=="function"?TG(t):(t instanceof IDBTransaction&&SG(t),vG(t,_G())?new Proxy(t,Q0):t)}function ji(t){if(t instanceof IDBRequest)return EG(t);if(L_.has(t))return L_.get(t);const e=IG(t);return e!==t&&(L_.set(t,e),eT.set(e,t)),e}const U_=t=>eT.get(t);function Uu(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ji(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ji(o.result),l.oldVersion,l.newVersion,ji(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function ql(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),ji(n).then(()=>{})}const CG=["get","getKey","getAll","getAllKeys","count"],kG=["put","add","delete","clear"],j_=new Map;function iA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(j_.get(e))return j_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=kG.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CG.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return j_.set(e,s),s}bG(t=>({...t,get:(e,n,r)=>iA(e,n)||t.get(e,n,r),has:(e,n)=>!!iA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RG(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RG(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Y0="@firebase/app",sA="0.7.31";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Si("@firebase/app"),xG="@firebase/app-compat",NG="@firebase/analytics-compat",PG="@firebase/analytics",OG="@firebase/app-check-compat",DG="@firebase/app-check",$G="@firebase/auth",MG="@firebase/auth-compat",FG="@firebase/database",LG="@firebase/database-compat",UG="@firebase/functions",jG="@firebase/functions-compat",VG="@firebase/installations",BG="@firebase/installations-compat",zG="@firebase/messaging",qG="@firebase/messaging-compat",WG="@firebase/performance",HG="@firebase/performance-compat",KG="@firebase/remote-config",GG="@firebase/remote-config-compat",QG="@firebase/storage",YG="@firebase/storage-compat",XG="@firebase/firestore",JG="@firebase/firestore-compat",ZG="firebase",e6="9.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]",t6={[Y0]:"fire-core",[xG]:"fire-core-compat",[PG]:"fire-analytics",[NG]:"fire-analytics-compat",[DG]:"fire-app-check",[OG]:"fire-app-check-compat",[$G]:"fire-auth",[MG]:"fire-auth-compat",[FG]:"fire-rtdb",[LG]:"fire-rtdb-compat",[UG]:"fire-fn",[jG]:"fire-fn-compat",[VG]:"fire-iid",[BG]:"fire-iid-compat",[zG]:"fire-fcm",[qG]:"fire-fcm-compat",[WG]:"fire-perf",[HG]:"fire-perf-compat",[KG]:"fire-rc",[GG]:"fire-rc-compat",[QG]:"fire-gcs",[YG]:"fire-gcs-compat",[XG]:"fire-fst",[JG]:"fire-fst-compat","fire-js":"fire-js",[ZG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Map,Hh=new Map;function Og(t,e){try{t.container.addComponent(e)}catch(n){ya.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Y$(t,e){t.container.addOrOverwriteComponent(e)}function Ye(t){const e=t.name;if(Hh.has(e))return ya.debug(`There were multiple attempts to register component ${e}.`),!1;Hh.set(e,t);for(const n of Qs.values())Og(n,t);return!0}function rs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function n6(t,e,n=va){rs(t,e).clearInstance(n)}function r6(){Hh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ys=new bn("app","Firebase",i6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=e6;function tT(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:va,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw Ys.create("bad-app-name",{appName:String(r)});const i=Qs.get(r);if(i){if(Ng(t,i.options)&&Ng(n,i.config))return i;throw Ys.create("duplicate-app",{appName:r})}const s=new H$(r);for(const a of Hh.values())s.addComponent(a);const o=new s6(t,n,s);return Qs.set(r,o),o}function nT(t=va){const e=Qs.get(t);if(!e)throw Ys.create("no-app",{appName:t});return e}function o6(){return Array.from(Qs.values())}async function X$(t){const e=t.name;Qs.has(e)&&(Qs.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function we(t,e,n){var r;let i=(r=t6[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ya.warn(a.join(" "));return}Ye(new fe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function J$(t,e){if(t!==null&&typeof t!="function")throw Ys.create("invalid-log-argument");yG(t,e)}function Z$(t){mG(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="firebase-heartbeat-database",l6=1,Kh="firebase-heartbeat-store";let V_=null;function eM(){return V_||(V_=Uu(a6,l6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Kh)}}}).catch(t=>{throw Ys.create("idb-open",{originalErrorMessage:t.message})})),V_}async function u6(t){var e;try{return(await eM()).transaction(Kh).objectStore(Kh).get(tM(t))}catch(n){if(n instanceof We)ya.warn(n.message);else{const r=Ys.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});ya.warn(r.message)}}}async function oA(t,e){var n;try{const i=(await eM()).transaction(Kh,"readwrite");return await i.objectStore(Kh).put(e,tM(t)),i.done}catch(r){if(r instanceof We)ya.warn(r.message);else{const i=Ys.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});ya.warn(i.message)}}}function tM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=1024,h6=30*24*60*60*1e3;class d6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=aA();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=h6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=aA(),{heartbeatsToSend:n,unsentEntries:r}=f6(this._heartbeatsCache.heartbeats),i=Ag(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function aA(){return new Date().toISOString().substring(0,10)}function f6(t,e=c6){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),lA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class p6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ln()?qd().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await u6(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return oA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return oA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function lA(t){return Ag(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(t){Ye(new fe("platform-logger",e=>new AG(e),"PRIVATE")),Ye(new fe("heartbeat",e=>new d6(e),"PRIVATE")),we(Y0,sA,t),we(Y0,sA,"esm2017"),we("fire-js","")}g6("");const m6=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:bi,_DEFAULT_ENTRY_NAME:va,_addComponent:Og,_addOrOverwriteComponent:Y$,_apps:Qs,_clearComponents:r6,_components:Hh,_getProvider:rs,_registerComponent:Ye,_removeServiceInstance:n6,deleteApp:X$,getApp:nT,getApps:o6,initializeApp:tT,onLog:J$,registerVersion:we,setLogLevel:Z$,FirebaseError:We},Symbol.toStringTag,{value:"Module"}));function rT(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const wc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},dl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function nM(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v6=y6,_6=nM,rM=new bn("auth","Firebase",nM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Si("@firebase/auth");function Up(t,...e){uA.logLevel<=ne.ERROR&&uA.error(`Auth (${bi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,...e){throw iT(t,...e)}function qt(t,...e){return iT(t,...e)}function iM(t,e,n){const r=Object.assign(Object.assign({},_6()),{[e]:n});return new bn("auth","Firebase",r).create(e,{appName:t.name})}function ju(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&At(t,"argument-error"),iM(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rM.create(t,...e)}function D(t,e,...n){if(!t)throw iT(e,...n)}function ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Up(e),new Error(e)}function qr(t,e){t||ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new Map;function Wn(t){qr(t instanceof Function,"Expected a class definition");let e=cA.get(t);return e?(qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cA.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t,e){const n=rs(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ng(s,e!=null?e:{}))return i;At(i,"already-initialized")}return n.initialize({options:e})}function E6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sT(){return hA()==="http:"||hA()==="https:"}function hA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sT()||Bd()||"connection"in navigator)?navigator.onLine:!0}function b6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){this.shortDelay=e,this.longDelay=n,qr(n>e,"Short delay should be less than long delay!"),this.isMobile=by()||zd()}get(){return S6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t,e){qr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new Wd(3e4,6e4);function pt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Dt(t,e,n,r,i={}){return oM(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ha(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),sM.fetch()(aM(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function oM(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},T6),e);try{const i=new C6(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw qc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw qc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw qc(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw iM(t,c,u);At(t,c)}}catch(i){if(i instanceof We)throw i;At(t,"network-request-failed")}}async function is(t,e,n,r,i={}){const s=await Dt(t,e,n,r,i);return"mfaPendingCredential"in s&&At(t,"multi-factor-auth-required",{_serverResponse:s}),s}function aM(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?oT(t.config,i):`${t.config.apiScheme}://${i}`}class C6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qt(this.auth,"network-request-failed")),I6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(t,e){return Dt(t,"POST","/v1/accounts:delete",e)}async function A6(t,e){return Dt(t,"POST","/v1/accounts:update",e)}async function R6(t,e){return Dt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x6(t,e=!1){const n=N(t),r=await n.getIdToken(e),i=Cy(r);D(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ih(B_(i.auth_time)),issuedAtTime:ih(B_(i.iat)),expirationTime:ih(B_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function B_(t){return Number(t)*1e3}function Cy(t){var e;const[n,r,i]=t.split(".");if(n===void 0||r===void 0||i===void 0)return Up("JWT malformed, contained fewer than 3 sections"),null;try{const s=K0(r);return s?JSON.parse(s):(Up("Failed to decode base64 JWT payload"),null)}catch(s){return Up("Caught error parsing JWT payload as JSON",(e=s)===null||e===void 0?void 0:e.toString()),null}}function N6(t){const e=Cy(t);return D(e,"internal-error"),D(typeof e.exp<"u","internal-error"),D(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof We&&P6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function P6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(n){((e=n)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ih(this.lastLoginAt),this.creationTime=ih(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xi(t,R6(n,{idToken:r}));D(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?M6(s.providerUserInfo):[],a=$6(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new lM(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function D6(t){const e=N(t);await Qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $6(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function M6(t){return t.map(e=>{var{providerId:n}=e,r=rT(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(t,e){const n=await oM(t,{},async()=>{const r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=aM(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sM.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){D(e.idToken,"internal-error"),D(typeof e.idToken<"u","internal-error"),D(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N6(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return D(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await F6(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Yh;return r&&(D(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(D(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(D(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yh,this.toJSON())}_performRefresh(){return ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){D(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=rT(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new O6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lM(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xi(this,this.stsTokenManager.getToken(this.auth,e));return D(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return x6(this,e)}reload(){return D6(this)}_assign(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new sa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Xi(this,k6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:v,emailVerified:_,isAnonymous:E,providerData:T,stsTokenManager:C}=n;D(v&&C,e,"internal-error");const k=Yh.fromJSON(this.name,C);D(typeof v=="string",e,"internal-error"),fs(h,e.name),fs(d,e.name),D(typeof _=="boolean",e,"internal-error"),D(typeof E=="boolean",e,"internal-error"),fs(f,e.name),fs(p,e.name),fs(g,e.name),fs(w,e.name),fs(m,e.name),fs(y,e.name);const z=new sa({uid:v,auth:e,email:d,emailVerified:_,displayName:h,isAnonymous:E,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:k,createdAt:m,lastLoginAt:y});return T&&Array.isArray(T)&&(z.providerData=T.map(W=>Object.assign({},W))),w&&(z._redirectEventId=w),z}static async _fromIdTokenResponse(e,n,r=!1){const i=new Yh;i.updateFromServerResponse(n);const s=new sa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Qh(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uM.type="NONE";const cu=uM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t,e,n){return`firebase:${t}:${e}:${n}`}class Wl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=oa(this.userKey,i.apiKey,s),this.fullPersistenceKey=oa("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wl(Wn(cu),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Wn(cu);const o=oa(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=sa._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Wl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Wl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fM(e))return"Blackberry";if(pM(e))return"Webos";if(aT(e))return"Safari";if((e.includes("chrome/")||hM(e))&&!e.includes("edge/"))return"Chrome";if(Hd(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cM(t=Oe()){return/firefox\//i.test(t)}function aT(t=Oe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hM(t=Oe()){return/crios\//i.test(t)}function dM(t=Oe()){return/iemobile/i.test(t)}function Hd(t=Oe()){return/android/i.test(t)}function fM(t=Oe()){return/blackberry/i.test(t)}function pM(t=Oe()){return/webos/i.test(t)}function Vu(t=Oe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function L6(t=Oe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function U6(t=Oe()){var e;return Vu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function j6(){return Xb()&&document.documentMode===10}function gM(t=Oe()){return Vu(t)||Hd(t)||pM(t)||fM(t)||/windows phone/i.test(t)||dM(t)}function V6(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t,e=[]){let n;switch(t){case"Browser":n=dA(Oe());break;case"Worker":n=`${dA(Oe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){var n;if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(n=i)===null||n===void 0?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fA(this),this.idTokenSubscription=new fA(this),this.beforeStateQueue=new B6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rM,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l==null?void 0:l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return D(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){var n;try{await Qh(e)}catch(r){if(((n=r)===null||n===void 0?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?N(e):null;return n&&D(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&D(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;D(n,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return D(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Rt(t){return N(t)}class fA{constructor(e){this.auth=e,this.observer=null,this.addObserver=q$(n=>this.observer=n)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function q6(t,e,n){const r=Rt(t);D(r._canInitEmulator,r,"emulator-config-failed"),D(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=yM(e),{host:o,port:a}=W6(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||H6()}function yM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function W6(t){const e=yM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:pA(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:pA(o)}}}function pA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function H6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,n){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(t,e){return Dt(t,"POST","/v1/accounts:resetPassword",pt(t,e))}async function _M(t,e){return Dt(t,"POST","/v1/accounts:update",e)}async function K6(t,e){return Dt(t,"POST","/v1/accounts:update",pt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t,e){return is(t,"POST","/v1/accounts:signInWithPassword",pt(t,e))}async function ky(t,e){return Dt(t,"POST","/v1/accounts:sendOobCode",pt(t,e))}async function Q6(t,e){return ky(t,e)}async function Y6(t,e){return ky(t,e)}async function X6(t,e){return ky(t,e)}async function J6(t,e){return ky(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(t,e){return is(t,"POST","/v1/accounts:signInWithEmailLink",pt(t,e))}async function e5(t,e){return is(t,"POST","/v1/accounts:signInWithEmailLink",pt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends Bu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Xh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return G6(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Z6(e,{email:this._email,oobCode:this._password});default:At(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return _M(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return e5(e,{idToken:n,email:this._email,oobCode:this._password});default:At(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(t,e){return is(t,"POST","/v1/accounts:signInWithIdp",pt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5="http://localhost";class gi extends Bu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):At("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=rT(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Vi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vi(e,n)}buildRequest(){const e={requestUri:t5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e){return Dt(t,"POST","/v1/accounts:sendVerificationCode",pt(t,e))}async function r5(t,e){return is(t,"POST","/v1/accounts:signInWithPhoneNumber",pt(t,e))}async function i5(t,e){const n=await is(t,"POST","/v1/accounts:signInWithPhoneNumber",pt(t,e));if(n.temporaryProof)throw qc(t,"account-exists-with-different-credential",n);return n}const s5={USER_NOT_FOUND:"user-not-found"};async function o5(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return is(t,"POST","/v1/accounts:signInWithPhoneNumber",pt(t,n),s5)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Bu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new aa({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new aa({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return r5(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return i5(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return o5(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new aa({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l5(t){const e=Pl(zc(t)).link,n=e?Pl(zc(e)).deep_link_id:null,r=Pl(zc(t)).deep_link_id;return(r?Pl(zc(r)).link:null)||r||n||e||t}class Ay{constructor(e){var n,r,i,s,o,a;const l=Pl(zc(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=a5((i=l.mode)!==null&&i!==void 0?i:null);D(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=l5(e);try{return new Ay(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.providerId=po.PROVIDER_ID}static credential(e,n){return Xh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ay.parseLink(n);return D(r,"argument-error"),Xh._fromEmailAndCode(e,r.code,r.tenantId)}}po.PROVIDER_ID="password";po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Hl extends zu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return D("providerId"in n&&"signInMethod"in n,"argument-error"),gi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return D(e.idToken||e.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Hl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Hl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Hl(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends zu{constructor(){super("facebook.com")}static credential(e){return gi._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gi._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends zu{constructor(){super("github.com")}static credential(e){return gi._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.GITHUB_SIGN_IN_METHOD="github.com";ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="http://localhost";class hu extends Bu{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Vi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new hu(r,s)}static _create(e,n){return new hu(e,n)}buildRequest(){return{requestUri:u5,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="saml.";class Dg extends ss{constructor(e){D(e.startsWith(c5),"argument-error"),super(e)}static credentialFromResult(e){return Dg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Dg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=hu.fromJSON(e);return D(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return hu._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends zu{constructor(){super("twitter.com")}static credential(e,n){return gi._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.TWITTER_SIGN_IN_METHOD="twitter.com";ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(t,e){return is(t,"POST","/v1/accounts:signUp",pt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await sa._fromIdTokenResponse(e,r,i),o=gA(r);return new br({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=gA(r);return new br({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function gA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(t){var e;const n=Rt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new br({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await wM(n,{returnSecureToken:!0}),i=await br._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends We{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$g.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $g(e,n,r,i)}}function EM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$g._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e){const n=N(t);await Ry(!0,n,e);const{providerUserInfo:r}=await A6(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=SM(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function lT(t,e,n=!1){const r=await Xi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return br._forOperation(t,"link",r)}async function Ry(t,e,n){await Qh(e);const r=SM(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";D(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(t,e,n=!1){var r;const{auth:i}=t,s="reauthenticate";try{const o=await Xi(t,EM(i,s,e,t),n);D(o.idToken,i,"internal-error");const a=Cy(o.idToken);D(a,i,"internal-error");const{sub:l}=a;return D(t.uid===l,i,"user-mismatch"),br._forOperation(t,s,o)}catch(o){throw((r=o)===null||r===void 0?void 0:r.code)==="auth/user-not-found"&&At(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(t,e,n=!1){const r="signIn",i=await EM(t,r,e),s=await br._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function xy(t,e){return TM(Rt(t),e)}async function IM(t,e){const n=N(t);return await Ry(!1,n,e.providerId),lT(n,e)}async function CM(t,e){return bM(N(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e){return is(t,"POST","/v1/accounts:signInWithCustomToken",pt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e){const n=Rt(t),r=await f5(n,{token:e,returnSecureToken:!0}),i=await br._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?uT._fromServerResponse(e,n):At(e,"internal-error")}}class uT extends Ny{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new uT(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t,e,n){var r;D(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),D(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(D(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(D(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g5(t,e,n){const r=N(t),i={requestType:"PASSWORD_RESET",email:e};n&&Py(r,i,n),await Y6(r,i)}async function m5(t,e,n){await vM(N(t),{oobCode:e,newPassword:n})}async function y5(t,e){await K6(N(t),{oobCode:e})}async function kM(t,e){const n=N(t),r=await vM(n,{oobCode:e}),i=r.requestType;switch(D(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":D(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":D(r.mfaInfo,n,"internal-error");default:D(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Ny._fromServerResponse(Rt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function v5(t,e){const{data:n}=await kM(N(t),e);return n.email}async function AM(t,e,n){const r=Rt(t),i=await wM(r,{returnSecureToken:!0,email:e,password:n}),s=await br._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function RM(t,e,n){return xy(N(t),po.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(t,e,n){const r=N(t),i={requestType:"EMAIL_SIGNIN",email:e};D(n.handleCodeInApp,r,"argument-error"),n&&Py(r,i,n),await X6(r,i)}function w5(t,e){const n=Ay.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function E5(t,e,n){const r=N(t),i=po.credentialWithLink(e,n||Gh());return D(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),xy(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(t,e){return Dt(t,"POST","/v1/accounts:createAuthUri",pt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(t,e){const n=sT()?Gh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await S5(N(t),r);return i||[]}async function T5(t,e){const n=N(t),r=await t.getIdToken(),i={requestType:"VERIFY_EMAIL",idToken:r};e&&Py(n.auth,i,e);const{email:s}=await Q6(n.auth,i);s!==t.email&&await t.reload()}async function I5(t,e,n){const r=N(t),i=await t.getIdToken(),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:e};n&&Py(r.auth,s,n);const{email:o}=await J6(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,e){return Dt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=N(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Xi(r,C5(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function A5(t,e){return xM(N(t),e,null)}function R5(t,e){return xM(N(t),null,e)}async function xM(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Xi(t,_M(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=Cy(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Kl(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new N5(s,i);case"github.com":return new P5(s,i);case"google.com":return new O5(s,i);case"twitter.com":return new D5(s,i,t.screenName||null);case"custom":case"anonymous":return new Kl(s,null);default:return new Kl(s,r,i)}}class Kl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class NM extends Kl{constructor(e,n,r,i){super(e,n,r),this.username=i}}class N5 extends Kl{constructor(e,n){super(e,"facebook.com",n)}}class P5 extends NM{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class O5 extends Kl{constructor(e,n){super(e,"google.com",n)}}class D5 extends NM{constructor(e,n,r){super(e,"twitter.com",n,r)}}function $5(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:x5(n)}class Yo{constructor(e,n){this.type=e,this.credential=n}static _fromIdtoken(e){return new Yo("enroll",e)}static _fromMfaPendingCredential(e){return new Yo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Yo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Yo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Rt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Ny._fromServerResponse(r,a));D(i.mfaPendingCredential,r,"internal-error");const o=Yo._fromMfaPendingCredential(i.mfaPendingCredential);return new cT(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await br._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return D(n.user,r,"internal-error"),br._forOperation(n.user,n.operationType,u);default:At(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function M5(t,e){var n;const r=N(t),i=e;return D(e.customData.operationType,r,"argument-error"),D((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),cT._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t,e){return Dt(t,"POST","/v2/accounts/mfaEnrollment:start",pt(t,e))}function L5(t,e){return Dt(t,"POST","/v2/accounts/mfaEnrollment:finalize",pt(t,e))}function U5(t,e){return Dt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",pt(t,e))}class hT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Ny._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new hT(e)}async getSession(){return Yo._fromIdtoken(await this.user.getIdToken())}async enroll(e,n){const r=e,i=await this.getSession(),s=await Xi(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){var n;const r=typeof e=="string"?e:e.uid,i=await this.user.getIdToken(),s=await Xi(this.user,U5(this.user.auth,{idToken:i,mfaEnrollmentId:r}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==r),await this.user._updateTokensIfNecessary(s);try{await this.user.reload()}catch(o){if(((n=o)===null||n===void 0?void 0:n.code)!=="auth/user-token-expired")throw o}}}const z_=new WeakMap;function j5(t){const e=N(t);return z_.has(e)||z_.set(e,hT._fromUser(e)),z_.get(e)}const Mg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mg,"1"),this.storage.removeItem(Mg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(){const t=Oe();return aT(t)||Vu(t)}const B5=1e3,z5=10;class OM extends PM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=V5()&&V6(),this.fallbackToPolling=gM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);j6()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,z5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},B5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OM.type="LOCAL";const Oy=OM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM extends PM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DM.type="SESSION";const Xs=DM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Dy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await q5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Kd("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return window}function H5(t){ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function K5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Q5(){return dT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="firebaseLocalStorageDb",Y5=1,Fg="firebaseLocalStorage",MM="fbase_key";class Gd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $y(t,e){return t.transaction([Fg],e?"readwrite":"readonly").objectStore(Fg)}function X5(){const t=indexedDB.deleteDatabase($M);return new Gd(t).toPromise()}function X0(){const t=indexedDB.open($M,Y5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fg,{keyPath:MM})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fg)?e(r):(r.close(),await X5(),e(await X0()))})})}async function mA(t,e,n){const r=$y(t,!0).put({[MM]:e,value:n});return new Gd(r).toPromise()}async function J5(t,e){const n=$y(t,!1).get(e),r=await new Gd(n).toPromise();return r===void 0?null:r.value}function yA(t,e){const n=$y(t,!0).delete(e);return new Gd(n).toPromise()}const Z5=800,e8=3;class FM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await X0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>e8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dy._getInstance(Q5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await K5(),!this.activeServiceWorker)return;this.sender=new W5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await X0();return await mA(e,Mg,"1"),await yA(e,Mg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>J5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$y(i,!1).getAll();return new Gd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FM.type="LOCAL";const du=FM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(t,e){return Dt(t,"POST","/v2/accounts/mfaSignIn:start",pt(t,e))}function n8(t,e){return Dt(t,"POST","/v2/accounts/mfaSignIn:finalize",pt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(t){return(await Dt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function LM(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=qt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",i8().appendChild(r)})}function UM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8=500,o8=6e4,Zf=1e12;class a8{constructor(e){this.auth=e,this.counter=Zf,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new l8(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Zf;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Zf;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Zf;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class l8{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;D(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=u8(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},o8)},s8))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function u8(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=UM("rcb"),c8=new Wd(3e4,6e4),h8="https://www.google.com/recaptcha/api.js?";class d8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return D(f8(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ut().grecaptcha):new Promise((r,i)=>{const s=ut().setTimeout(()=>{i(qt(e,"network-request-failed"))},c8.get());ut()[q_]=()=>{ut().clearTimeout(s),delete ut()[q_];const a=ut().grecaptcha;if(!a){i(qt(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const h=l(u,c);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${h8}?${Ha({onload:q_,render:"explicit",hl:n})}`;LM(o).catch(()=>{clearTimeout(s),i(qt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function f8(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class p8{async load(e){return new a8(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="recaptcha",g8={theme:"light",type:"image"};class m8{constructor(e,n=Object.assign({},g8),r){this.parameters=n,this.type=jM,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(r),this.isInvisible=this.parameters.size==="invisible",D(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;D(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new p8:new d8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){D(!this.parameters.sitekey,this.auth,"argument-error"),D(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),D(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ut()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){D(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){D(sT()&&!dT(),this.auth,"internal-error"),await y8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await r8(this.auth);D(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return D(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function y8(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=aa._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function v8(t,e,n){const r=Rt(t),i=await My(r,e,N(n));return new fT(i,s=>xy(r,s))}async function _8(t,e,n){const r=N(t);await Ry(!1,r,"phone");const i=await My(r.auth,e,N(n));return new fT(i,s=>IM(r,s))}async function w8(t,e,n){const r=N(t),i=await My(r.auth,e,N(n));return new fT(i,s=>CM(r,s))}async function My(t,e,n){var r;const i=await n.verify();try{D(typeof i=="string",t,"argument-error"),D(n.type===jM,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return D(o.type==="enroll",t,"internal-error"),(await F5(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{D(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return D(a,t,"missing-multi-factor-info"),(await t8(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await n5(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function E8(t,e){await lT(N(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.providerId=jr.PROVIDER_ID,this.auth=Rt(e)}verifyPhoneNumber(e,n){return My(this.auth,e,N(n))}static credential(e,n){return aa._fromVerification(e,n)}static credentialFromResult(e){const n=e;return jr.credentialFromTaggedObject(n)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?aa._fromTokenResponse(n,r):null}}jr.PROVIDER_ID="phone";jr.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e){return e?Wn(e):(D(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT extends Bu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function S8(t){return TM(t.auth,new pT(t),t.bypassAuthState)}function b8(t){const{auth:e,user:n}=t;return D(n,e,"internal-error"),bM(n,new pT(t),t.bypassAuthState)}async function T8(t){const{auth:e,user:n}=t;return D(n,e,"internal-error"),lT(n,new pT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S8;case"linkViaPopup":case"linkViaRedirect":return T8;case"reauthViaPopup":case"reauthViaRedirect":return b8;default:At(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=new Wd(2e3,1e4);async function C8(t,e,n){const r=Rt(t);ju(t,e,ss);const i=Ka(r,n);return new $i(r,"signInViaPopup",e,i).executeNotNull()}async function k8(t,e,n){const r=N(t);ju(r.auth,e,ss);const i=Ka(r.auth,n);return new $i(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function A8(t,e,n){const r=N(t);ju(r.auth,e,ss);const i=Ka(r.auth,n);return new $i(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class $i extends VM{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$i.currentPopupAction&&$i.currentPopupAction.cancel(),$i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return D(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=Kd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,I8.get())};e()}}$i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8="pendingRedirect",sh=new Map;class x8 extends VM{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const r=await N8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function N8(t,e){const n=zM(e),r=BM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function gT(t,e){return BM(t)._set(zM(e),"true")}function P8(){sh.clear()}function mT(t,e){sh.set(t._key(),e)}function BM(t){return Wn(t._redirectPersistence)}function zM(t){return oa(R8,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t,e,n){return D8(t,e,n)}async function D8(t,e,n){const r=Rt(t);ju(t,e,ss);const i=Ka(r,n);return await gT(i,r),i._openRedirect(r,e,"signInViaRedirect")}function $8(t,e,n){return M8(t,e,n)}async function M8(t,e,n){const r=N(t);ju(r.auth,e,ss);const i=Ka(r.auth,n);await gT(i,r.auth);const s=await qM(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function F8(t,e,n){return L8(t,e,n)}async function L8(t,e,n){const r=N(t);ju(r.auth,e,ss);const i=Ka(r.auth,n);await Ry(!1,r,e.providerId),await gT(i,r.auth);const s=await qM(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function U8(t,e){return await Rt(t)._initializationPromise,Fy(t,e,!1)}async function Fy(t,e,n=!1){const r=Rt(t),i=Ka(r,e),o=await new x8(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function qM(t){const e=Kd(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=10*60*1e3;class WM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!V8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HM(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j8&&this.cachedEventUids.clear(),this.cachedEventUids.has(vA(e))}saveEventToCache(e){this.cachedEventUids.add(vA(e)),this.lastProcessedEventTime=Date.now()}}function vA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HM({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function V8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e={}){return Dt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z8=/^https?/;async function q8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KM(t);for(const n of e)try{if(W8(n))return}catch{}At(t,"unauthorized-domain")}function W8(t){const e=Gh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!z8.test(n))return!1;if(B8.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=new Wd(3e4,6e4);function _A(){const t=ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function K8(t){return new Promise((e,n)=>{var r,i,s;function o(){_A(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_A(),n(qt(t,"network-request-failed"))},timeout:H8.get()})}if(!((i=(r=ut().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ut().gapi)===null||s===void 0)&&s.load)o();else{const a=UM("iframefcb");return ut()[a]=()=>{gapi.load?o():n(qt(t,"network-request-failed"))},LM(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw jp=null,e})}let jp=null;function G8(t){return jp=jp||K8(t),jp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8=new Wd(5e3,15e3),Y8="__/auth/iframe",X8="emulator/auth/iframe",J8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e9(t){const e=t.config;D(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oT(e,X8):`https://${t.config.authDomain}/${Y8}`,r={apiKey:e.apiKey,appName:t.name,v:bi},i=Z8.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ha(r).slice(1)}`}async function t9(t){const e=await G8(t),n=ut().gapi;return D(n,t,"internal-error"),e.open({where:document.body,url:e9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=qt(t,"network-request-failed"),a=ut().setTimeout(()=>{s(o)},Q8.get());function l(){ut().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r9=500,i9=600,s9="_blank",o9="http://localhost";class wA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a9(t,e,n,r=r9,i=i9){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},n9),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Oe().toLowerCase();n&&(a=hM(u)?s9:n),cM(u)&&(e=e||o9,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(U6(u)&&a!=="_self")return l9(e||"",a),new wA(null);const h=window.open(e||"",a,c);D(h,t,"popup-blocked");try{h.focus()}catch{}return new wA(h)}function l9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9="__/auth/handler",c9="emulator/auth/handler";function J0(t,e,n,r,i,s){D(t.config.authDomain,t,"auth-domain-config-required"),D(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bi,eventId:i};if(e instanceof ss){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(s||{}))o[l]=u}if(e instanceof zu){const l=e.getScopes().filter(u=>u!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${h9(t)}?${Ha(a).slice(1)}`}function h9({config:t}){return t.emulator?oT(t,c9):`https://${t.authDomain}/${u9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="webStorageSupport";class d9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xs,this._completeRedirectFn=Fy,this._overrideRedirectResult=mT}async _openPopup(e,n,r,i){var s;qr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=J0(e,n,r,Gh(),i);return a9(e,o,Kd())}async _openRedirect(e,n,r,i){return await this._originValidation(e),H5(J0(e,n,r,Gh(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await t9(e),r=new WM(e);return n.register("authEvent",i=>(D(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(W_,{type:W_},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[W_];o!==void 0&&n(!!o),At(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gM()||aT()||Vu()}}const GM=d9;class f9{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ri("unexpected MultiFactorSessionType")}}}class yT extends f9{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new yT(e)}_finalizeEnroll(e,n,r){return L5(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return n8(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class QM{constructor(){}static assertion(e){return yT._fromCredential(e)}}QM.FACTOR_ID="phone";var EA="@firebase/auth",SA="0.20.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function m9(t){Ye(new fe("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{D(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),D(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mM(t)},c=new z6(a,l,u);return E6(c,n),c})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ye(new fe("auth-internal",e=>{const n=Rt(e.getProvider("auth").getImmediate());return(r=>new p9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),we(EA,SA,g9(t)),we(EA,SA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t=nT()){const e=rs(t,"auth");return e.isInitialized()?e.getImmediate():w6(t,{popupRedirectResolver:GM,persistence:[du,Oy,Xs]})}m9("Browser");var Z0;try{Z0=Map}catch{}var eE;try{eE=Set}catch{}function XM(t,e,n){if(!t||typeof t!="object"||typeof t=="function")return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(Array.isArray(t))return t.map(tE);if(Z0&&t instanceof Z0)return new Map(Array.from(t.entries()));if(eE&&t instanceof eE)return new Set(Array.from(t.values()));if(t instanceof Object){e.push(t);var r=Object.create(t);n.push(r);for(var i in t){var s=e.findIndex(function(o){return o===t[i]});r[i]=s>-1?n[s]:XM(t[i],e,n)}return r}return t}function tE(t){return XM(t,[],[])}const y9=Object.prototype.toString,v9=Error.prototype.toString,_9=RegExp.prototype.toString,w9=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",E9=/^Symbol\((.*)\)(.*)$/;function S9(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function bA(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return S9(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return w9.call(t).replace(E9,"Symbol($1)");const r=y9.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+v9.call(t)+"]":r==="RegExp"?_9.call(t):null}function Jh(t,e){let n=bA(t,e);return n!==null?n:JSON.stringify(t,function(r,i){let s=bA(this[r],e);return s!==null?s:i},2)}let Do={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{let i=r!=null&&r!==n,s=`${t} must be a \`${e}\` type, but the final value was: \`${Jh(n,!0)}\``+(i?` (cast from the value \`${Jh(r,!0)}\`).`:".");return n===null&&(s+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),s},defined:"${path} must be defined"},xr={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},b9={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},nE={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},T9={isValue:"${path} field must be ${value}"},rE={noUnknown:"${path} field has unspecified keys: ${unknown}"},I9={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:Do,string:xr,number:b9,date:nE,object:rE,array:I9,boolean:T9});var C9=Object.prototype,k9=C9.hasOwnProperty;function A9(t,e){return t!=null&&k9.call(t,e)}var R9=A9,x9=Array.isArray,go=x9,N9=typeof $f=="object"&&$f&&$f.Object===Object&&$f,JM=N9,P9=JM,O9=typeof self=="object"&&self&&self.Object===Object&&self,D9=P9||O9||Function("return this")(),os=D9,$9=os,M9=$9.Symbol,Ly=M9,TA=Ly,ZM=Object.prototype,F9=ZM.hasOwnProperty,L9=ZM.toString,Ec=TA?TA.toStringTag:void 0;function U9(t){var e=F9.call(t,Ec),n=t[Ec];try{t[Ec]=void 0;var r=!0}catch{}var i=L9.call(t);return r&&(e?t[Ec]=n:delete t[Ec]),i}var j9=U9,V9=Object.prototype,B9=V9.toString;function z9(t){return B9.call(t)}var q9=z9,IA=Ly,W9=j9,H9=q9,K9="[object Null]",G9="[object Undefined]",CA=IA?IA.toStringTag:void 0;function Q9(t){return t==null?t===void 0?G9:K9:CA&&CA in Object(t)?W9(t):H9(t)}var Qd=Q9;function Y9(t){return t!=null&&typeof t=="object"}var Yd=Y9,X9=Qd,J9=Yd,Z9="[object Symbol]";function e7(t){return typeof t=="symbol"||J9(t)&&X9(t)==Z9}var vT=e7,t7=go,n7=vT,r7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i7=/^\w*$/;function s7(t,e){if(t7(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||n7(t)?!0:i7.test(t)||!r7.test(t)||e!=null&&t in Object(e)}var _T=s7;function o7(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var wT=o7,a7=Qd,l7=wT,u7="[object AsyncFunction]",c7="[object Function]",h7="[object GeneratorFunction]",d7="[object Proxy]";function f7(t){if(!l7(t))return!1;var e=a7(t);return e==c7||e==h7||e==u7||e==d7}var eF=f7,p7=os,g7=p7["__core-js_shared__"],m7=g7,H_=m7,kA=function(){var t=/[^.]+$/.exec(H_&&H_.keys&&H_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function y7(t){return!!kA&&kA in t}var v7=y7,_7=Function.prototype,w7=_7.toString;function E7(t){if(t!=null){try{return w7.call(t)}catch{}try{return t+""}catch{}}return""}var tF=E7,S7=eF,b7=v7,T7=wT,I7=tF,C7=/[\\^$.*+?()[\]{}|]/g,k7=/^\[object .+?Constructor\]$/,A7=Function.prototype,R7=Object.prototype,x7=A7.toString,N7=R7.hasOwnProperty,P7=RegExp("^"+x7.call(N7).replace(C7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function O7(t){if(!T7(t)||b7(t))return!1;var e=S7(t)?P7:k7;return e.test(I7(t))}var D7=O7;function $7(t,e){return t==null?void 0:t[e]}var M7=$7,F7=D7,L7=M7;function U7(t,e){var n=L7(t,e);return F7(n)?n:void 0}var Ga=U7,j7=Ga,V7=j7(Object,"create"),Uy=V7,AA=Uy;function B7(){this.__data__=AA?AA(null):{},this.size=0}var z7=B7;function q7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var W7=q7,H7=Uy,K7="__lodash_hash_undefined__",G7=Object.prototype,Q7=G7.hasOwnProperty;function Y7(t){var e=this.__data__;if(H7){var n=e[t];return n===K7?void 0:n}return Q7.call(e,t)?e[t]:void 0}var X7=Y7,J7=Uy,Z7=Object.prototype,eQ=Z7.hasOwnProperty;function tQ(t){var e=this.__data__;return J7?e[t]!==void 0:eQ.call(e,t)}var nQ=tQ,rQ=Uy,iQ="__lodash_hash_undefined__";function sQ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rQ&&e===void 0?iQ:e,this}var oQ=sQ,aQ=z7,lQ=W7,uQ=X7,cQ=nQ,hQ=oQ;function qu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qu.prototype.clear=aQ;qu.prototype.delete=lQ;qu.prototype.get=uQ;qu.prototype.has=cQ;qu.prototype.set=hQ;var dQ=qu;function fQ(){this.__data__=[],this.size=0}var pQ=fQ;function gQ(t,e){return t===e||t!==t&&e!==e}var nF=gQ,mQ=nF;function yQ(t,e){for(var n=t.length;n--;)if(mQ(t[n][0],e))return n;return-1}var jy=yQ,vQ=jy,_Q=Array.prototype,wQ=_Q.splice;function EQ(t){var e=this.__data__,n=vQ(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():wQ.call(e,n,1),--this.size,!0}var SQ=EQ,bQ=jy;function TQ(t){var e=this.__data__,n=bQ(e,t);return n<0?void 0:e[n][1]}var IQ=TQ,CQ=jy;function kQ(t){return CQ(this.__data__,t)>-1}var AQ=kQ,RQ=jy;function xQ(t,e){var n=this.__data__,r=RQ(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var NQ=xQ,PQ=pQ,OQ=SQ,DQ=IQ,$Q=AQ,MQ=NQ;function Wu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wu.prototype.clear=PQ;Wu.prototype.delete=OQ;Wu.prototype.get=DQ;Wu.prototype.has=$Q;Wu.prototype.set=MQ;var Vy=Wu,FQ=Ga,LQ=os,UQ=FQ(LQ,"Map"),ET=UQ,RA=dQ,jQ=Vy,VQ=ET;function BQ(){this.size=0,this.__data__={hash:new RA,map:new(VQ||jQ),string:new RA}}var zQ=BQ;function qQ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var WQ=qQ,HQ=WQ;function KQ(t,e){var n=t.__data__;return HQ(e)?n[typeof e=="string"?"string":"hash"]:n.map}var By=KQ,GQ=By;function QQ(t){var e=GQ(this,t).delete(t);return this.size-=e?1:0,e}var YQ=QQ,XQ=By;function JQ(t){return XQ(this,t).get(t)}var ZQ=JQ,eY=By;function tY(t){return eY(this,t).has(t)}var nY=tY,rY=By;function iY(t,e){var n=rY(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var sY=iY,oY=zQ,aY=YQ,lY=ZQ,uY=nY,cY=sY;function Hu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hu.prototype.clear=oY;Hu.prototype.delete=aY;Hu.prototype.get=lY;Hu.prototype.has=uY;Hu.prototype.set=cY;var ST=Hu,rF=ST,hY="Expected a function";function bT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(hY);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(bT.Cache||rF),n}bT.Cache=rF;var dY=bT,fY=dY,pY=500;function gY(t){var e=fY(t,function(r){return n.size===pY&&n.clear(),r}),n=e.cache;return e}var mY=gY,yY=mY,vY=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_Y=/\\(\\)?/g,wY=yY(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(vY,function(n,r,i,s){e.push(i?s.replace(_Y,"$1"):r||n)}),e}),EY=wY;function SY(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var bY=SY,xA=Ly,TY=bY,IY=go,CY=vT,kY=1/0,NA=xA?xA.prototype:void 0,PA=NA?NA.toString:void 0;function iF(t){if(typeof t=="string")return t;if(IY(t))return TY(t,iF)+"";if(CY(t))return PA?PA.call(t):"";var e=t+"";return e=="0"&&1/t==-kY?"-0":e}var AY=iF,RY=AY;function xY(t){return t==null?"":RY(t)}var Xd=xY,NY=go,PY=_T,OY=EY,DY=Xd;function $Y(t,e){return NY(t)?t:PY(t,e)?[t]:OY(DY(t))}var sF=$Y,MY=Qd,FY=Yd,LY="[object Arguments]";function UY(t){return FY(t)&&MY(t)==LY}var jY=UY,OA=jY,VY=Yd,oF=Object.prototype,BY=oF.hasOwnProperty,zY=oF.propertyIsEnumerable,qY=OA(function(){return arguments}())?OA:function(t){return VY(t)&&BY.call(t,"callee")&&!zY.call(t,"callee")},aF=qY,WY=9007199254740991,HY=/^(?:0|[1-9]\d*)$/;function KY(t,e){var n=typeof t;return e=e==null?WY:e,!!e&&(n=="number"||n!="symbol"&&HY.test(t))&&t>-1&&t%1==0&&t<e}var lF=KY,GY=9007199254740991;function QY(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=GY}var TT=QY,YY=vT,XY=1/0;function JY(t){if(typeof t=="string"||YY(t))return t;var e=t+"";return e=="0"&&1/t==-XY?"-0":e}var zy=JY,ZY=sF,eX=aF,tX=go,nX=lF,rX=TT,iX=zy;function sX(t,e,n){e=ZY(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=iX(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&rX(i)&&nX(o,i)&&(tX(t)||eX(t)))}var uF=sX,oX=R9,aX=uF;function lX(t,e){return t!=null&&aX(t,e,oX)}var Lg=lX;const cF=t=>t&&t.__isYupSchema__;class uX{constructor(e,n){if(this.fn=void 0,this.refs=e,this.refs=e,typeof n=="function"){this.fn=n;return}if(!Lg(n,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:s}=n,o=typeof r=="function"?r:(...a)=>a.every(l=>l===r);this.fn=function(...a){let l=a.pop(),u=a.pop(),c=o(...a)?i:s;if(!!c)return typeof c=="function"?c(u):u.concat(c.resolve(l))}}resolve(e,n){let r=this.refs.map(s=>s.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),i=this.fn.apply(e,r.concat(e,n));if(i===void 0||i===e)return e;if(!cF(i))throw new TypeError("conditions must return a schema object");return i.resolve(n)}}function hF(t){return t==null?[]:[].concat(t)}function iE(){return iE=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iE.apply(this,arguments)}let cX=/\$\{\s*(\w+)\s*\}/g;class Hn extends Error{static formatError(e,n){const r=n.label||n.path||"this";return r!==n.path&&(n=iE({},n,{path:r})),typeof e=="string"?e.replace(cX,(i,s)=>Jh(n[s])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,i){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=n,this.path=r,this.type=i,this.errors=[],this.inner=[],hF(e).forEach(s=>{Hn.isError(s)?(this.errors.push(...s.errors),this.inner=this.inner.concat(s.inner.length?s.inner:s)):this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,Hn)}}const hX=t=>{let e=!1;return(...n)=>{e||(e=!0,t(...n))}};function sE(t,e){let{endEarly:n,tests:r,args:i,value:s,errors:o,sort:a,path:l}=t,u=hX(e),c=r.length;const h=[];if(o=o||[],!c)return o.length?u(new Hn(o,s,l)):u(null,s);for(let d=0;d<r.length;d++){const f=r[d];f(i,function(g){if(g){if(!Hn.isError(g))return u(g,s);if(n)return g.value=s,u(g,s);h.push(g)}if(--c<=0){if(h.length&&(a&&h.sort(a),o.length&&h.push(...o),o=h),o.length){u(new Hn(o,s,l),s);return}u(null,s)}})}}var dX=Ga,fX=function(){try{var t=dX(Object,"defineProperty");return t({},"",{}),t}catch{}}(),pX=fX,DA=pX;function gX(t,e,n){e=="__proto__"&&DA?DA(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var dF=gX;function mX(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var yX=mX,vX=yX,_X=vX(),wX=_X;function EX(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var SX=EX,Ug={exports:{}};function bX(){return!1}var TX=bX;(function(t,e){var n=os,r=TX,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(Ug,Ug.exports);var IX=Qd,CX=TT,kX=Yd,AX="[object Arguments]",RX="[object Array]",xX="[object Boolean]",NX="[object Date]",PX="[object Error]",OX="[object Function]",DX="[object Map]",$X="[object Number]",MX="[object Object]",FX="[object RegExp]",LX="[object Set]",UX="[object String]",jX="[object WeakMap]",VX="[object ArrayBuffer]",BX="[object DataView]",zX="[object Float32Array]",qX="[object Float64Array]",WX="[object Int8Array]",HX="[object Int16Array]",KX="[object Int32Array]",GX="[object Uint8Array]",QX="[object Uint8ClampedArray]",YX="[object Uint16Array]",XX="[object Uint32Array]",Re={};Re[zX]=Re[qX]=Re[WX]=Re[HX]=Re[KX]=Re[GX]=Re[QX]=Re[YX]=Re[XX]=!0;Re[AX]=Re[RX]=Re[VX]=Re[xX]=Re[BX]=Re[NX]=Re[PX]=Re[OX]=Re[DX]=Re[$X]=Re[MX]=Re[FX]=Re[LX]=Re[UX]=Re[jX]=!1;function JX(t){return kX(t)&&CX(t.length)&&!!Re[IX(t)]}var ZX=JX;function eJ(t){return function(e){return t(e)}}var tJ=eJ,oE={exports:{}};(function(t,e){var n=JM,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(oE,oE.exports);var nJ=ZX,rJ=tJ,$A=oE.exports,MA=$A&&$A.isTypedArray,iJ=MA?rJ(MA):nJ,fF=iJ,sJ=SX,oJ=aF,aJ=go,lJ=Ug.exports,uJ=lF,cJ=fF,hJ=Object.prototype,dJ=hJ.hasOwnProperty;function fJ(t,e){var n=aJ(t),r=!n&&oJ(t),i=!n&&!r&&lJ(t),s=!n&&!r&&!i&&cJ(t),o=n||r||i||s,a=o?sJ(t.length,String):[],l=a.length;for(var u in t)(e||dJ.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||uJ(u,l)))&&a.push(u);return a}var pJ=fJ,gJ=Object.prototype;function mJ(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||gJ;return t===n}var yJ=mJ;function vJ(t,e){return function(n){return t(e(n))}}var _J=vJ,wJ=_J,EJ=wJ(Object.keys,Object),SJ=EJ,bJ=yJ,TJ=SJ,IJ=Object.prototype,CJ=IJ.hasOwnProperty;function kJ(t){if(!bJ(t))return TJ(t);var e=[];for(var n in Object(t))CJ.call(t,n)&&n!="constructor"&&e.push(n);return e}var AJ=kJ,RJ=eF,xJ=TT;function NJ(t){return t!=null&&xJ(t.length)&&!RJ(t)}var PJ=NJ,OJ=pJ,DJ=AJ,$J=PJ;function MJ(t){return $J(t)?OJ(t):DJ(t)}var IT=MJ,FJ=wX,LJ=IT;function UJ(t,e){return t&&FJ(t,e,LJ)}var pF=UJ,jJ=Vy;function VJ(){this.__data__=new jJ,this.size=0}var BJ=VJ;function zJ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var qJ=zJ;function WJ(t){return this.__data__.get(t)}var HJ=WJ;function KJ(t){return this.__data__.has(t)}var GJ=KJ,QJ=Vy,YJ=ET,XJ=ST,JJ=200;function ZJ(t,e){var n=this.__data__;if(n instanceof QJ){var r=n.__data__;if(!YJ||r.length<JJ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new XJ(r)}return n.set(t,e),this.size=n.size,this}var eZ=ZJ,tZ=Vy,nZ=BJ,rZ=qJ,iZ=HJ,sZ=GJ,oZ=eZ;function Ku(t){var e=this.__data__=new tZ(t);this.size=e.size}Ku.prototype.clear=nZ;Ku.prototype.delete=rZ;Ku.prototype.get=iZ;Ku.prototype.has=sZ;Ku.prototype.set=oZ;var gF=Ku,aZ="__lodash_hash_undefined__";function lZ(t){return this.__data__.set(t,aZ),this}var uZ=lZ;function cZ(t){return this.__data__.has(t)}var hZ=cZ,dZ=ST,fZ=uZ,pZ=hZ;function jg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new dZ;++e<n;)this.add(t[e])}jg.prototype.add=jg.prototype.push=fZ;jg.prototype.has=pZ;var gZ=jg;function mZ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var yZ=mZ;function vZ(t,e){return t.has(e)}var _Z=vZ,wZ=gZ,EZ=yZ,SZ=_Z,bZ=1,TZ=2;function IZ(t,e,n,r,i,s){var o=n&bZ,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var h=-1,d=!0,f=n&TZ?new wZ:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var p=t[h],g=e[h];if(r)var w=o?r(g,p,h,e,t,s):r(p,g,h,t,e,s);if(w!==void 0){if(w)continue;d=!1;break}if(f){if(!EZ(e,function(m,y){if(!SZ(f,y)&&(p===m||i(p,m,n,r,s)))return f.push(y)})){d=!1;break}}else if(!(p===g||i(p,g,n,r,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var mF=IZ,CZ=os,kZ=CZ.Uint8Array,AZ=kZ;function RZ(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var xZ=RZ;function NZ(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var PZ=NZ,FA=Ly,LA=AZ,OZ=nF,DZ=mF,$Z=xZ,MZ=PZ,FZ=1,LZ=2,UZ="[object Boolean]",jZ="[object Date]",VZ="[object Error]",BZ="[object Map]",zZ="[object Number]",qZ="[object RegExp]",WZ="[object Set]",HZ="[object String]",KZ="[object Symbol]",GZ="[object ArrayBuffer]",QZ="[object DataView]",UA=FA?FA.prototype:void 0,K_=UA?UA.valueOf:void 0;function YZ(t,e,n,r,i,s,o){switch(n){case QZ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case GZ:return!(t.byteLength!=e.byteLength||!s(new LA(t),new LA(e)));case UZ:case jZ:case zZ:return OZ(+t,+e);case VZ:return t.name==e.name&&t.message==e.message;case qZ:case HZ:return t==e+"";case BZ:var a=$Z;case WZ:var l=r&FZ;if(a||(a=MZ),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=LZ,o.set(t,e);var c=DZ(a(t),a(e),r,i,s,o);return o.delete(t),c;case KZ:if(K_)return K_.call(t)==K_.call(e)}return!1}var XZ=YZ;function JZ(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var ZZ=JZ,eee=ZZ,tee=go;function nee(t,e,n){var r=e(t);return tee(t)?r:eee(r,n(t))}var ree=nee;function iee(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var see=iee;function oee(){return[]}var aee=oee,lee=see,uee=aee,cee=Object.prototype,hee=cee.propertyIsEnumerable,jA=Object.getOwnPropertySymbols,dee=jA?function(t){return t==null?[]:(t=Object(t),lee(jA(t),function(e){return hee.call(t,e)}))}:uee,fee=dee,pee=ree,gee=fee,mee=IT;function yee(t){return pee(t,mee,gee)}var vee=yee,VA=vee,_ee=1,wee=Object.prototype,Eee=wee.hasOwnProperty;function See(t,e,n,r,i,s){var o=n&_ee,a=VA(t),l=a.length,u=VA(e),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var d=a[h];if(!(o?d in e:Eee.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var g=!0;s.set(t,e),s.set(e,t);for(var w=o;++h<l;){d=a[h];var m=t[d],y=e[d];if(r)var v=o?r(y,m,d,e,t,s):r(m,y,d,t,e,s);if(!(v===void 0?m===y||i(m,y,n,r,s):v)){g=!1;break}w||(w=d=="constructor")}if(g&&!w){var _=t.constructor,E=e.constructor;_!=E&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof E=="function"&&E instanceof E)&&(g=!1)}return s.delete(t),s.delete(e),g}var bee=See,Tee=Ga,Iee=os,Cee=Tee(Iee,"DataView"),kee=Cee,Aee=Ga,Ree=os,xee=Aee(Ree,"Promise"),Nee=xee,Pee=Ga,Oee=os,Dee=Pee(Oee,"Set"),$ee=Dee,Mee=Ga,Fee=os,Lee=Mee(Fee,"WeakMap"),Uee=Lee,aE=kee,lE=ET,uE=Nee,cE=$ee,hE=Uee,yF=Qd,Gu=tF,BA="[object Map]",jee="[object Object]",zA="[object Promise]",qA="[object Set]",WA="[object WeakMap]",HA="[object DataView]",Vee=Gu(aE),Bee=Gu(lE),zee=Gu(uE),qee=Gu(cE),Wee=Gu(hE),$o=yF;(aE&&$o(new aE(new ArrayBuffer(1)))!=HA||lE&&$o(new lE)!=BA||uE&&$o(uE.resolve())!=zA||cE&&$o(new cE)!=qA||hE&&$o(new hE)!=WA)&&($o=function(t){var e=yF(t),n=e==jee?t.constructor:void 0,r=n?Gu(n):"";if(r)switch(r){case Vee:return HA;case Bee:return BA;case zee:return zA;case qee:return qA;case Wee:return WA}return e});var Hee=$o,G_=gF,Kee=mF,Gee=XZ,Qee=bee,KA=Hee,GA=go,QA=Ug.exports,Yee=fF,Xee=1,YA="[object Arguments]",XA="[object Array]",ep="[object Object]",Jee=Object.prototype,JA=Jee.hasOwnProperty;function Zee(t,e,n,r,i,s){var o=GA(t),a=GA(e),l=o?XA:KA(t),u=a?XA:KA(e);l=l==YA?ep:l,u=u==YA?ep:u;var c=l==ep,h=u==ep,d=l==u;if(d&&QA(t)){if(!QA(e))return!1;o=!0,c=!1}if(d&&!c)return s||(s=new G_),o||Yee(t)?Kee(t,e,n,r,i,s):Gee(t,e,l,n,r,i,s);if(!(n&Xee)){var f=c&&JA.call(t,"__wrapped__"),p=h&&JA.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,w=p?e.value():e;return s||(s=new G_),i(g,w,n,r,s)}}return d?(s||(s=new G_),Qee(t,e,n,r,i,s)):!1}var ete=Zee,tte=ete,ZA=Yd;function vF(t,e,n,r,i){return t===e?!0:t==null||e==null||!ZA(t)&&!ZA(e)?t!==t&&e!==e:tte(t,e,n,r,vF,i)}var _F=vF,nte=gF,rte=_F,ite=1,ste=2;function ote(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],u=t[l],c=a[1];if(o&&a[2]){if(u===void 0&&!(l in t))return!1}else{var h=new nte;if(r)var d=r(u,c,l,t,e,h);if(!(d===void 0?rte(c,u,ite|ste,r,h):d))return!1}}return!0}var ate=ote,lte=wT;function ute(t){return t===t&&!lte(t)}var wF=ute,cte=wF,hte=IT;function dte(t){for(var e=hte(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,cte(i)]}return e}var fte=dte;function pte(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var EF=pte,gte=ate,mte=fte,yte=EF;function vte(t){var e=mte(t);return e.length==1&&e[0][2]?yte(e[0][0],e[0][1]):function(n){return n===t||gte(n,t,e)}}var _te=vte,wte=sF,Ete=zy;function Ste(t,e){e=wte(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Ete(e[n++])];return n&&n==r?t:void 0}var SF=Ste,bte=SF;function Tte(t,e,n){var r=t==null?void 0:bte(t,e);return r===void 0?n:r}var Ite=Tte;function Cte(t,e){return t!=null&&e in Object(t)}var kte=Cte,Ate=kte,Rte=uF;function xte(t,e){return t!=null&&Rte(t,e,Ate)}var Nte=xte,Pte=_F,Ote=Ite,Dte=Nte,$te=_T,Mte=wF,Fte=EF,Lte=zy,Ute=1,jte=2;function Vte(t,e){return $te(t)&&Mte(e)?Fte(Lte(t),e):function(n){var r=Ote(n,t);return r===void 0&&r===e?Dte(n,t):Pte(e,r,Ute|jte)}}var Bte=Vte;function zte(t){return t}var qte=zte;function Wte(t){return function(e){return e==null?void 0:e[t]}}var Hte=Wte,Kte=SF;function Gte(t){return function(e){return Kte(e,t)}}var Qte=Gte,Yte=Hte,Xte=Qte,Jte=_T,Zte=zy;function ene(t){return Jte(t)?Yte(Zte(t)):Xte(t)}var tne=ene,nne=_te,rne=Bte,ine=qte,sne=go,one=tne;function ane(t){return typeof t=="function"?t:t==null?ine:typeof t=="object"?sne(t)?rne(t[0],t[1]):nne(t):one(t)}var bF=ane,lne=dF,une=pF,cne=bF;function hne(t,e){var n={};return e=cne(e),une(t,function(r,i,s){lne(n,i,e(r,i,s))}),n}var TF=hne;function Qa(t){this._maxSize=t,this.clear()}Qa.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Qa.prototype.get=function(t){return this._values[t]};Qa.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var dne=/[^.^\]^[]+|(?=\[\]|\.\.)/g,IF=/^\d+$/,fne=/^\d/,pne=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,gne=/^\s*(['"]?)(.*?)(\1)\s*$/,CT=512,eR=new Qa(CT),tR=new Qa(CT),nR=new Qa(CT),qy={Cache:Qa,split:dE,normalizePath:Q_,setter:function(t){var e=Q_(t);return tR.get(t)||tR.set(t,function(r,i){for(var s=0,o=e.length,a=r;s<o-1;){var l=e[s];if(l==="__proto__"||l==="constructor"||l==="prototype")return r;a=a[e[s++]]}a[e[s]]=i})},getter:function(t,e){var n=Q_(t);return nR.get(t)||nR.set(t,function(i){for(var s=0,o=n.length;s<o;)if(i!=null||!e)i=i[n[s++]];else return;return i})},join:function(t){return t.reduce(function(e,n){return e+(kT(n)||IF.test(n)?"["+n+"]":(e?".":"")+n)},"")},forEach:function(t,e,n){mne(Array.isArray(t)?t:dE(t),e,n)}};function Q_(t){return eR.get(t)||eR.set(t,dE(t).map(function(e){return e.replace(gne,"$2")}))}function dE(t){return t.match(dne)||[""]}function mne(t,e,n){var r=t.length,i,s,o,a;for(s=0;s<r;s++)i=t[s],i&&(_ne(i)&&(i='"'+i+'"'),a=kT(i),o=!a&&/^\d+$/.test(i),e.call(n,i,a,o,s,t))}function kT(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function yne(t){return t.match(fne)&&!t.match(IF)}function vne(t){return pne.test(t)}function _ne(t){return!kT(t)&&(yne(t)||vne(t))}const tp={context:"$",value:"."};function wne(t,e){return new Bi(t,e)}class Bi{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===tp.context,this.isValue=this.key[0]===tp.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?tp.context:this.isValue?tp.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&qy.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let i=this.isContext?r:this.isValue?e:n;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Bi.prototype.__isYupRef=!0;function Vg(){return Vg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vg.apply(this,arguments)}function Ene(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function np(t){function e(n,r){let{value:i,path:s="",label:o,options:a,originalValue:l,sync:u}=n,c=Ene(n,["value","path","label","options","originalValue","sync"]);const{name:h,test:d,params:f,message:p}=t;let{parent:g,context:w}=a;function m(T){return Bi.isRef(T)?T.getValue(i,g,w):T}function y(T={}){const C=TF(Vg({value:i,originalValue:l,label:o,path:T.path||s},f,T.params),m),k=new Hn(Hn.formatError(T.message||p,C),i,C.path,T.type||h);return k.params=C,k}let v=Vg({path:s,parent:g,type:h,createError:y,resolve:m,options:a,originalValue:l},c);if(!u){try{Promise.resolve(d.call(v,i,v)).then(T=>{Hn.isError(T)?r(T):T?r(null,T):r(y())}).catch(r)}catch(T){r(T)}return}let _;try{var E;if(_=d.call(v,i,v),typeof((E=_)==null?void 0:E.then)=="function")throw new Error(`Validation test of type: "${v.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(T){r(T);return}Hn.isError(_)?r(_):_?r(null,_):r(y())}return e.OPTIONS=t,e}let Sne=t=>t.substr(0,t.length-1).substr(1);function bne(t,e,n,r=n){let i,s,o;return e?(qy.forEach(e,(a,l,u)=>{let c=l?Sne(a):a;if(t=t.resolve({context:r,parent:i,value:n}),t.innerType){let h=u?parseInt(c,10):0;if(n&&h>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);i=n,n=n&&n[h],t=t.innerType}if(!u){if(!t.fields||!t.fields[c])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${t._type}")`);i=n,n=n&&n[c],t=t.fields[c]}s=c,o=l?"["+a+"]":"."+a}),{schema:t,parent:i,parentPath:s}):{parent:i,parentPath:e,schema:t}}class Bg{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const n of this.list)e.push(n);for(const[,n]of this.refs)e.push(n.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(e){return this.toArray().reduce((n,r)=>n.concat(Bi.isRef(r)?e(r):r),[])}add(e){Bi.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){Bi.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}clone(){const e=new Bg;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,n){const r=this.clone();return e.list.forEach(i=>r.add(i)),e.refs.forEach(i=>r.add(i)),n.list.forEach(i=>r.delete(i)),n.refs.forEach(i=>r.delete(i)),r}}function cr(){return cr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cr.apply(this,arguments)}class Fn{constructor(e){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new Bg,this._blacklist=new Bg,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Do.notType)}),this.type=(e==null?void 0:e.type)||"mixed",this.spec=cr({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},e==null?void 0:e.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeError=this._typeError,n._whitelistError=this._whitelistError,n._blacklistError=this._blacklistError,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.exclusiveTests=cr({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=tE(cr({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const i=cr({},n.spec,r.spec);return r.spec=i,r._typeError||(r._typeError=n._typeError),r._whitelistError||(r._whitelistError=n._whitelistError),r._blacklistError||(r._blacklistError=n._blacklistError),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(s=>{e.tests.forEach(o=>{s.test(o.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return this.spec.nullable&&e===null?!0:this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((i,s)=>s.resolve(i,e),n),n=n.resolve(e)}return n}cast(e,n={}){let r=this.resolve(cr({value:e},n)),i=r._cast(e,n);if(e!==void 0&&n.assert!==!1&&r.isType(i)!==!0){let s=Jh(e),o=Jh(i);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r._type}". 

attempted value: ${s} 
`+(o!==s?`result of cast: ${o}`:""))}return i}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((i,s)=>s.call(this,i,e,this),e);return r===void 0&&(r=this.getDefault()),r}_validate(e,n={},r){let{sync:i,path:s,from:o=[],originalValue:a=e,strict:l=this.spec.strict,abortEarly:u=this.spec.abortEarly}=n,c=e;l||(c=this._cast(c,cr({assert:!1},n)));let h={value:c,path:s,options:n,originalValue:a,schema:this,label:this.spec.label,sync:i,from:o},d=[];this._typeError&&d.push(this._typeError);let f=[];this._whitelistError&&f.push(this._whitelistError),this._blacklistError&&f.push(this._blacklistError),sE({args:h,value:c,path:s,sync:i,tests:d,endEarly:u},p=>{if(p)return void r(p,c);sE({tests:this.tests.concat(f),args:h,path:s,sync:i,value:c,endEarly:u},r)})}validate(e,n,r){let i=this.resolve(cr({},n,{value:e}));return typeof r=="function"?i._validate(e,n,r):new Promise((s,o)=>i._validate(e,n,(a,l)=>{a?o(a):s(l)}))}validateSync(e,n){let r=this.resolve(cr({},n,{value:e})),i;return r._validate(e,cr({},n,{sync:!0}),(s,o)=>{if(s)throw s;i=o}),i}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(Hn.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(Hn.isError(r))return!1;throw r}}_getDefault(){let e=this.spec.default;return e==null?e:typeof e=="function"?e.call(this):tE(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){let n=this.clone();return n.spec.strict=e,n}_isPresent(e){return e!=null}defined(e=Do.defined){return this.test({message:e,name:"defined",exclusive:!0,test(n){return n!==void 0}})}required(e=Do.required){return this.clone({presence:"required"}).withMutation(n=>n.test({message:e,name:"required",exclusive:!0,test(r){return this.schema._isPresent(r)}}))}notRequired(){let e=this.clone({presence:"optional"});return e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e}nullable(e=!0){return this.clone({nullable:e!==!1})}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=Do.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=np(n),s=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===n.name&&(s||o.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),i=hF(e).map(s=>new Bi(s));return i.forEach(s=>{s.isSibling&&r.deps.push(s.key)}),r.conditions.push(new uX(i,n)),r}typeError(e){let n=this.clone();return n._typeError=np({message:e,name:"typeError",test(r){return r!==void 0&&!this.schema.isType(r)?this.createError({params:{type:this.schema._type}}):!0}}),n}oneOf(e,n=Do.oneOf){let r=this.clone();return e.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r._whitelistError=np({message:n,name:"oneOf",test(i){if(i===void 0)return!0;let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(i)?!0:this.createError({params:{values:s.toArray().join(", "),resolved:o}})}}),r}notOneOf(e,n=Do.notOneOf){let r=this.clone();return e.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r._blacklistError=np({message:n,name:"notOneOf",test(i){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(i)?this.createError({params:{values:s.toArray().join(", "),resolved:o}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(){const e=this.clone(),{label:n,meta:r}=e.spec;return{meta:r,label:n,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map(s=>({name:s.OPTIONS.name,params:s.OPTIONS.params})).filter((s,o,a)=>a.findIndex(l=>l.name===s.name)===o)}}}Fn.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])Fn.prototype[`${t}At`]=function(e,n,r={}){const{parent:i,parentPath:s,schema:o}=bne(this,e,n,r.context);return o[t](i&&i[s],cr({},r,{parent:i,path:e}))};for(const t of["equals","is"])Fn.prototype[t]=Fn.prototype.oneOf;for(const t of["not","nope"])Fn.prototype[t]=Fn.prototype.notOneOf;Fn.prototype.optional=Fn.prototype.notRequired;const Tne=Fn;Tne.prototype;const Pr=t=>t==null;let Ine=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,Cne=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,kne=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ane=t=>Pr(t)||t===t.trim(),Rne={}.toString();function oh(){return new CF}class CF extends Fn{constructor(){super({type:"string"}),this.withMutation(()=>{this.transform(function(e){if(this.isType(e)||Array.isArray(e))return e;const n=e!=null&&e.toString?e.toString():e;return n===Rne?e:n})})}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e,n=xr.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},test(r){return Pr(r)||r.length===this.resolve(e)}})}min(e,n=xr.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},test(r){return Pr(r)||r.length>=this.resolve(e)}})}max(e,n=xr.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},test(r){return Pr(r)||r.length<=this.resolve(e)}})}matches(e,n){let r=!1,i,s;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:i,name:s}=n:i=n),this.test({name:s||"matches",message:i||xr.matches,params:{regex:e},test:o=>Pr(o)||o===""&&r||o.search(e)!==-1})}email(e=xr.email){return this.matches(Ine,{name:"email",message:e,excludeEmptyString:!0})}url(e=xr.url){return this.matches(Cne,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=xr.uuid){return this.matches(kne,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=xr.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:Ane})}lowercase(e=xr.lowercase){return this.transform(n=>Pr(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,test:n=>Pr(n)||n===n.toLowerCase()})}uppercase(e=xr.uppercase){return this.transform(n=>Pr(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,test:n=>Pr(n)||n===n.toUpperCase()})}}oh.prototype=CF.prototype;var xne=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function Nne(t){var e=[1,4,5,6,7,10,11],n=0,r,i;if(i=xne.exec(t)){for(var s=0,o;o=e[s];++s)i[o]=+i[o]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,i[7]=i[7]?String(i[7]).substr(0,3):0,(i[8]===void 0||i[8]==="")&&(i[9]===void 0||i[9]==="")?r=+new Date(i[1],i[2],i[3],i[4],i[5],i[6],i[7]):(i[8]!=="Z"&&i[9]!==void 0&&(n=i[10]*60+i[11],i[9]==="+"&&(n=0-n)),r=Date.UTC(i[1],i[2],i[3],i[4],i[5]+n,i[6],i[7]))}else r=Date.parse?Date.parse(t):NaN;return r}let kF=new Date(""),Pne=t=>Object.prototype.toString.call(t)==="[object Date]";class AF extends Fn{constructor(){super({type:"date"}),this.withMutation(()=>{this.transform(function(e){return this.isType(e)?e:(e=Nne(e),isNaN(e)?kF:new Date(e))})})}_typeCheck(e){return Pne(e)&&!isNaN(e.getTime())}prepareParam(e,n){let r;if(Bi.isRef(e))r=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(e,n=nE.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},test(i){return Pr(i)||i>=this.resolve(r)}})}max(e,n=nE.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},test(i){return Pr(i)||i<=this.resolve(r)}})}}AF.INVALID_DATE=kF;AF.prototype;function One(t,e,n,r){var i=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}var Dne=One;function $ne(t){return function(e){return t==null?void 0:t[e]}}var Mne=$ne,Fne=Mne,Lne={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Une=Fne(Lne),jne=Une,Vne=jne,Bne=Xd,zne=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qne="\\u0300-\\u036f",Wne="\\ufe20-\\ufe2f",Hne="\\u20d0-\\u20ff",Kne=qne+Wne+Hne,Gne="["+Kne+"]",Qne=RegExp(Gne,"g");function Yne(t){return t=Bne(t),t&&t.replace(zne,Vne).replace(Qne,"")}var Xne=Yne,Jne=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Zne(t){return t.match(Jne)||[]}var ere=Zne,tre=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function nre(t){return tre.test(t)}var rre=nre,RF="\\ud800-\\udfff",ire="\\u0300-\\u036f",sre="\\ufe20-\\ufe2f",ore="\\u20d0-\\u20ff",are=ire+sre+ore,xF="\\u2700-\\u27bf",NF="a-z\\xdf-\\xf6\\xf8-\\xff",lre="\\xac\\xb1\\xd7\\xf7",ure="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cre="\\u2000-\\u206f",hre=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",PF="A-Z\\xc0-\\xd6\\xd8-\\xde",dre="\\ufe0e\\ufe0f",OF=lre+ure+cre+hre,DF="['\u2019]",rR="["+OF+"]",fre="["+are+"]",$F="\\d+",pre="["+xF+"]",MF="["+NF+"]",FF="[^"+RF+OF+$F+xF+NF+PF+"]",gre="\\ud83c[\\udffb-\\udfff]",mre="(?:"+fre+"|"+gre+")",yre="[^"+RF+"]",LF="(?:\\ud83c[\\udde6-\\uddff]){2}",UF="[\\ud800-\\udbff][\\udc00-\\udfff]",vl="["+PF+"]",vre="\\u200d",iR="(?:"+MF+"|"+FF+")",_re="(?:"+vl+"|"+FF+")",sR="(?:"+DF+"(?:d|ll|m|re|s|t|ve))?",oR="(?:"+DF+"(?:D|LL|M|RE|S|T|VE))?",jF=mre+"?",VF="["+dre+"]?",wre="(?:"+vre+"(?:"+[yre,LF,UF].join("|")+")"+VF+jF+")*",Ere="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Sre="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bre=VF+jF+wre,Tre="(?:"+[pre,LF,UF].join("|")+")"+bre,Ire=RegExp([vl+"?"+MF+"+"+sR+"(?="+[rR,vl,"$"].join("|")+")",_re+"+"+oR+"(?="+[rR,vl+iR,"$"].join("|")+")",vl+"?"+iR+"+"+sR,vl+"+"+oR,Sre,Ere,$F,Tre].join("|"),"g");function Cre(t){return t.match(Ire)||[]}var kre=Cre,Are=ere,Rre=rre,xre=Xd,Nre=kre;function Pre(t,e,n){return t=xre(t),e=n?void 0:e,e===void 0?Rre(t)?Nre(t):Are(t):t.match(e)||[]}var Ore=Pre,Dre=Dne,$re=Xne,Mre=Ore,Fre="['\u2019]",Lre=RegExp(Fre,"g");function Ure(t){return function(e){return Dre(Mre($re(e).replace(Lre,"")),t,"")}}var BF=Ure,jre=BF,Vre=jre(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),aR=Vre;function Bre(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var zre=Bre,qre=zre;function Wre(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:qre(t,e,n)}var Hre=Wre,Kre="\\ud800-\\udfff",Gre="\\u0300-\\u036f",Qre="\\ufe20-\\ufe2f",Yre="\\u20d0-\\u20ff",Xre=Gre+Qre+Yre,Jre="\\ufe0e\\ufe0f",Zre="\\u200d",eie=RegExp("["+Zre+Kre+Xre+Jre+"]");function tie(t){return eie.test(t)}var zF=tie;function nie(t){return t.split("")}var rie=nie,qF="\\ud800-\\udfff",iie="\\u0300-\\u036f",sie="\\ufe20-\\ufe2f",oie="\\u20d0-\\u20ff",aie=iie+sie+oie,lie="\\ufe0e\\ufe0f",uie="["+qF+"]",fE="["+aie+"]",pE="\\ud83c[\\udffb-\\udfff]",cie="(?:"+fE+"|"+pE+")",WF="[^"+qF+"]",HF="(?:\\ud83c[\\udde6-\\uddff]){2}",KF="[\\ud800-\\udbff][\\udc00-\\udfff]",hie="\\u200d",GF=cie+"?",QF="["+lie+"]?",die="(?:"+hie+"(?:"+[WF,HF,KF].join("|")+")"+QF+GF+")*",fie=QF+GF+die,pie="(?:"+[WF+fE+"?",fE,HF,KF,uie].join("|")+")",gie=RegExp(pE+"(?="+pE+")|"+pie+fie,"g");function mie(t){return t.match(gie)||[]}var yie=mie,vie=rie,_ie=zF,wie=yie;function Eie(t){return _ie(t)?wie(t):vie(t)}var Sie=Eie,bie=Hre,Tie=zF,Iie=Sie,Cie=Xd;function kie(t){return function(e){e=Cie(e);var n=Tie(e)?Iie(e):void 0,r=n?n[0]:e.charAt(0),i=n?bie(n,1).join(""):e.slice(1);return r[t]()+i}}var Aie=kie,Rie=Aie,xie=Rie("toUpperCase"),Nie=xie,Pie=Xd,Oie=Nie;function Die(t){return Oie(Pie(t).toLowerCase())}var $ie=Die,Mie=$ie,Fie=BF,Lie=Fie(function(t,e,n){return e=e.toLowerCase(),t+(n?Mie(e):e)}),Uie=Lie,jie=dF,Vie=pF,Bie=bF;function zie(t,e){var n={};return e=Bie(e),Vie(t,function(r,i,s){jie(n,e(r,i,s),r)}),n}var qie=zie,AT={exports:{}};AT.exports=function(t){return YF(Wie(t),t)};AT.exports.array=YF;function YF(t,e){var n=t.length,r=new Array(n),i={},s=n,o=Hie(e),a=Kie(t);for(e.forEach(function(u){if(!a.has(u[0])||!a.has(u[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)i[s]||l(t[s],s,new Set);return r;function l(u,c,h){if(h.has(u)){var d;try{d=", node was:"+JSON.stringify(u)}catch{d=""}throw new Error("Cyclic dependency"+d)}if(!a.has(u))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(u));if(!i[c]){i[c]=!0;var f=o.get(u)||new Set;if(f=Array.from(f),c=f.length){h.add(u);do{var p=f[--c];l(p,a.get(p),h)}while(c);h.delete(u)}r[--n]=u}}}function Wie(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var i=t[n];e.add(i[0]),e.add(i[1])}return Array.from(e)}function Hie(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var i=t[n];e.has(i[0])||e.set(i[0],new Set),e.has(i[1])||e.set(i[1],new Set),e.get(i[0]).add(i[1])}return e}function Kie(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}function Gie(t,e=[]){let n=[],r=new Set,i=new Set(e.map(([o,a])=>`${o}-${a}`));function s(o,a){let l=qy.split(o)[0];r.add(l),i.has(`${a}-${l}`)||n.push([a,l])}for(const o in t)if(Lg(t,o)){let a=t[o];r.add(o),Bi.isRef(a)&&a.isSibling?s(a.path,o):cF(a)&&"deps"in a&&a.deps.forEach(l=>s(l,o))}return AT.exports.array(Array.from(r),n).reverse()}function lR(t,e){let n=1/0;return t.some((r,i)=>{var s;if(((s=e.path)==null?void 0:s.indexOf(r))!==-1)return n=i,!0}),n}function XF(t){return(e,n)=>lR(t,e)-lR(t,n)}function Ol(){return Ol=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ol.apply(this,arguments)}let uR=t=>Object.prototype.toString.call(t)==="[object Object]";function Qie(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const Yie=XF([]);class JF extends Fn{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=Yie,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{this.transform(function(r){if(typeof r=="string")try{r=JSON.parse(r)}catch{r=null}return this.isType(r)?r:null}),e&&this.shape(e)})}_typeCheck(e){return uR(e)||typeof e=="function"}_cast(e,n={}){var r;let i=super._cast(e,n);if(i===void 0)return this.getDefault();if(!this._typeCheck(i))return i;let s=this.fields,o=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,a=this._nodes.concat(Object.keys(i).filter(h=>this._nodes.indexOf(h)===-1)),l={},u=Ol({},n,{parent:l,__validating:n.__validating||!1}),c=!1;for(const h of a){let d=s[h],f=Lg(i,h);if(d){let p,g=i[h];u.path=(n.path?`${n.path}.`:"")+h,d=d.resolve({value:g,context:n.context,parent:l});let w="spec"in d?d.spec:void 0,m=w==null?void 0:w.strict;if(w!=null&&w.strip){c=c||h in i;continue}p=!n.__validating||!m?d.cast(i[h],u):i[h],p!==void 0&&(l[h]=p)}else f&&!o&&(l[h]=i[h]);l[h]!==i[h]&&(c=!0)}return c?l:i}_validate(e,n={},r){let i=[],{sync:s,from:o=[],originalValue:a=e,abortEarly:l=this.spec.abortEarly,recursive:u=this.spec.recursive}=n;o=[{schema:this,value:a},...o],n.__validating=!0,n.originalValue=a,n.from=o,super._validate(e,n,(c,h)=>{if(c){if(!Hn.isError(c)||l)return void r(c,h);i.push(c)}if(!u||!uR(h)){r(i[0]||null,h);return}a=a||h;let d=this._nodes.map(f=>(p,g)=>{let w=f.indexOf(".")===-1?(n.path?`${n.path}.`:"")+f:`${n.path||""}["${f}"]`,m=this.fields[f];if(m&&"validate"in m){m.validate(h[f],Ol({},n,{path:w,from:o,strict:!0,parent:h,originalValue:a[f]}),g);return}g(null)});sE({sync:s,tests:d,value:h,errors:i,endEarly:l,sort:this._sortErrors,path:n.path},r)})}clone(e){const n=super.clone(e);return n.fields=Ol({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[i,s]of Object.entries(this.fields)){const o=r[i];o===void 0?r[i]=s:o instanceof Fn&&s instanceof Fn&&(r[i]=s.concat(o))}return n.withMutation(()=>n.shape(r,this._excludedEdges))}getDefaultFromShape(){let e={};return this._nodes.forEach(n=>{const r=this.fields[n];e[n]="default"in r?r.getDefault():void 0}),e}_getDefault(){if("default"in this.spec)return super._getDefault();if(!!this._nodes.length)return this.getDefaultFromShape()}shape(e,n=[]){let r=this.clone(),i=Object.assign(r.fields,e);return r.fields=i,r._sortErrors=XF(Object.keys(i)),n.length&&(Array.isArray(n[0])||(n=[n]),r._excludedEdges=[...r._excludedEdges,...n]),r._nodes=Gie(i,r._excludedEdges),r}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.clone().withMutation(r=>(r.fields={},r.shape(n)))}omit(e){const n=this.clone(),r=n.fields;n.fields={};for(const i of e)delete r[i];return n.withMutation(()=>n.shape(r))}from(e,n,r){let i=qy.getter(e,!0);return this.transform(s=>{if(s==null)return s;let o=s;return Lg(s,e)&&(o=Ol({},s),r||delete o[e],o[n]=i(s)),o})}noUnknown(e=!0,n=rE.noUnknown){typeof e=="string"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(i){if(i==null)return!0;const s=Qie(this.schema,i);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=rE.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>n&&qie(n,(r,i)=>e(i)))}camelCase(){return this.transformKeys(Uie)}snakeCase(){return this.transformKeys(aR)}constantCase(){return this.transformKeys(e=>aR(e).toUpperCase())}describe(){let e=super.describe();return e.fields=TF(this.fields,n=>n.describe()),e}}function ZF(t){return new JF(t)}ZF.prototype=JF.prototype;const cR=oh().required("Required field").email("Invalid email address"),Xie=(t=!1)=>({initialValues:t?{email:"",password:"",passwordConfirm:""}:{email:"",password:""},validationSchema:ZF(t?{email:cR,password:oh().required("Required field").min(8,"Cannot be less than 8 characters").max(32,"Cannot be more than 32 characters").matches(/[a-z]+/,"Must contain at least one lowercase character").matches(/[A-Z]+/,"Must contain at least one uppercase character").matches(/\d+/,"Must contain at least one number"),passwordConfirm:oh().required("Required field").oneOf([wne("password")],"Password must be the same")}:{email:cR,password:oh().required("Required field")})});var hR=Array.isArray,dR=Object.keys,Jie=Object.prototype.hasOwnProperty,Zie=typeof Element<"u";function gE(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=hR(t),r=hR(e),i,s,o;if(n&&r){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!gE(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var a=t instanceof Date,l=e instanceof Date;if(a!=l)return!1;if(a&&l)return t.getTime()==e.getTime();var u=t instanceof RegExp,c=e instanceof RegExp;if(u!=c)return!1;if(u&&c)return t.toString()==e.toString();var h=dR(t);if(s=h.length,s!==dR(e).length)return!1;for(i=s;i--!==0;)if(!Jie.call(e,h[i]))return!1;if(Zie&&t instanceof Element&&e instanceof Element)return t===e;for(i=s;i--!==0;)if(o=h[i],!(o==="_owner"&&t.$$typeof)&&!gE(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}var vs=function(e,n){try{return gE(e,n)}catch(r){if(r.message&&r.message.match(/stack|recursion/i)||r.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",r.name,r.message),!1;throw r}},ese=function(e){return tse(e)&&!nse(e)};function tse(t){return!!t&&typeof t=="object"}function nse(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||sse(t)}var rse=typeof Symbol=="function"&&Symbol.for,ise=rse?Symbol.for("react.element"):60103;function sse(t){return t.$$typeof===ise}function ose(t){return Array.isArray(t)?[]:{}}function zg(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Zh(ose(t),t,e):t}function ase(t,e,n){return t.concat(e).map(function(r){return zg(r,n)})}function lse(t,e,n){var r={};return n.isMergeableObject(t)&&Object.keys(t).forEach(function(i){r[i]=zg(t[i],n)}),Object.keys(e).forEach(function(i){!n.isMergeableObject(e[i])||!t[i]?r[i]=zg(e[i],n):r[i]=Zh(t[i],e[i],n)}),r}function Zh(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||ase,n.isMergeableObject=n.isMergeableObject||ese;var r=Array.isArray(e),i=Array.isArray(t),s=r===i;return s?r?n.arrayMerge(t,e,n):lse(t,e,n):zg(e,n)}Zh.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return Zh(r,i,n)},{})};var mE=Zh,use=typeof global=="object"&&global&&global.Object===Object&&global;const eL=use;var cse=typeof self=="object"&&self&&self.Object===Object&&self,hse=eL||cse||Function("return this")();const Ti=hse;var dse=Ti.Symbol;const Js=dse;var tL=Object.prototype,fse=tL.hasOwnProperty,pse=tL.toString,Sc=Js?Js.toStringTag:void 0;function gse(t){var e=fse.call(t,Sc),n=t[Sc];try{t[Sc]=void 0;var r=!0}catch{}var i=pse.call(t);return r&&(e?t[Sc]=n:delete t[Sc]),i}var mse=Object.prototype,yse=mse.toString;function vse(t){return yse.call(t)}var _se="[object Null]",wse="[object Undefined]",fR=Js?Js.toStringTag:void 0;function Ya(t){return t==null?t===void 0?wse:_se:fR&&fR in Object(t)?gse(t):vse(t)}function nL(t,e){return function(n){return t(e(n))}}var Ese=nL(Object.getPrototypeOf,Object);const RT=Ese;function Xa(t){return t!=null&&typeof t=="object"}var Sse="[object Object]",bse=Function.prototype,Tse=Object.prototype,rL=bse.toString,Ise=Tse.hasOwnProperty,Cse=rL.call(Object);function pR(t){if(!Xa(t)||Ya(t)!=Sse)return!1;var e=RT(t);if(e===null)return!0;var n=Ise.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&rL.call(n)==Cse}function kse(){this.__data__=[],this.size=0}function iL(t,e){return t===e||t!==t&&e!==e}function Wy(t,e){for(var n=t.length;n--;)if(iL(t[n][0],e))return n;return-1}var Ase=Array.prototype,Rse=Ase.splice;function xse(t){var e=this.__data__,n=Wy(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Rse.call(e,n,1),--this.size,!0}function Nse(t){var e=this.__data__,n=Wy(e,t);return n<0?void 0:e[n][1]}function Pse(t){return Wy(this.__data__,t)>-1}function Ose(t,e){var n=this.__data__,r=Wy(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function as(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}as.prototype.clear=kse;as.prototype.delete=xse;as.prototype.get=Nse;as.prototype.has=Pse;as.prototype.set=Ose;function Dse(){this.__data__=new as,this.size=0}function $se(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Mse(t){return this.__data__.get(t)}function Fse(t){return this.__data__.has(t)}function Jd(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Lse="[object AsyncFunction]",Use="[object Function]",jse="[object GeneratorFunction]",Vse="[object Proxy]";function sL(t){if(!Jd(t))return!1;var e=Ya(t);return e==Use||e==jse||e==Lse||e==Vse}var Bse=Ti["__core-js_shared__"];const Y_=Bse;var gR=function(){var t=/[^.]+$/.exec(Y_&&Y_.keys&&Y_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function zse(t){return!!gR&&gR in t}var qse=Function.prototype,Wse=qse.toString;function Ja(t){if(t!=null){try{return Wse.call(t)}catch{}try{return t+""}catch{}}return""}var Hse=/[\\^$.*+?()[\]{}|]/g,Kse=/^\[object .+?Constructor\]$/,Gse=Function.prototype,Qse=Object.prototype,Yse=Gse.toString,Xse=Qse.hasOwnProperty,Jse=RegExp("^"+Yse.call(Xse).replace(Hse,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zse(t){if(!Jd(t)||zse(t))return!1;var e=sL(t)?Jse:Kse;return e.test(Ja(t))}function eoe(t,e){return t==null?void 0:t[e]}function Za(t,e){var n=eoe(t,e);return Zse(n)?n:void 0}var toe=Za(Ti,"Map");const ed=toe;var noe=Za(Object,"create");const td=noe;function roe(){this.__data__=td?td(null):{},this.size=0}function ioe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var soe="__lodash_hash_undefined__",ooe=Object.prototype,aoe=ooe.hasOwnProperty;function loe(t){var e=this.__data__;if(td){var n=e[t];return n===soe?void 0:n}return aoe.call(e,t)?e[t]:void 0}var uoe=Object.prototype,coe=uoe.hasOwnProperty;function hoe(t){var e=this.__data__;return td?e[t]!==void 0:coe.call(e,t)}var doe="__lodash_hash_undefined__";function foe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=td&&e===void 0?doe:e,this}function _a(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_a.prototype.clear=roe;_a.prototype.delete=ioe;_a.prototype.get=loe;_a.prototype.has=hoe;_a.prototype.set=foe;function poe(){this.size=0,this.__data__={hash:new _a,map:new(ed||as),string:new _a}}function goe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Hy(t,e){var n=t.__data__;return goe(e)?n[typeof e=="string"?"string":"hash"]:n.map}function moe(t){var e=Hy(this,t).delete(t);return this.size-=e?1:0,e}function yoe(t){return Hy(this,t).get(t)}function voe(t){return Hy(this,t).has(t)}function _oe(t,e){var n=Hy(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function mo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}mo.prototype.clear=poe;mo.prototype.delete=moe;mo.prototype.get=yoe;mo.prototype.has=voe;mo.prototype.set=_oe;var woe=200;function Eoe(t,e){var n=this.__data__;if(n instanceof as){var r=n.__data__;if(!ed||r.length<woe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new mo(r)}return n.set(t,e),this.size=n.size,this}function Qu(t){var e=this.__data__=new as(t);this.size=e.size}Qu.prototype.clear=Dse;Qu.prototype.delete=$se;Qu.prototype.get=Mse;Qu.prototype.has=Fse;Qu.prototype.set=Eoe;function Soe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var boe=function(){try{var t=Za(Object,"defineProperty");return t({},"",{}),t}catch{}}();const mR=boe;function oL(t,e,n){e=="__proto__"&&mR?mR(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Toe=Object.prototype,Ioe=Toe.hasOwnProperty;function aL(t,e,n){var r=t[e];(!(Ioe.call(t,e)&&iL(r,n))||n===void 0&&!(e in t))&&oL(t,e,n)}function Ky(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?oL(n,a,l):aL(n,a,l)}return n}function Coe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var koe="[object Arguments]";function yR(t){return Xa(t)&&Ya(t)==koe}var lL=Object.prototype,Aoe=lL.hasOwnProperty,Roe=lL.propertyIsEnumerable,xoe=yR(function(){return arguments}())?yR:function(t){return Xa(t)&&Aoe.call(t,"callee")&&!Roe.call(t,"callee")};const Noe=xoe;var Poe=Array.isArray;const Zd=Poe;function Ooe(){return!1}var uL=typeof Gn=="object"&&Gn&&!Gn.nodeType&&Gn,vR=uL&&typeof Qn=="object"&&Qn&&!Qn.nodeType&&Qn,Doe=vR&&vR.exports===uL,_R=Doe?Ti.Buffer:void 0,$oe=_R?_R.isBuffer:void 0,Moe=$oe||Ooe;const cL=Moe;var Foe=9007199254740991,Loe=/^(?:0|[1-9]\d*)$/;function Uoe(t,e){var n=typeof t;return e=e==null?Foe:e,!!e&&(n=="number"||n!="symbol"&&Loe.test(t))&&t>-1&&t%1==0&&t<e}var joe=9007199254740991;function hL(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=joe}var Voe="[object Arguments]",Boe="[object Array]",zoe="[object Boolean]",qoe="[object Date]",Woe="[object Error]",Hoe="[object Function]",Koe="[object Map]",Goe="[object Number]",Qoe="[object Object]",Yoe="[object RegExp]",Xoe="[object Set]",Joe="[object String]",Zoe="[object WeakMap]",eae="[object ArrayBuffer]",tae="[object DataView]",nae="[object Float32Array]",rae="[object Float64Array]",iae="[object Int8Array]",sae="[object Int16Array]",oae="[object Int32Array]",aae="[object Uint8Array]",lae="[object Uint8ClampedArray]",uae="[object Uint16Array]",cae="[object Uint32Array]",xe={};xe[nae]=xe[rae]=xe[iae]=xe[sae]=xe[oae]=xe[aae]=xe[lae]=xe[uae]=xe[cae]=!0;xe[Voe]=xe[Boe]=xe[eae]=xe[zoe]=xe[tae]=xe[qoe]=xe[Woe]=xe[Hoe]=xe[Koe]=xe[Goe]=xe[Qoe]=xe[Yoe]=xe[Xoe]=xe[Joe]=xe[Zoe]=!1;function hae(t){return Xa(t)&&hL(t.length)&&!!xe[Ya(t)]}function xT(t){return function(e){return t(e)}}var dL=typeof Gn=="object"&&Gn&&!Gn.nodeType&&Gn,ah=dL&&typeof Qn=="object"&&Qn&&!Qn.nodeType&&Qn,dae=ah&&ah.exports===dL,X_=dae&&eL.process,fae=function(){try{var t=ah&&ah.require&&ah.require("util").types;return t||X_&&X_.binding&&X_.binding("util")}catch{}}();const fu=fae;var wR=fu&&fu.isTypedArray,pae=wR?xT(wR):hae;const gae=pae;var mae=Object.prototype,yae=mae.hasOwnProperty;function fL(t,e){var n=Zd(t),r=!n&&Noe(t),i=!n&&!r&&cL(t),s=!n&&!r&&!i&&gae(t),o=n||r||i||s,a=o?Coe(t.length,String):[],l=a.length;for(var u in t)(e||yae.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Uoe(u,l)))&&a.push(u);return a}var vae=Object.prototype;function NT(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||vae;return t===n}var _ae=nL(Object.keys,Object);const wae=_ae;var Eae=Object.prototype,Sae=Eae.hasOwnProperty;function bae(t){if(!NT(t))return wae(t);var e=[];for(var n in Object(t))Sae.call(t,n)&&n!="constructor"&&e.push(n);return e}function pL(t){return t!=null&&hL(t.length)&&!sL(t)}function PT(t){return pL(t)?fL(t):bae(t)}function Tae(t,e){return t&&Ky(e,PT(e),t)}function Iae(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Cae=Object.prototype,kae=Cae.hasOwnProperty;function Aae(t){if(!Jd(t))return Iae(t);var e=NT(t),n=[];for(var r in t)r=="constructor"&&(e||!kae.call(t,r))||n.push(r);return n}function OT(t){return pL(t)?fL(t,!0):Aae(t)}function Rae(t,e){return t&&Ky(e,OT(e),t)}var gL=typeof Gn=="object"&&Gn&&!Gn.nodeType&&Gn,ER=gL&&typeof Qn=="object"&&Qn&&!Qn.nodeType&&Qn,xae=ER&&ER.exports===gL,SR=xae?Ti.Buffer:void 0,bR=SR?SR.allocUnsafe:void 0;function Nae(t,e){if(e)return t.slice();var n=t.length,r=bR?bR(n):new t.constructor(n);return t.copy(r),r}function mL(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function Pae(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function yL(){return[]}var Oae=Object.prototype,Dae=Oae.propertyIsEnumerable,TR=Object.getOwnPropertySymbols,$ae=TR?function(t){return t==null?[]:(t=Object(t),Pae(TR(t),function(e){return Dae.call(t,e)}))}:yL;const DT=$ae;function Mae(t,e){return Ky(t,DT(t),e)}function vL(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Fae=Object.getOwnPropertySymbols,Lae=Fae?function(t){for(var e=[];t;)vL(e,DT(t)),t=RT(t);return e}:yL;const _L=Lae;function Uae(t,e){return Ky(t,_L(t),e)}function wL(t,e,n){var r=e(t);return Zd(t)?r:vL(r,n(t))}function jae(t){return wL(t,PT,DT)}function Vae(t){return wL(t,OT,_L)}var Bae=Za(Ti,"DataView");const yE=Bae;var zae=Za(Ti,"Promise");const vE=zae;var qae=Za(Ti,"Set");const _E=qae;var Wae=Za(Ti,"WeakMap");const wE=Wae;var IR="[object Map]",Hae="[object Object]",CR="[object Promise]",kR="[object Set]",AR="[object WeakMap]",RR="[object DataView]",Kae=Ja(yE),Gae=Ja(ed),Qae=Ja(vE),Yae=Ja(_E),Xae=Ja(wE),Mo=Ya;(yE&&Mo(new yE(new ArrayBuffer(1)))!=RR||ed&&Mo(new ed)!=IR||vE&&Mo(vE.resolve())!=CR||_E&&Mo(new _E)!=kR||wE&&Mo(new wE)!=AR)&&(Mo=function(t){var e=Ya(t),n=e==Hae?t.constructor:void 0,r=n?Ja(n):"";if(r)switch(r){case Kae:return RR;case Gae:return IR;case Qae:return CR;case Yae:return kR;case Xae:return AR}return e});const $T=Mo;var Jae=Object.prototype,Zae=Jae.hasOwnProperty;function ele(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Zae.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var tle=Ti.Uint8Array;const xR=tle;function MT(t){var e=new t.constructor(t.byteLength);return new xR(e).set(new xR(t)),e}function nle(t,e){var n=e?MT(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var rle=/\w*$/;function ile(t){var e=new t.constructor(t.source,rle.exec(t));return e.lastIndex=t.lastIndex,e}var NR=Js?Js.prototype:void 0,PR=NR?NR.valueOf:void 0;function sle(t){return PR?Object(PR.call(t)):{}}function ole(t,e){var n=e?MT(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var ale="[object Boolean]",lle="[object Date]",ule="[object Map]",cle="[object Number]",hle="[object RegExp]",dle="[object Set]",fle="[object String]",ple="[object Symbol]",gle="[object ArrayBuffer]",mle="[object DataView]",yle="[object Float32Array]",vle="[object Float64Array]",_le="[object Int8Array]",wle="[object Int16Array]",Ele="[object Int32Array]",Sle="[object Uint8Array]",ble="[object Uint8ClampedArray]",Tle="[object Uint16Array]",Ile="[object Uint32Array]";function Cle(t,e,n){var r=t.constructor;switch(e){case gle:return MT(t);case ale:case lle:return new r(+t);case mle:return nle(t,n);case yle:case vle:case _le:case wle:case Ele:case Sle:case ble:case Tle:case Ile:return ole(t,n);case ule:return new r;case cle:case fle:return new r(t);case hle:return ile(t);case dle:return new r;case ple:return sle(t)}}var OR=Object.create,kle=function(){function t(){}return function(e){if(!Jd(e))return{};if(OR)return OR(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const Ale=kle;function Rle(t){return typeof t.constructor=="function"&&!NT(t)?Ale(RT(t)):{}}var xle="[object Map]";function Nle(t){return Xa(t)&&$T(t)==xle}var DR=fu&&fu.isMap,Ple=DR?xT(DR):Nle;const Ole=Ple;var Dle="[object Set]";function $le(t){return Xa(t)&&$T(t)==Dle}var $R=fu&&fu.isSet,Mle=$R?xT($R):$le;const Fle=Mle;var Lle=1,Ule=2,jle=4,EL="[object Arguments]",Vle="[object Array]",Ble="[object Boolean]",zle="[object Date]",qle="[object Error]",SL="[object Function]",Wle="[object GeneratorFunction]",Hle="[object Map]",Kle="[object Number]",bL="[object Object]",Gle="[object RegExp]",Qle="[object Set]",Yle="[object String]",Xle="[object Symbol]",Jle="[object WeakMap]",Zle="[object ArrayBuffer]",eue="[object DataView]",tue="[object Float32Array]",nue="[object Float64Array]",rue="[object Int8Array]",iue="[object Int16Array]",sue="[object Int32Array]",oue="[object Uint8Array]",aue="[object Uint8ClampedArray]",lue="[object Uint16Array]",uue="[object Uint32Array]",be={};be[EL]=be[Vle]=be[Zle]=be[eue]=be[Ble]=be[zle]=be[tue]=be[nue]=be[rue]=be[iue]=be[sue]=be[Hle]=be[Kle]=be[bL]=be[Gle]=be[Qle]=be[Yle]=be[Xle]=be[oue]=be[aue]=be[lue]=be[uue]=!0;be[qle]=be[SL]=be[Jle]=!1;function lh(t,e,n,r,i,s){var o,a=e&Lle,l=e&Ule,u=e&jle;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!Jd(t))return t;var c=Zd(t);if(c){if(o=ele(t),!a)return mL(t,o)}else{var h=$T(t),d=h==SL||h==Wle;if(cL(t))return Nae(t,a);if(h==bL||h==EL||d&&!i){if(o=l||d?{}:Rle(t),!a)return l?Uae(t,Rae(o,t)):Mae(t,Tae(o,t))}else{if(!be[h])return i?t:{};o=Cle(t,h,a)}}s||(s=new Qu);var f=s.get(t);if(f)return f;s.set(t,o),Fle(t)?t.forEach(function(w){o.add(lh(w,e,n,w,t,s))}):Ole(t)&&t.forEach(function(w,m){o.set(m,lh(w,e,n,m,t,s))});var p=u?l?Vae:jae:l?OT:PT,g=c?void 0:p(t);return Soe(g||t,function(w,m){g&&(m=w,w=t[m]),aL(o,m,lh(w,e,n,m,t,s))}),o}var cue=4;function MR(t){return lh(t,cue)}function TL(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var hue="[object Symbol]";function FT(t){return typeof t=="symbol"||Xa(t)&&Ya(t)==hue}var due="Expected a function";function LT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(due);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(LT.Cache||mo),n}LT.Cache=mo;var fue=500;function pue(t){var e=LT(t,function(r){return n.size===fue&&n.clear(),r}),n=e.cache;return e}var gue=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mue=/\\(\\)?/g,yue=pue(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(gue,function(n,r,i,s){e.push(i?s.replace(mue,"$1"):r||n)}),e});const vue=yue;var _ue=1/0;function wue(t){if(typeof t=="string"||FT(t))return t;var e=t+"";return e=="0"&&1/t==-_ue?"-0":e}var Eue=1/0,FR=Js?Js.prototype:void 0,LR=FR?FR.toString:void 0;function IL(t){if(typeof t=="string")return t;if(Zd(t))return TL(t,IL)+"";if(FT(t))return LR?LR.call(t):"";var e=t+"";return e=="0"&&1/t==-Eue?"-0":e}function Sue(t){return t==null?"":IL(t)}function CL(t){return Zd(t)?TL(t,wue):FT(t)?[t]:mL(vue(Sue(t)))}var bue=!0;function Tue(t,e){if(!bue){if(t)return;var n="Warning: "+e;typeof console<"u"&&console.warn(n);try{throw Error(n)}catch{}}}var Iue=1,Cue=4;function kue(t){return lh(t,Iue|Cue)}function st(){return st=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st.apply(this,arguments)}function Aue(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function UT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function UR(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var jR=function(e){return Array.isArray(e)&&e.length===0},ur=function(e){return typeof e=="function"},Gy=function(e){return e!==null&&typeof e=="object"},Rue=function(e){return String(Math.floor(Number(e)))===e},J_=function(e){return Object.prototype.toString.call(e)==="[object String]"},xue=function(e){return A.exports.Children.count(e)===0},Z_=function(e){return Gy(e)&&ur(e.then)};function Ut(t,e,n,r){r===void 0&&(r=0);for(var i=CL(e);t&&r<i.length;)t=t[i[r++]];return t===void 0?n:t}function ui(t,e,n){for(var r=MR(t),i=r,s=0,o=CL(e);s<o.length-1;s++){var a=o[s],l=Ut(t,o.slice(0,s+1));if(l&&(Gy(l)||Array.isArray(l)))i=i[a]=MR(l);else{var u=o[s+1];i=i[a]=Rue(u)&&Number(u)>=0?[]:{}}}return(s===0?t:i)[o[s]]===n?t:(n===void 0?delete i[o[s]]:i[o[s]]=n,s===0&&n===void 0&&delete r[o[s]],r)}function kL(t,e,n,r){n===void 0&&(n=new WeakMap),r===void 0&&(r={});for(var i=0,s=Object.keys(t);i<s.length;i++){var o=s[i],a=t[o];Gy(a)?n.get(a)||(n.set(a,!0),r[o]=Array.isArray(a)?[]:{},kL(a,e,n,r[o])):r[o]=e}return r}var Qy=A.exports.createContext(void 0);Qy.displayName="FormikContext";Qy.Provider;Qy.Consumer;function Nue(){var t=A.exports.useContext(Qy);return t||Tue(!1),t}function Pue(t,e){switch(e.type){case"SET_VALUES":return st({},t,{values:e.payload});case"SET_TOUCHED":return st({},t,{touched:e.payload});case"SET_ERRORS":return vs(t.errors,e.payload)?t:st({},t,{errors:e.payload});case"SET_STATUS":return st({},t,{status:e.payload});case"SET_ISSUBMITTING":return st({},t,{isSubmitting:e.payload});case"SET_ISVALIDATING":return st({},t,{isValidating:e.payload});case"SET_FIELD_VALUE":return st({},t,{values:ui(t.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return st({},t,{touched:ui(t.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return st({},t,{errors:ui(t.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return st({},t,e.payload);case"SET_FORMIK_STATE":return e.payload(t);case"SUBMIT_ATTEMPT":return st({},t,{touched:kL(t.values,!0),isSubmitting:!0,submitCount:t.submitCount+1});case"SUBMIT_FAILURE":return st({},t,{isSubmitting:!1});case"SUBMIT_SUCCESS":return st({},t,{isSubmitting:!1});default:return t}}var ko={},rp={};function Oue(t){var e=t.validateOnChange,n=e===void 0?!0:e,r=t.validateOnBlur,i=r===void 0?!0:r,s=t.validateOnMount,o=s===void 0?!1:s,a=t.isInitialValid,l=t.enableReinitialize,u=l===void 0?!1:l,c=t.onSubmit,h=UT(t,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),d=st({validateOnChange:n,validateOnBlur:i,validateOnMount:o,onSubmit:c},h),f=A.exports.useRef(d.initialValues),p=A.exports.useRef(d.initialErrors||ko),g=A.exports.useRef(d.initialTouched||rp),w=A.exports.useRef(d.initialStatus),m=A.exports.useRef(!1),y=A.exports.useRef({});A.exports.useEffect(function(){return m.current=!0,function(){m.current=!1}},[]);var v=A.exports.useReducer(Pue,{values:d.initialValues,errors:d.initialErrors||ko,touched:d.initialTouched||rp,status:d.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),_=v[0],E=v[1],T=A.exports.useCallback(function(I,B){return new Promise(function(q,H){var se=d.validate(I,B);se==null?q(ko):Z_(se)?se.then(function(me){q(me||ko)},function(me){H(me)}):q(se)})},[d.validate]),C=A.exports.useCallback(function(I,B){var q=d.validationSchema,H=ur(q)?q(B):q,se=B&&H.validateAt?H.validateAt(B,I):$ue(I,H);return new Promise(function(me,mt){se.then(function(){me(ko)},function(Ci){Ci.name==="ValidationError"?me(Due(Ci)):mt(Ci)})})},[d.validationSchema]),k=A.exports.useCallback(function(I,B){return new Promise(function(q){return q(y.current[I].validate(B))})},[]),z=A.exports.useCallback(function(I){var B=Object.keys(y.current).filter(function(H){return ur(y.current[H].validate)}),q=B.length>0?B.map(function(H){return k(H,Ut(I,H))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(q).then(function(H){return H.reduce(function(se,me,mt){return me==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||me&&(se=ui(se,B[mt],me)),se},{})})},[k]),W=A.exports.useCallback(function(I){return Promise.all([z(I),d.validationSchema?C(I):{},d.validate?T(I):{}]).then(function(B){var q=B[0],H=B[1],se=B[2],me=mE.all([q,H,se],{arrayMerge:Mue});return me})},[d.validate,d.validationSchema,z,T,C]),le=lr(function(I){return I===void 0&&(I=_.values),E({type:"SET_ISVALIDATING",payload:!0}),W(I).then(function(B){return m.current&&(E({type:"SET_ISVALIDATING",payload:!1}),E({type:"SET_ERRORS",payload:B})),B})});A.exports.useEffect(function(){o&&m.current===!0&&vs(f.current,d.initialValues)&&le(f.current)},[o,le]);var gt=A.exports.useCallback(function(I){var B=I&&I.values?I.values:f.current,q=I&&I.errors?I.errors:p.current?p.current:d.initialErrors||{},H=I&&I.touched?I.touched:g.current?g.current:d.initialTouched||{},se=I&&I.status?I.status:w.current?w.current:d.initialStatus;f.current=B,p.current=q,g.current=H,w.current=se;var me=function(){E({type:"RESET_FORM",payload:{isSubmitting:!!I&&!!I.isSubmitting,errors:q,touched:H,status:se,values:B,isValidating:!!I&&!!I.isValidating,submitCount:!!I&&!!I.submitCount&&typeof I.submitCount=="number"?I.submitCount:0}})};if(d.onReset){var mt=d.onReset(_.values,_C);Z_(mt)?mt.then(me):me()}else me()},[d.initialErrors,d.initialStatus,d.initialTouched]);A.exports.useEffect(function(){m.current===!0&&!vs(f.current,d.initialValues)&&(u&&(f.current=d.initialValues,gt()),o&&le(f.current))},[u,d.initialValues,gt,o,le]),A.exports.useEffect(function(){u&&m.current===!0&&!vs(p.current,d.initialErrors)&&(p.current=d.initialErrors||ko,E({type:"SET_ERRORS",payload:d.initialErrors||ko}))},[u,d.initialErrors]),A.exports.useEffect(function(){u&&m.current===!0&&!vs(g.current,d.initialTouched)&&(g.current=d.initialTouched||rp,E({type:"SET_TOUCHED",payload:d.initialTouched||rp}))},[u,d.initialTouched]),A.exports.useEffect(function(){u&&m.current===!0&&!vs(w.current,d.initialStatus)&&(w.current=d.initialStatus,E({type:"SET_STATUS",payload:d.initialStatus}))},[u,d.initialStatus,d.initialTouched]);var ar=lr(function(I){if(y.current[I]&&ur(y.current[I].validate)){var B=Ut(_.values,I),q=y.current[I].validate(B);return Z_(q)?(E({type:"SET_ISVALIDATING",payload:!0}),q.then(function(H){return H}).then(function(H){E({type:"SET_FIELD_ERROR",payload:{field:I,value:H}}),E({type:"SET_ISVALIDATING",payload:!1})})):(E({type:"SET_FIELD_ERROR",payload:{field:I,value:q}}),Promise.resolve(q))}else if(d.validationSchema)return E({type:"SET_ISVALIDATING",payload:!0}),C(_.values,I).then(function(H){return H}).then(function(H){E({type:"SET_FIELD_ERROR",payload:{field:I,value:H[I]}}),E({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Ii=A.exports.useCallback(function(I,B){var q=B.validate;y.current[I]={validate:q}},[]),Df=A.exports.useCallback(function(I){delete y.current[I]},[]),ul=lr(function(I,B){E({type:"SET_TOUCHED",payload:I});var q=B===void 0?i:B;return q?le(_.values):Promise.resolve()}),cl=A.exports.useCallback(function(I){E({type:"SET_ERRORS",payload:I})},[]),L=lr(function(I,B){var q=ur(I)?I(_.values):I;E({type:"SET_VALUES",payload:q});var H=B===void 0?n:B;return H?le(q):Promise.resolve()}),X=A.exports.useCallback(function(I,B){E({type:"SET_FIELD_ERROR",payload:{field:I,value:B}})},[]),J=lr(function(I,B,q){E({type:"SET_FIELD_VALUE",payload:{field:I,value:B}});var H=q===void 0?n:q;return H?le(ui(_.values,I,B)):Promise.resolve()}),De=A.exports.useCallback(function(I,B){var q=B,H=I,se;if(!J_(I)){I.persist&&I.persist();var me=I.target?I.target:I.currentTarget,mt=me.type,Ci=me.name,n_=me.id,r_=me.value,f4=me.checked,iCe=me.outerHTML,wC=me.options,p4=me.multiple;q=B||Ci||n_,H=/number|range/.test(mt)?(se=parseFloat(r_),isNaN(se)?"":se):/checkbox/.test(mt)?Lue(Ut(_.values,q),f4,r_):wC&&p4?Fue(wC):r_}q&&J(q,H)},[J,_.values]),Ke=lr(function(I){if(J_(I))return function(B){return De(B,I)};De(I)}),Cr=lr(function(I,B,q){B===void 0&&(B=!0),E({type:"SET_FIELD_TOUCHED",payload:{field:I,value:B}});var H=q===void 0?i:q;return H?le(_.values):Promise.resolve()}),Kr=A.exports.useCallback(function(I,B){I.persist&&I.persist();var q=I.target,H=q.name,se=q.id,me=q.outerHTML,mt=B||H||se;Cr(mt,!0)},[Cr]),Io=lr(function(I){if(J_(I))return function(B){return Kr(B,I)};Kr(I)}),Gr=A.exports.useCallback(function(I){ur(I)?E({type:"SET_FORMIK_STATE",payload:I}):E({type:"SET_FORMIK_STATE",payload:function(){return I}})},[]),Co=A.exports.useCallback(function(I){E({type:"SET_STATUS",payload:I})},[]),vC=A.exports.useCallback(function(I){E({type:"SET_ISSUBMITTING",payload:I})},[]),e_=lr(function(){return E({type:"SUBMIT_ATTEMPT"}),le().then(function(I){var B=I instanceof Error,q=!B&&Object.keys(I).length===0;if(q){var H;try{if(H=o4(),H===void 0)return}catch(se){throw se}return Promise.resolve(H).then(function(se){return m.current&&E({type:"SUBMIT_SUCCESS"}),se}).catch(function(se){if(m.current)throw E({type:"SUBMIT_FAILURE"}),se})}else if(m.current&&(E({type:"SUBMIT_FAILURE"}),B))throw I})}),s4=lr(function(I){I&&I.preventDefault&&ur(I.preventDefault)&&I.preventDefault(),I&&I.stopPropagation&&ur(I.stopPropagation)&&I.stopPropagation(),e_().catch(function(B){console.warn("Warning: An unhandled error was caught from submitForm()",B)})}),_C={resetForm:gt,validateForm:le,validateField:ar,setErrors:cl,setFieldError:X,setFieldTouched:Cr,setFieldValue:J,setStatus:Co,setSubmitting:vC,setTouched:ul,setValues:L,setFormikState:Gr,submitForm:e_},o4=lr(function(){return c(_.values,_C)}),a4=lr(function(I){I&&I.preventDefault&&ur(I.preventDefault)&&I.preventDefault(),I&&I.stopPropagation&&ur(I.stopPropagation)&&I.stopPropagation(),gt()}),l4=A.exports.useCallback(function(I){return{value:Ut(_.values,I),error:Ut(_.errors,I),touched:!!Ut(_.touched,I),initialValue:Ut(f.current,I),initialTouched:!!Ut(g.current,I),initialError:Ut(p.current,I)}},[_.errors,_.touched,_.values]),u4=A.exports.useCallback(function(I){return{setValue:function(q,H){return J(I,q,H)},setTouched:function(q,H){return Cr(I,q,H)},setError:function(q){return X(I,q)}}},[J,Cr,X]),c4=A.exports.useCallback(function(I){var B=Gy(I),q=B?I.name:I,H=Ut(_.values,q),se={name:q,value:H,onChange:Ke,onBlur:Io};if(B){var me=I.type,mt=I.value,Ci=I.as,n_=I.multiple;me==="checkbox"?mt===void 0?se.checked=!!H:(se.checked=!!(Array.isArray(H)&&~H.indexOf(mt)),se.value=mt):me==="radio"?(se.checked=H===mt,se.value=mt):Ci==="select"&&n_&&(se.value=se.value||[],se.multiple=!0)}return se},[Io,Ke,_.values]),t_=A.exports.useMemo(function(){return!vs(f.current,_.values)},[f.current,_.values]),h4=A.exports.useMemo(function(){return typeof a<"u"?t_?_.errors&&Object.keys(_.errors).length===0:a!==!1&&ur(a)?a(d):a:_.errors&&Object.keys(_.errors).length===0},[a,t_,_.errors,d]),d4=st({},_,{initialValues:f.current,initialErrors:p.current,initialTouched:g.current,initialStatus:w.current,handleBlur:Io,handleChange:Ke,handleReset:a4,handleSubmit:s4,resetForm:gt,setErrors:cl,setFormikState:Gr,setFieldTouched:Cr,setFieldValue:J,setFieldError:X,setStatus:Co,setSubmitting:vC,setTouched:ul,setValues:L,submitForm:e_,validateForm:le,validateField:ar,isValid:h4,dirty:t_,unregisterField:Df,registerField:Ii,getFieldProps:c4,getFieldMeta:l4,getFieldHelpers:u4,validateOnBlur:i,validateOnChange:n,validateOnMount:o});return d4}function Due(t){var e={};if(t.inner){if(t.inner.length===0)return ui(e,t.path,t.message);for(var i=t.inner,n=Array.isArray(i),r=0,i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if(r=i.next(),r.done)break;s=r.value}var o=s;Ut(e,o.path)||(e=ui(e,o.path,o.message))}}return e}function $ue(t,e,n,r){n===void 0&&(n=!1),r===void 0&&(r={});var i=EE(t);return e[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}function EE(t){var e=Array.isArray(t)?[]:{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=String(n);Array.isArray(t[r])===!0?e[r]=t[r].map(function(i){return Array.isArray(i)===!0||pR(i)?EE(i):i!==""?i:void 0}):pR(t[r])?e[r]=EE(t[r]):e[r]=t[r]!==""?t[r]:void 0}return e}function Mue(t,e,n){var r=t.slice();return e.forEach(function(s,o){if(typeof r[o]>"u"){var a=n.clone!==!1,l=a&&n.isMergeableObject(s);r[o]=l?mE(Array.isArray(s)?[]:{},s,n):s}else n.isMergeableObject(s)?r[o]=mE(t[o],s,n):t.indexOf(s)===-1&&r.push(s)}),r}function Fue(t){return Array.from(t).filter(function(e){return e.selected}).map(function(e){return e.value})}function Lue(t,e,n){if(typeof t=="boolean")return Boolean(e);var r=[],i=!1,s=-1;if(Array.isArray(t))r=t,s=t.indexOf(n),i=s>=0;else if(!n||n=="true"||n=="false")return Boolean(e);return e&&n&&!i?r.concat(n):i?r.slice(0,s).concat(r.slice(s+1)):r}var Uue=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?A.exports.useLayoutEffect:A.exports.useEffect;function lr(t){var e=A.exports.useRef(t);return Uue(function(){e.current=t}),A.exports.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current.apply(void 0,r)},[])}var jue=A.exports.forwardRef(function(t,e){var n=t.action,r=UT(t,["action"]),i=n!=null?n:"#",s=Nue(),o=s.handleReset,a=s.handleSubmit;return A.exports.createElement("form",Object.assign({onSubmit:a,ref:e,onReset:o,action:i},r))});jue.displayName="Form";var Vue=function(e,n,r){var i=pu(e),s=i[n];return i.splice(n,1),i.splice(r,0,s),i},Bue=function(e,n,r){var i=pu(e),s=i[n];return i[n]=i[r],i[r]=s,i},ew=function(e,n,r){var i=pu(e);return i.splice(n,0,r),i},zue=function(e,n,r){var i=pu(e);return i[n]=r,i},pu=function(e){if(e){if(Array.isArray(e))return[].concat(e);var n=Object.keys(e).map(function(r){return parseInt(r)}).reduce(function(r,i){return i>r?i:r},0);return Array.from(st({},e,{length:n+1}))}else return[]},que=function(t){Aue(e,t);function e(r){var i;return i=t.call(this,r)||this,i.updateArrayField=function(s,o,a){var l=i.props,u=l.name,c=l.formik.setFormikState;c(function(h){var d=typeof a=="function"?a:s,f=typeof o=="function"?o:s,p=ui(h.values,u,s(Ut(h.values,u))),g=a?d(Ut(h.errors,u)):void 0,w=o?f(Ut(h.touched,u)):void 0;return jR(g)&&(g=void 0),jR(w)&&(w=void 0),st({},h,{values:p,errors:a?ui(h.errors,u,g):h.errors,touched:o?ui(h.touched,u,w):h.touched})})},i.push=function(s){return i.updateArrayField(function(o){return[].concat(pu(o),[kue(s)])},!1,!1)},i.handlePush=function(s){return function(){return i.push(s)}},i.swap=function(s,o){return i.updateArrayField(function(a){return Bue(a,s,o)},!0,!0)},i.handleSwap=function(s,o){return function(){return i.swap(s,o)}},i.move=function(s,o){return i.updateArrayField(function(a){return Vue(a,s,o)},!0,!0)},i.handleMove=function(s,o){return function(){return i.move(s,o)}},i.insert=function(s,o){return i.updateArrayField(function(a){return ew(a,s,o)},function(a){return ew(a,s,null)},function(a){return ew(a,s,null)})},i.handleInsert=function(s,o){return function(){return i.insert(s,o)}},i.replace=function(s,o){return i.updateArrayField(function(a){return zue(a,s,o)},!1,!1)},i.handleReplace=function(s,o){return function(){return i.replace(s,o)}},i.unshift=function(s){var o=-1;return i.updateArrayField(function(a){var l=a?[s].concat(a):[s];return o<0&&(o=l.length),l},function(a){var l=a?[null].concat(a):[null];return o<0&&(o=l.length),l},function(a){var l=a?[null].concat(a):[null];return o<0&&(o=l.length),l}),o},i.handleUnshift=function(s){return function(){return i.unshift(s)}},i.handleRemove=function(s){return function(){return i.remove(s)}},i.handlePop=function(){return function(){return i.pop()}},i.remove=i.remove.bind(UR(i)),i.pop=i.pop.bind(UR(i)),i}var n=e.prototype;return n.componentDidUpdate=function(i){this.props.validateOnChange&&this.props.formik.validateOnChange&&!vs(Ut(i.formik.values,i.name),Ut(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(i){var s;return this.updateArrayField(function(o){var a=o?pu(o):[];return s||(s=a[i]),ur(a.splice)&&a.splice(i,1),a},!0,!0),s},n.pop=function(){var i;return this.updateArrayField(function(s){var o=s;return i||(i=o&&o.pop&&o.pop()),o},!0,!0),i},n.render=function(){var i={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},s=this.props,o=s.component,a=s.render,l=s.children,u=s.name,c=s.formik,h=UT(c,["validate","validationSchema"]),d=st({},i,{form:h,name:u});return o?A.exports.createElement(o,d):a?a(d):l?typeof l=="function"?l(d):xue(l)?null:A.exports.Children.only(l):null},e}(A.exports.Component);que.defaultProps={validateOnChange:!0};const Wue=t=>{const{className:e,columns:n=1,children:r}=t;return R("div",{className:Qt(e,"grid",{[`grid--${n}`]:n>1}),children:r})},ip=t=>{const{className:e,children:n,isWide:r=!1}=t;return R("div",{className:Qt(e,"grid__item",{["grid__item--wide"]:r}),children:n})},tw=t=>{const{className:e,children:n}=t;return R("div",{className:Qt(e,"form-item"),children:n})},Hue=t=>{const{className:e,children:n,htmlFor:r}=t;return R("label",{className:Qt(e,"label"),htmlFor:r,children:n})},Kue=t=>{const{className:e,children:n}=t;return R("div",{className:Qt(e,"form-error"),children:n})},Gue=(t,e)=>{const{className:n="",id:r,name:i,type:s="text",value:o="",error:a="",label:l="",placeholder:u="",autoComplete:c="off",inputMode:h=void 0,style:d={},onChange:f,onBlur:p}=t,g=Boolean(l),w=Boolean(a);return Ve(qa,{children:[g&&R(Hue,{htmlFor:r,children:l}),R("input",{className:Qt(n,"input",{"is-invalid":w}),id:i,name:i,type:s,value:o,placeholder:u,autoComplete:c,inputMode:h,ref:e,style:d,onChange:f,onBlur:p}),w&&R(Kue,{children:a})]})},nw=A.exports.forwardRef(Gue),AL=t=>{const{className:e,isShown:n=!1}=t;return R("div",{className:Qt(e,"loader",{"is-shown":n}),children:Ve("div",{className:"loader__inner",children:[R("div",{className:"loader__circle loader__circle--main"}),R("div",{className:"loader__circle loader__circle--extra"})]})})},RL=t=>{const{className:e,onAfterSubmit:n,submitButtonLabel:r,submitButtonIcon:i,notice:s=null,hasPasswordAutoComplete:o=!1,hasPasswordConfirmField:a=!1,isLoading:l=!1}=t,{initialValues:u,validationSchema:c}=Xie(a),{handleSubmit:h,values:d,touched:f,errors:p,handleChange:g,handleBlur:w}=Oue({onSubmit(m,y){const{email:v,password:_}=m;n(v,_,y)},validationSchema:c,initialValues:u});return Ve("form",{className:Qt(e,"user-form"),onSubmit:h,children:[Ve(Wue,{children:[R(ip,{children:R(tw,{children:R(nw,{id:"email",name:"email",type:"text",inputMode:"email",autoComplete:"email",value:d.email,error:f.email?p.email:"",label:"Email",placeholder:"example@mail.com",onChange:g,onBlur:w})})}),R(ip,{children:R(tw,{children:R(nw,{id:"password",name:"password",type:"password",autoComplete:o?"current-password":"off",value:d.password,error:f.password?p.password:"",label:"Password",placeholder:"Your password",onChange:g,onBlur:w})})}),a&&R(ip,{children:R(tw,{children:R(nw,{id:"passwordConfirm",name:"passwordConfirm",type:"password",value:d.passwordConfirm||"",error:f.passwordConfirm?p.passwordConfirm:"",label:"Confirm password",placeholder:"Repeat your password",onChange:g,onBlur:w})})}),Ve(ip,{children:[R(kg,{className:"user-form__submit-button",type:"submit",icon:i,children:r}),Boolean(s)&&R("div",{className:"user-form__notice",children:s})]})]}),R(AL,{isShown:l})]})};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Que{constructor(e,n){this._delegate=e,this.firebase=n,Og(e,new fe("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),X$(this._delegate)))}_getService(e,n=va){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=va){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Og(this._delegate,e)}_addOrOverwriteComponent(e){Y$(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yue={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},VR=new bn("app-compat","Firebase",Yue);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xue(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:we,setLogLevel:Z$,onLog:J$,apps:null,SDK_VERSION:bi,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:m6}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||va,!er(e,u))throw VR.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const h=tT(u,c);if(er(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,h=c.replace("-compat","");if(Ye(u)&&u.type==="PUBLIC"){const d=(f=i())=>{if(typeof f[h]!="function")throw VR.create("invalid-app-argument",{appName:c});return f[h]()};u.serviceProps!==void 0&&qh(d,u.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,c).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){const t=Xue(Que);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:xL,extendNamespace:e,createSubscribe:q$,ErrorFactory:bn,deepExtend:qh});function e(n){qh(t,n)}return t}const Jue=xL();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new Si("@firebase/app-compat"),Zue="@firebase/app-compat",ece="0.1.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tce(t){we(Zue,ece,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(WK()&&self.firebase!==void 0){BR.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&BR.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const rt=Jue;tce();const NL="@firebase/installations",jT="0.5.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=1e4,OL=`w:${jT}`,DL="FIS_v2",nce="https://firebaseinstallations.googleapis.com/v1",rce=60*60*1e3,ice="installations",sce="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oce={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},wa=new bn(ice,sce,oce);function $L(t){return t instanceof We&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML({projectId:t}){return`${nce}/projects/${t}/installations`}function FL(t){return{token:t.token,requestStatus:2,expiresIn:lce(t.expiresIn),creationTime:Date.now()}}async function LL(t,e){const r=(await e.json()).error;return wa.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function UL({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ace(t,{refreshToken:e}){const n=UL(t);return n.append("Authorization",uce(e)),n}async function jL(t){const e=await t();return e.status>=500&&e.status<600?t():e}function lce(t){return Number(t.replace("s","000"))}function uce(t){return`${DL} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cce({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=ML(t),i=UL(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:DL,appId:t.appId,sdkVersion:OL},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await jL(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:FL(u.authToken)}}else throw await LL("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hce(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dce=/^[cdef][\w-]{21}$/,SE="";function fce(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=pce(t);return dce.test(n)?n:SE}catch{return SE}}function pce(t){return hce(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new Map;function zL(t,e){const n=Yy(t);qL(n,e),gce(n,e)}function qL(t,e){const n=BL.get(t);if(!!n)for(const r of n)r(e)}function gce(t,e){const n=mce();n&&n.postMessage({key:t,fid:e}),yce()}let Xo=null;function mce(){return!Xo&&"BroadcastChannel"in self&&(Xo=new BroadcastChannel("[Firebase] FID Change"),Xo.onmessage=t=>{qL(t.data.key,t.data.fid)}),Xo}function yce(){BL.size===0&&Xo&&(Xo.close(),Xo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vce="firebase-installations-database",_ce=1,Ea="firebase-installations-store";let rw=null;function VT(){return rw||(rw=Uu(vce,_ce,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ea)}}})),rw}async function qg(t,e){const n=Yy(t),i=(await VT()).transaction(Ea,"readwrite"),s=i.objectStore(Ea),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&zL(t,e.fid),e}async function WL(t){const e=Yy(t),r=(await VT()).transaction(Ea,"readwrite");await r.objectStore(Ea).delete(e),await r.done}async function Xy(t,e){const n=Yy(t),i=(await VT()).transaction(Ea,"readwrite"),s=i.objectStore(Ea),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&zL(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(t){let e;const n=await Xy(t.appConfig,r=>{const i=wce(r),s=Ece(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===SE?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function wce(t){const e=t||{fid:fce(),registrationStatus:0};return HL(e)}function Ece(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(wa.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Sce(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:bce(t)}:{installationEntry:e}}async function Sce(t,e){try{const n=await cce(t,e);return qg(t.appConfig,n)}catch(n){throw $L(n)&&n.customData.serverCode===409?await WL(t.appConfig):await qg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function bce(t){let e=await zR(t.appConfig);for(;e.registrationStatus===1;)await VL(100),e=await zR(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await BT(t);return r||n}return e}function zR(t){return Xy(t,e=>{if(!e)throw wa.create("installation-not-found");return HL(e)})}function HL(t){return Tce(t)?{fid:t.fid,registrationStatus:0}:t}function Tce(t){return t.registrationStatus===1&&t.registrationTime+PL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ice({appConfig:t,heartbeatServiceProvider:e},n){const r=Cce(t,n),i=ace(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:OL,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await jL(()=>fetch(r,a));if(l.ok){const u=await l.json();return FL(u)}else throw await LL("Generate Auth Token",l)}function Cce(t,{fid:e}){return`${ML(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(t,e=!1){let n;const r=await Xy(t.appConfig,s=>{if(!KL(s))throw wa.create("not-registered");const o=s.authToken;if(!e&&Rce(o))return s;if(o.requestStatus===1)return n=kce(t,e),s;{if(!navigator.onLine)throw wa.create("app-offline");const a=Nce(s);return n=Ace(t,a),a}});return n?await n:r.authToken}async function kce(t,e){let n=await qR(t.appConfig);for(;n.authToken.requestStatus===1;)await VL(100),n=await qR(t.appConfig);const r=n.authToken;return r.requestStatus===0?zT(t,e):r}function qR(t){return Xy(t,e=>{if(!KL(e))throw wa.create("not-registered");const n=e.authToken;return Pce(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Ace(t,e){try{const n=await Ice(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await qg(t.appConfig,r),n}catch(n){if($L(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await WL(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await qg(t.appConfig,r)}throw n}}function KL(t){return t!==void 0&&t.registrationStatus===2}function Rce(t){return t.requestStatus===2&&!xce(t)}function xce(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+rce}function Nce(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Pce(t){return t.requestStatus===1&&t.requestTime+PL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oce(t){const e=t,{installationEntry:n,registrationPromise:r}=await BT(e);return r?r.catch(console.error):zT(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dce(t,e=!1){const n=t;return await $ce(n),(await zT(n,e)).token}async function $ce(t){const{registrationPromise:e}=await BT(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mce(t){if(!t||!t.options)throw iw("App Configuration");if(!t.name)throw iw("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw iw(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function iw(t){return wa.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="installations",Fce="installations-internal",Lce=t=>{const e=t.getProvider("app").getImmediate(),n=Mce(e),r=rs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Uce=t=>{const e=t.getProvider("app").getImmediate(),n=rs(e,GL).getImmediate();return{getId:()=>Oce(n),getToken:i=>Dce(n,i)}};function jce(){Ye(new fe(GL,Lce,"PUBLIC")),Ye(new fe(Fce,Uce,"PRIVATE"))}jce();we(NL,jT);we(NL,jT,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="analytics",Vce="firebase_id",Bce="origin",zce=60*1e3,qce="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",QL="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt=new Si("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Wce(t,e){const n=document.createElement("script");n.src=`${QL}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function Hce(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Kce(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await YL(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Wt.error(a)}t("config",i,s)}async function Gce(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await YL(n);for(const l of o){const u=a.find(h=>h.measurementId===l),c=u&&e[u.appId];if(c)s.push(c);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Wt.error(s)}}function Qce(t,e,n,r){async function i(s,o,a){try{s==="event"?await Gce(t,e,n,o,a):s==="config"?await Kce(t,e,n,r,o,a):s==="consent"?t("consent","update",a):t("set",o)}catch(l){Wt.error(l)}}return i}function Yce(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Qce(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Xce(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(QL))return e;return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jce={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},wr=new bn("analytics","Analytics",Jce);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zce=30,ehe=1e3;class the{constructor(e={},n=ehe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const XL=new the;function nhe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function rhe(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:nhe(r)},s=qce.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw wr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function ihe(t,e=XL,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw wr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw wr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ahe;return setTimeout(async()=>{a.abort()},n!==void 0?n:zce),JL({appId:r,apiKey:i,measurementId:s},o,a,e)}async function JL(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=XL){var s,o;const{appId:a,measurementId:l}=t;try{await she(r,e)}catch(u){if(l)return Wt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${(s=u)===null||s===void 0?void 0:s.message}]`),{appId:a,measurementId:l};throw u}try{const u=await rhe(t);return i.deleteThrottleMetadata(a),u}catch(u){const c=u;if(!ohe(c)){if(i.deleteThrottleMetadata(a),l)return Wt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:l};throw u}const h=Number((o=c==null?void 0:c.customData)===null||o===void 0?void 0:o.httpStatus)===503?Pg(n,i.intervalMillis,Zce):Pg(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(a,d),Wt.debug(`Calling attemptFetch again in ${h} millis`),JL(t,d,r,i)}}function she(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(wr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ohe(t){if(!(t instanceof We)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class ahe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function lhe(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}async function uhe(t,e,n,r){if(r&&r.global)return t("set",{screen_name:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,screen_name:n})}}async function che(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,user_id:n})}}async function hhe(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}async function dhe(t,e){const n=await t;window[`ga-disable-${n}`]=!e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fhe(){var t;if(Ln())try{await qd()}catch(e){return Wt.warn(wr.create("indexeddb-unavailable",{errorInfo:(t=e)===null||t===void 0?void 0:t.toString()}).message),!1}else return Wt.warn(wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function phe(t,e,n,r,i,s,o){var a;const l=ihe(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Wt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Wt.error(f)),e.push(l);const u=fhe().then(f=>{if(f)return r.getId()}),[c,h]=await Promise.all([l,u]);Xce()||Wce(s,c.measurementId),i("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[Bce]="firebase",d.update=!0,h!=null&&(d[Vce]=h),i("config",c.measurementId,d),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ghe{constructor(e){this.app=e}_delete(){return delete zi[this.app.options.appId],Promise.resolve()}}let zi={},HR=[];const KR={};let Vp="dataLayer",ZL="gtag",GR,ef,bE=!1;function mhe(t){if(bE)throw wr.create("already-initialized");t.dataLayerName&&(Vp=t.dataLayerName),t.gtagName&&(ZL=t.gtagName)}function yhe(){const t=[];if(Bd()&&t.push("This is a browser extension environment."),Ty()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=wr.create("invalid-analytics-context",{errorInfo:e});Wt.warn(n.message)}}function vhe(t,e,n){yhe();const r=t.options.appId;if(!r)throw wr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Wt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw wr.create("no-api-key");if(zi[r]!=null)throw wr.create("already-exists",{id:r});if(!bE){Hce(Vp);const{wrappedGtag:s,gtagCore:o}=Yce(zi,HR,KR,Vp,ZL);ef=s,GR=o,bE=!0}return zi[r]=phe(t,HR,KR,e,GR,Vp,n),new ghe(t)}async function _he(){if(Bd()||!Ty()||!Ln())return!1;try{return await qd()}catch{return!1}}function whe(t,e,n){t=N(t),uhe(ef,zi[t.app.options.appId],e,n).catch(r=>Wt.error(r))}function Ehe(t,e,n){t=N(t),che(ef,zi[t.app.options.appId],e,n).catch(r=>Wt.error(r))}function She(t,e,n){t=N(t),hhe(ef,zi[t.app.options.appId],e,n).catch(r=>Wt.error(r))}function bhe(t,e){t=N(t),dhe(zi[t.app.options.appId],e).catch(n=>Wt.error(n))}function e2(t,e,n,r){t=N(t),lhe(ef,zi[t.app.options.appId],e,n,r).catch(i=>Wt.error(i))}const QR="@firebase/analytics",YR="0.8.0";function The(){Ye(new fe(WR,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return vhe(r,i,n)},"PUBLIC")),Ye(new fe("analytics-internal",t,"PRIVATE")),we(QR,YR),we(QR,YR,"esm2017");function t(e){try{const n=e.getProvider(WR).getImmediate();return{logEvent:(r,i,s)=>e2(n,r,i,s)}}catch(n){throw wr.create("interop-component-reg-failed",{reason:n})}}}The();const Ihe="@firebase/analytics-compat",Che="0.1.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.app=e,this._delegate=n}logEvent(e,n,r){e2(this._delegate,e,n,r)}setCurrentScreen(e,n){whe(this._delegate,e,n)}setUserId(e,n){Ehe(this._delegate,e,n)}setUserProperties(e,n){She(this._delegate,e,n)}setAnalyticsCollectionEnabled(e){bhe(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TE;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})(TE||(TE={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const khe=t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("analytics").getImmediate();return new t2(e,n)};function Ahe(){const t={Analytics:t2,settings:mhe,isSupported:_he,EventName:TE};rt.INTERNAL.registerComponent(new fe("analytics-compat",khe,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}Ahe();rt.registerVersion(Ihe,Che);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new Map,Rhe={activated:!1,tokenObservers:[]},xhe={initialized:!1,enabled:!1};function xt(t){return n2.get(t)||Rhe}function Wr(t,e){n2.set(t,e)}function Jy(){return xhe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="https://content-firebaseappcheck.googleapis.com/v1",Nhe="exchangeRecaptchaV3Token",Phe="exchangeRecaptchaEnterpriseToken",Ohe="exchangeDebugToken",XR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Dhe=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $he{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ct,await Mhe(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ct,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Mhe(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fhe={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},gn=new bn("appCheck","AppCheck",Fhe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function r2(t){if(!xt(t).activated)throw gn.create("use-before-activation",{appName:t.name})}function WT(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),s=e-n*3600*24-r*3600-i*60;let o="";return n&&(o+=sp(n)+"d:"),r&&(o+=sp(r)+"h:"),o+=sp(i)+"m:"+sp(s)+"s",o}function sp(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HT({url:t,body:e},n){var r,i;const s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}const a={method:"POST",body:JSON.stringify(e),headers:s};let l;try{l=await fetch(t,a)}catch(f){throw gn.create("fetch-network-error",{originalErrorMessage:(r=f)===null||r===void 0?void 0:r.message})}if(l.status!==200)throw gn.create("fetch-status-error",{httpStatus:l.status});let u;try{u=await l.json()}catch(f){throw gn.create("fetch-parse-error",{originalErrorMessage:(i=f)===null||i===void 0?void 0:i.message})}const c=u.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw gn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const h=Number(c[1])*1e3,d=Date.now();return{token:u.token,expireTimeMillis:d+h,issuedAtTimeMillis:d}}function Lhe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${qT}/projects/${n}/apps/${r}:${Nhe}?key=${i}`,body:{recaptcha_v3_token:e}}}function Uhe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${qT}/projects/${n}/apps/${r}:${Phe}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function jhe(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${qT}/projects/${n}/apps/${r}:${Ohe}?key=${i}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vhe="firebase-app-check-database",Bhe=1,nd="firebase-app-check-store",i2="debug-token";let op=null;function s2(){return op||(op=new Promise((t,e)=>{var n;try{const r=indexedDB.open(Vhe,Bhe);r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{var s;e(gn.create("storage-open",{originalErrorMessage:(s=i.target.error)===null||s===void 0?void 0:s.message}))},r.onupgradeneeded=i=>{const s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(nd,{keyPath:"compositeKey"})}}}catch(r){e(gn.create("storage-open",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message}))}}),op)}function zhe(t){return a2(l2(t))}function qhe(t,e){return o2(l2(t),e)}function Whe(t){return o2(i2,t)}function Hhe(){return a2(i2)}async function o2(t,e){const r=(await s2()).transaction(nd,"readwrite"),s=r.objectStore(nd).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(gn.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}async function a2(t){const n=(await s2()).transaction(nd,"readonly"),i=n.objectStore(nd).get(t);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(gn.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function l2(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Si("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Khe(t){if(Ln()){let e;try{e=await zhe(t)}catch(n){rd.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function JR(t,e){return Ln()?qhe(t,e).catch(n=>{rd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Ghe(){let t;try{t=await Hhe()}catch{}if(t)return t;{const e=oG();return Whe(e).catch(n=>rd.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(){return Jy().enabled}async function c2(){const t=Jy();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Qhe(){const t=QK(),e=Jy();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new ct;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Ghe())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yhe={error:"UNKNOWN_ERROR"};function Xhe(t){return Sy.encodeString(JSON.stringify(t),!1)}async function Hg(t,e=!1){const n=t.app;r2(n);const r=xt(n);let i=r.token,s;if(!i){const l=await r.cachedTokenPromise;l&&Kg(l)&&(i=l)}if(!e&&i&&Kg(i))return{token:i.token};let o=!1;if(u2()){r.exchangeTokenPromise||(r.exchangeTokenPromise=HT(jhe(n,await c2()),t.heartbeatServiceProvider).then(u=>(r.exchangeTokenPromise=void 0,u)),o=!0);const l=await r.exchangeTokenPromise;return await JR(n,l),Wr(n,Object.assign(Object.assign({},r),{token:l})),{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0),i=await r.exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?rd.warn(l.message):rd.error(l),s=l}let a;return i?(a={token:i.token},Wr(n,Object.assign(Object.assign({},r),{token:i})),await JR(n,i)):a=Zhe(s),o&&h2(n,a),a}function KT(t,e,n,r){const{app:i}=t,s=xt(i),o={next:n,error:r,type:e};if(Wr(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&Kg(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),ZR(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ZR(t))}function GT(t,e){const n=xt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Wr(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function ZR(t){const{app:e}=t,n=xt(e);let r=n.tokenRefresher;r||(r=Jhe(t),Wr(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Jhe(t){const{app:e}=t;return new $he(async()=>{const n=xt(e);let r;if(n.token?r=await Hg(t,!0):r=await Hg(t),r.error)throw r.error},()=>!0,()=>{const n=xt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},XR.RETRIAL_MIN_WAIT,XR.RETRIAL_MAX_WAIT)}function h2(t,e){const n=xt(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Kg(t){return t.expireTimeMillis-Date.now()>0}function Zhe(t){return{token:Xhe(Yhe),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ede{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=xt(this.app);for(const n of e)GT(this.app,n.next);return Promise.resolve()}}function tde(t,e){return new ede(t,e)}function nde(t){return{getToken:e=>Hg(t,e),addTokenListener:e=>KT(t,"INTERNAL",e),removeTokenListener:e=>GT(t.app,e)}}const rde="@firebase/app-check",ide="0.5.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sde="https://www.google.com/recaptcha/api.js",ode="https://www.google.com/recaptcha/enterprise.js";function ade(t,e){const n=xt(t),r=new ct;Wr(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const i=d2(t),s=Wg(!1);return s?Gg(t,e,s,i,r):cde(()=>{const o=Wg(!1);if(!o)throw new Error("no recaptcha");Gg(t,e,o,i,r)}),r.promise}function lde(t,e){const n=xt(t),r=new ct;Wr(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const i=d2(t),s=Wg(!0);return s?Gg(t,e,s,i,r):hde(()=>{const o=Wg(!0);if(!o)throw new Error("no recaptcha");Gg(t,e,o,i,r)}),r.promise}function Gg(t,e,n,r,i){n.ready(()=>{ude(t,e,n,r),i.resolve(n)})}function d2(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function f2(t){r2(t);const n=await xt(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=xt(t).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function ude(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible"}),s=xt(t);Wr(t,Object.assign(Object.assign({},s),{reCAPTCHAState:Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}))}function cde(t){const e=document.createElement("script");e.src=sde,e.onload=t,document.head.appendChild(e)}function hde(t){const e=document.createElement("script");e.src=ode,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n;g2(this._throttleData);const r=await f2(this._app).catch(s=>{throw gn.create("recaptcha-error")});let i;try{i=await HT(Lhe(this._app,r),this._heartbeatServiceProvider)}catch(s){throw!((e=s.code)===null||e===void 0)&&e.includes("fetch-status-error")?(this._throttleData=p2(Number((n=s.customData)===null||n===void 0?void 0:n.httpStatus),this._throttleData),gn.create("throttled",{time:WT(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):s}return this._throttleData=null,i}initialize(e){this._app=e,this._heartbeatServiceProvider=rs(e,"heartbeat"),ade(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof id?this._siteKey===e._siteKey:!1}}class Zy{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n;g2(this._throttleData);const r=await f2(this._app).catch(s=>{throw gn.create("recaptcha-error")});let i;try{i=await HT(Uhe(this._app,r),this._heartbeatServiceProvider)}catch(s){throw!((e=s.code)===null||e===void 0)&&e.includes("fetch-status-error")?(this._throttleData=p2(Number((n=s.customData)===null||n===void 0?void 0:n.httpStatus),this._throttleData),gn.create("throttled",{time:WT(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):s}return this._throttleData=null,i}initialize(e){this._app=e,this._heartbeatServiceProvider=rs(e,"heartbeat"),lde(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof Zy?this._siteKey===e._siteKey:!1}}class sd{constructor(e){this._customProviderOptions=e}async getToken(){const e=await this._customProviderOptions.getToken(),n=ZK(e.token),r=n!==null&&n<Date.now()&&n>0?n*1e3:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:r})}initialize(e){this._app=e}isEqual(e){return e instanceof sd?this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString():!1}}function p2(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Dhe,httpStatus:t};{const n=e?e.backoffCount:0,r=Pg(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function g2(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw gn.create("throttled",{time:WT(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dde(t=nT(),e){t=N(t);const n=rs(t,"app-check");if(Jy().initialized||Qhe(),u2()&&c2().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw gn.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return fde(t,e.provider,e.isTokenAutoRefreshEnabled),xt(t).isTokenAutoRefreshEnabled&&KT(r,"INTERNAL",()=>{}),r}function fde(t,e,n){const r=xt(t),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=e,i.cachedTokenPromise=Khe(t).then(s=>(s&&Kg(s)&&(Wr(t,Object.assign(Object.assign({},xt(t)),{token:s})),h2(t,{token:s.token})),s)),i.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,Wr(t,i),i.provider.initialize(t)}function pde(t,e){const n=t.app,r=xt(n);r.tokenRefresher&&(e===!0?r.tokenRefresher.start():r.tokenRefresher.stop()),Wr(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:e}))}async function gde(t,e){const n=await Hg(t,e);if(n.error)throw n.error;return{token:n.token}}function mde(t,e,n,r){let i=()=>{},s=()=>{};return e.next!=null?i=e.next.bind(e):i=e,e.error!=null?s=e.error.bind(e):n&&(s=n),KT(t,"EXTERNAL",i,s),()=>GT(t.app,i)}const yde="app-check",ex="app-check-internal";function vde(){Ye(new fe(yde,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return tde(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(ex).initialize()})),Ye(new fe(ex,t=>{const e=t.getProvider("app-check").getImmediate();return nde(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),we(rde,ide)}vde();const _de="@firebase/app-check-compat",wde="0.2.12";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ede={["use-before-activation"]:"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."},sw=new bn("appCheck","AppCheck",Ede);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sde{constructor(e){this.app=e}activate(e,n){let r;typeof e=="string"?r=new id(e):e instanceof Zy||e instanceof id||e instanceof sd?r=e:r=new sd({getToken:e.getToken}),this._delegate=dde(this.app,{provider:r,isTokenAutoRefreshEnabled:n})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw sw.create("use-before-activation",{appName:this.app.name});pde(this._delegate,e)}getToken(e){if(!this._delegate)throw sw.create("use-before-activation",{appName:this.app.name});return gde(this._delegate,e)}onTokenChanged(e,n,r){if(!this._delegate)throw sw.create("use-before-activation",{appName:this.app.name});return mde(this._delegate,e,n)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bde=t=>{const e=t.getProvider("app-compat").getImmediate();return new Sde(e)};function Tde(){rt.INTERNAL.registerComponent(new fe("appCheck-compat",bde,"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:Zy,ReCaptchaV3Provider:id,CustomProvider:sd}))}Tde();rt.registerVersion(_de,wde);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ide=2e3;async function Cde(t,e,n){var r;const{BuildInfo:i}=Sa();qr(e.sessionId,"AuthEvent did not contain a session ID");const s=await Nde(e.sessionId),o={};return Vu()?o.ibi=i.packageName:Hd()?o.apn=i.packageName:At(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,J0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function kde(t){const{BuildInfo:e}=Sa(),n={};Vu()?n.iosBundleId=e.packageName:Hd()?n.androidPackageName=e.packageName:At(t,"operation-not-supported-in-this-environment"),await KM(t,n)}function Ade(t){const{cordova:e}=Sa();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,L6()?"_blank":"_system","location=yes"),n(i)})})}async function Rde(t,e,n){const{cordova:r}=Sa();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const d=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(qt(t,"redirect-cancelled-by-user"))},Ide))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),Hd()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function xde(t){var e,n,r,i,s,o,a,l,u,c;const h=Sa();D(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),D(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),D(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),D(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),D(typeof((c=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Nde(t){const e=Pde(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Pde(t){if(qr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ode=20;class Dde extends WM{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function $de(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Lde(),postBody:null,tenantId:t.tenantId,error:qt(t,"no-auth-event")}}function Mde(t,e){return IE()._set(CE(t),e)}async function tx(t){const e=await IE()._get(CE(t));return e&&await IE()._remove(CE(t)),e}function Fde(t,e){var n,r;const i=jde(e);if(i.includes("/__/auth/callback")){const s=Bp(i),o=s.firebaseError?Ude(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?qt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function Lde(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Ode;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function IE(){return Wn(Oy)}function CE(t){return oa("authEvent",t.config.apiKey,t.name)}function Ude(t){try{return JSON.parse(t)}catch{return null}}function jde(t){const e=Bp(t),n=e.link?decodeURIComponent(e.link):void 0,r=Bp(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Bp(i).link||i||r||n||t}function Bp(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Pl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vde=500;class Bde{constructor(){this._redirectPersistence=Xs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fy,this._overrideRedirectResult=mT}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new Dde(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){At(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){xde(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),P8(),await this._originValidation(e);const o=$de(e,r,i);await Mde(e,o);const a=await Cde(e,o,n),l=await Ade(a);return Rde(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kde(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Sa(),o=setTimeout(async()=>{await tx(e),n.onEvent(nx())},Vde),a=async c=>{clearTimeout(o);const h=await tx(e);let d=null;h&&(c==null?void 0:c.url)&&(d=Fde(h,c.url)),n.onEvent(d||nx())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;Sa().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(h){console.error(h)}}}}const zde=Bde;function nx(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:qt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qde(t,e){Rt(t)._logFramework(e)}var Wde="@firebase/auth-compat",Hde="0.2.18";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kde=1e3;function uh(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function Gde(){return uh()==="http:"||uh()==="https:"}function m2(t=Oe()){return!!((uh()==="file:"||uh()==="ionic:"||uh()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qde(){return zd()||Yb()}function Yde(){return Xb()&&(document==null?void 0:document.documentMode)===11}function Xde(t=Oe()){return/Edge\/\d+/.test(t)}function Jde(t=Oe()){return Yde()||Xde(t)}function y2(){try{const t=self.localStorage,e=Kd();if(t)return t.setItem(e,"1"),t.removeItem(e),Jde()?Ln():!0}catch{return QT()&&Ln()}return!1}function QT(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ow(){return(Gde()||Bd()||m2())&&!Qde()&&y2()&&!QT()}function v2(){return m2()&&typeof document<"u"}async function Zde(){return v2()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Kde);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function efe(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn={LOCAL:"local",NONE:"none",SESSION:"session"},bc=D,_2="persistence";function tfe(t,e){if(bc(Object.values(Bn).includes(e),t,"invalid-persistence-type"),zd()){bc(e!==Bn.SESSION,t,"unsupported-persistence-type");return}if(Yb()){bc(e===Bn.NONE,t,"unsupported-persistence-type");return}if(QT()){bc(e===Bn.NONE||e===Bn.LOCAL&&Ln(),t,"unsupported-persistence-type");return}bc(e===Bn.NONE||y2(),t,"unsupported-persistence-type")}async function kE(t){await t._initializationPromise;const e=w2(),n=oa(_2,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function nfe(t,e){const n=w2();if(!n)return[];const r=oa(_2,t,e);switch(n.getItem(r)){case Bn.NONE:return[cu];case Bn.LOCAL:return[du,Xs];case Bn.SESSION:return[Xs];default:return[]}}function w2(){var t;try{return((t=efe())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rfe=D;class Cs{constructor(){this.browserResolver=Wn(GM),this.cordovaResolver=Wn(zde),this.underlyingResolver=null,this._redirectPersistence=Xs,this._completeRedirectFn=Fy,this._overrideRedirectResult=mT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return v2()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rfe(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Zde();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t){return t.unwrap()}function ife(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sfe(t){return S2(t)}function ofe(t,e){var n,r;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if(((r=e)===null||r===void 0?void 0:r.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new afe(t,M5(t,e))}else if(i){const s=S2(e),o=e;s&&(o.credential=s,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function S2(t){const{_tokenResponse:e}=t instanceof We?t.customData:t;if(!e)return null;if(!(t instanceof We)&&"temporaryProof"in e&&"phoneNumber"in e)return jr.credentialFromResult(t);const n=e.providerId;if(!n||n===wc.PASSWORD)return null;let r;switch(n){case wc.GOOGLE:r=Zr;break;case wc.FACEBOOK:r=Jr;break;case wc.GITHUB:r=ei;break;case wc.TWITTER:r=ti;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?hu._create(n,a):gi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Hl(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof We?r.credentialFromError(t):r.credentialFromResult(t)}function Tn(t,e){return e.catch(n=>{throw n instanceof We&&ofe(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:sfe(n),additionalUserInfo:$5(n),user:Mi.getOrCreate(i)}})}async function AE(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Tn(t,n.confirm(r))}}class afe{constructor(e,n){this.resolver=n,this.auth=ife(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Tn(E2(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._delegate=e,this.multiFactor=j5(e)}static getOrCreate(e){return Mi.USER_MAP.has(e)||Mi.USER_MAP.set(e,new Mi(e)),Mi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Tn(this.auth,IM(this._delegate,e))}async linkWithPhoneNumber(e,n){return AE(this.auth,_8(this._delegate,e,n))}async linkWithPopup(e){return Tn(this.auth,A8(this._delegate,e,Cs))}async linkWithRedirect(e){return await kE(Rt(this.auth)),F8(this._delegate,e,Cs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Tn(this.auth,CM(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return AE(this.auth,w8(this._delegate,e,n))}reauthenticateWithPopup(e){return Tn(this.auth,k8(this._delegate,e,Cs))}async reauthenticateWithRedirect(e){return await kE(Rt(this.auth)),$8(this._delegate,e,Cs)}sendEmailVerification(e){return T5(this._delegate,e)}async unlink(e){return await d5(this._delegate,e),this}updateEmail(e){return A5(this._delegate,e)}updatePassword(e){return R5(this._delegate,e)}updatePhoneNumber(e){return E8(this._delegate,e)}updateProfile(e){return k5(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return I5(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mi.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=D;class RE{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Tc(r,"invalid-api-key",{appName:e.name}),Tc(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Cs:void 0;this._delegate=n.initialize({options:{persistence:lfe(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(v6),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){q6(this._delegate,e,n)}applyActionCode(e){return y5(this._delegate,e)}checkActionCode(e){return kM(this._delegate,e)}confirmPasswordReset(e,n){return m5(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Tn(this._delegate,AM(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return b5(this._delegate,e)}isSignInWithEmailLink(e){return w5(this._delegate,e)}async getRedirectResult(){Tc(ow(),this._delegate,"operation-not-supported-in-this-environment");const e=await U8(this._delegate,Cs);return e?Tn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){qde(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=rx(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=rx(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return _5(this._delegate,e,n)}sendPasswordResetEmail(e,n){return g5(this._delegate,e,n||void 0)}async setPersistence(e){tfe(this._delegate,e);let n;switch(e){case Bn.SESSION:n=Xs;break;case Bn.LOCAL:n=await Wn(du)._isAvailable()?du:Oy;break;case Bn.NONE:n=cu;break;default:return At("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Tn(this._delegate,h5(this._delegate))}signInWithCredential(e){return Tn(this._delegate,xy(this._delegate,e))}signInWithCustomToken(e){return Tn(this._delegate,p5(this._delegate,e))}signInWithEmailAndPassword(e,n){return Tn(this._delegate,RM(this._delegate,e,n))}signInWithEmailLink(e,n){return Tn(this._delegate,E5(this._delegate,e,n))}signInWithPhoneNumber(e,n){return AE(this._delegate,v8(this._delegate,e,n))}async signInWithPopup(e){return Tc(ow(),this._delegate,"operation-not-supported-in-this-environment"),Tn(this._delegate,C8(this._delegate,e,Cs))}async signInWithRedirect(e){return Tc(ow(),this._delegate,"operation-not-supported-in-this-environment"),await kE(this._delegate),O8(this._delegate,e,Cs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return v5(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}RE.Persistence=Bn;function rx(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Mi.getOrCreate(o)),error:e,complete:n}}function lfe(t,e){const n=nfe(t,e);if(typeof self<"u"&&!n.includes(du)&&n.push(du),typeof window<"u")for(const r of[Oy,Xs])n.includes(r)||n.push(r);return n.includes(cu)||n.push(cu),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.providerId="phone",this._delegate=new jr(E2(rt.auth()))}static credential(e,n){return jr.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}YT.PHONE_SIGN_IN_METHOD=jr.PHONE_SIGN_IN_METHOD;YT.PROVIDER_ID=jr.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ufe=D;class cfe{constructor(e,n,r=rt.app()){var i;ufe((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new m8(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hfe="auth-compat";function dfe(t){t.INTERNAL.registerComponent(new fe(hfe,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new RE(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:dl.EMAIL_SIGNIN,PASSWORD_RESET:dl.PASSWORD_RESET,RECOVER_EMAIL:dl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:dl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:dl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:dl.VERIFY_EMAIL}},EmailAuthProvider:po,FacebookAuthProvider:Jr,GithubAuthProvider:ei,GoogleAuthProvider:Zr,OAuthProvider:Hl,SAMLAuthProvider:Dg,PhoneAuthProvider:YT,PhoneMultiFactorGenerator:QM,RecaptchaVerifier:cfe,TwitterAuthProvider:ti,Auth:RE,AuthCredential:Bu,Error:We}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Wde,Hde)}dfe(rt);const ix="@firebase/database",sx="0.13.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b2="";function T2(t){b2=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ffe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ht(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Wh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pfe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return er(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ffe(e)}}catch{}return new pfe},Jo=I2("localStorage"),xE=I2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new Si("@firebase/database"),C2=function(){let t=1;return function(){return t++}}(),k2=function(t){const e=sG(t),n=new nG;n.update(e);const r=n.digest();return Sy.encodeByteArray(r)},tf=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=tf.apply(null,r):typeof r=="object"?e+=ht(r):e+=r,e+=" "}return e};let la=null,ox=!0;const A2=function(t,e){$(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Gl.logLevel=ne.VERBOSE,la=Gl.log.bind(Gl),e&&xE.set("logging_enabled",!0)):typeof t=="function"?la=t:(la=null,xE.remove("logging_enabled"))},bt=function(...t){if(ox===!0&&(ox=!1,la===null&&xE.get("logging_enabled")===!0&&A2(!0)),la){const e=tf.apply(null,t);la(e)}},nf=function(t){return function(...e){bt(t,...e)}},NE=function(...t){const e="FIREBASE INTERNAL ERROR: "+tf(...t);Gl.error(e)},mi=function(...t){const e=`FIREBASE FATAL ERROR: ${tf(...t)}`;throw Gl.error(e),new Error(e)},rn=function(...t){const e="FIREBASE WARNING: "+tf(...t);Gl.warn(e)},gfe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&rn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ev=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},mfe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ji="[MIN_NAME]",yi="[MAX_NAME]",el=function(t,e){if(t===e)return 0;if(t===Ji||e===yi)return-1;if(e===Ji||t===yi)return 1;{const n=Qg(t),r=Qg(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},yfe=function(t,e){return t===e?0:t<e?-1:1},Ic=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ht(e))},XT=function(t){if(typeof t!="object"||t===null)return ht(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ht(e[r]),n+=":",n+=XT(t[e[r]]);return n+="}",n},R2=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Nt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const x2=function(t){$(!ev(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(c.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},vfe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_fe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function wfe(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Efe=new RegExp("^-?(0*)\\d{1,10}$"),N2=-2147483648,JT=2147483647,Qg=function(t){if(Efe.test(t)){const e=Number(t);if(e>=N2&&e<=JT)return e}return null},Yu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw rn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Sfe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ch=function(t,e){const n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bfe{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){rn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tfe{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rn(e)}}class Ql{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ql.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="5",P2="v",O2="s",D2="r",$2="f",M2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,F2="ls",L2="p",PE="ac",U2="websocket",j2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r,i,s=!1,o="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Jo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Ife(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function B2(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let r;if(e===U2)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===j2)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Ife(t)&&(n.ns=t.namespace);const i=[];return Nt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cfe{constructor(){this.counters_={}}incrementCounter(e,n=1){er(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return zK(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw={},lw={};function eI(t){const e=t.toString();return aw[e]||(aw[e]=new Cfe),aw[e]}function kfe(t,e){const n=t.toString();return lw[n]||(lw[n]=e()),lw[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Afe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="start",Rfe="close",xfe="pLPCommand",Nfe="pRTLPCB",z2="id",q2="pw",W2="ser",Pfe="cb",Ofe="seg",Dfe="ts",$fe="d",Mfe="dframe",H2=1870,K2=30,Ffe=H2-K2,Lfe=25e3,Ufe=3e4;class ks{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nf(e),this.stats_=eI(n),this.urlFn=l=>(this.appCheckToken&&(l[PE]=this.appCheckToken),B2(n,j2,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Afe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ufe)),mfe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tI((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ax)this.id=a,this.password=l;else if(o===Rfe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[ax]="t",r[W2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Pfe]=this.scriptTagHolder.uniqueCallbackIdentifier),r[P2]=ZT,this.transportSessionId&&(r[O2]=this.transportSessionId),this.lastSessionId&&(r[F2]=this.lastSessionId),this.applicationId&&(r[L2]=this.applicationId),this.appCheckToken&&(r[PE]=this.appCheckToken),typeof location<"u"&&location.hostname&&M2.test(location.hostname)&&(r[D2]=$2);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ks.forceAllow_=!0}static forceDisallow(){ks.forceDisallow_=!0}static isAvailable(){return ks.forceAllow_?!0:!ks.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!vfe()&&!_fe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ht(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=B$(n),i=R2(r,Ffe);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Mfe]="t",r[z2]=e,r[q2]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ht(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class tI{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=C2(),window[xfe+this.uniqueCallbackIdentifier]=e,window[Nfe+this.uniqueCallbackIdentifier]=n,this.myIFrame=tI.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){bt("frame writing exception"),a.stack&&bt(a.stack),bt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[z2]=this.myID,e[q2]=this.myPW,e[W2]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+K2+r.length<=H2;){const o=this.pendingSegs.shift();r=r+"&"+Ofe+i+"="+o.seg+"&"+Dfe+i+"="+o.ts+"&"+$fe+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Lfe)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jfe=16384,Vfe=45e3;let Yg=null;typeof MozWebSocket<"u"?Yg=MozWebSocket:typeof WebSocket<"u"&&(Yg=WebSocket);class fr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nf(this.connId),this.stats_=eI(n),this.connURL=fr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[P2]=ZT,typeof location<"u"&&location.hostname&&M2.test(location.hostname)&&(o[D2]=$2),n&&(o[O2]=n),r&&(o[F2]=r),i&&(o[PE]=i),s&&(o[L2]=s),B2(e,U2,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jo.set("previous_websocket_failure",!0);try{let r;z$(),this.mySock=new Yg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){fr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Yg!==null&&!fr.forceDisallow_}static previouslyFailed(){return Jo.isInMemoryStorage||Jo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Jo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Wh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ht(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=R2(n,jfe);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Vfe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fr.responsesRequiredToBeHealthy=2;fr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ks,fr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=fr&&fr.isAvailable();let r=n&&!fr.previouslyFailed();if(e.webSocketOnly&&(n||rn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[fr];else{const i=this.transports_=[];for(const s of gu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);gu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}gu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bfe=6e4,zfe=5e3,qfe=10*1024,Wfe=100*1024,uw="t",lx="d",Hfe="s",ux="r",Kfe="e",cx="o",hx="a",dx="n",fx="p",Gfe="h";class Qfe{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nf("c:"+this.id+":"),this.transportManager_=new gu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ch(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Wfe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qfe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(uw in e){const n=e[uw];n===hx?this.upgradeIfSecondaryHealthy_():n===ux?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ic("t",e),r=Ic("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ic("t",e),r=Ic("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ic(uw,e);if(lx in e){const r=e[lx];if(n===Gfe)this.onHandshake_(r);else if(n===dx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Hfe?this.onConnectionShutdown_(r):n===ux?this.onReset_(r):n===Kfe?NE("Server Error: "+r):n===cx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):NE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ZT!==r&&rn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ch(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Bfe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ch(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(zfe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fx,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends Q2{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!by()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Xg}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=32,gx=768;class ge{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function pe(){return new ge("")}function re(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Zs(t){return t.pieces_.length-t.pieceNum_}function Se(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ge(t.pieces_,e)}function nI(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Yfe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function od(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Y2(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ge(e,0)}function Le(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ge(n,0)}function ie(t){return t.pieceNum_>=t.pieces_.length}function mn(t,e){const n=re(t),r=re(e);if(n===null)return e;if(n===r)return mn(Se(t),Se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Xfe(t,e){const n=od(t,0),r=od(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=el(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function rI(t,e){if(Zs(t)!==Zs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Zs(t)>Zs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Jfe{constructor(e,n){this.errorPrefix_=n,this.parts_=od(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Iy(this.parts_[r]);X2(this)}}function Zfe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Iy(e),X2(t)}function epe(t){const e=t.parts_.pop();t.byteLength_-=Iy(e),t.parts_.length>0&&(t.byteLength_-=1)}function X2(t){if(t.byteLength_>gx)throw new Error(t.errorPrefix_+"has a key path longer than "+gx+" bytes ("+t.byteLength_+").");if(t.parts_.length>px)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+px+") or object contains a cycle "+Fo(t))}function Fo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI extends Q2{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new iI}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=1e3,tpe=60*5*1e3,mx=30*1e3,npe=1.3,rpe=3e4,ipe="server_kill",yx=3;class qi extends G2{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=qi.nextPersistentConnectionId_++,this.log_=nf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Cc,this.maxReconnectDelay_=tpe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!z$())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iI.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Xg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(ht(s)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ct,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;qi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&er(e,"w")){const r=ma(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();rn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tG(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=eG(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ht(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):NE("Unrecognized action received from server: "+ht(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Cc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>rpe&&(this.reconnectDelay_=Cc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*npe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+qi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(h){$(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?bt("getToken() completed but was canceled"):(bt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new Qfe(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{rn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(ipe)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&rn(h),l())}}}interrupt(e){bt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Rg(this.interruptReasons_)&&(this.reconnectDelay_=Cc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>XT(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ge(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){bt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yx&&(this.reconnectDelay_=mx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){bt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+b2.replace(/\./g,"-")]=1,by()?e["framework.cordova"]=1:zd()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Xg.getInstance().currentlyOnline();return Rg(this.interruptReasons_)&&e}}qi.nextPersistentConnectionId_=0;qi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new oe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new oe(Ji,e),i=new oe(Ji,n);return this.compare(r,i)!==0}minPost(){return oe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ap;class J2 extends tv{static get __EMPTY_NODE(){return ap}static set __EMPTY_NODE(e){ap=e}compare(e,n){return el(e.name,n.name)}isDefinedOn(e){throw Lu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return oe.MIN}maxPost(){return new oe(yi,ap)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new oe(e,ap)}toString(){return".key"}}const ci=new J2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Et.RED,this.left=i!=null?i:xn.EMPTY_NODE,this.right=s!=null?s:xn.EMPTY_NODE}copy(e,n,r,i,s){return new Et(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return xn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return xn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Et.RED=!0;Et.BLACK=!1;class spe{copy(e,n,r,i,s){return this}insert(e,n,r){return new Et(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class xn{constructor(e,n=xn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new xn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Et.BLACK,null,null))}remove(e){return new xn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Et.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new lp(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new lp(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new lp(this.root_,null,this.comparator_,!0,e)}}xn.EMPTY_NODE=new spe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ope(t,e){return el(t.name,e.name)}function sI(t,e){return el(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OE;function ape(t){OE=t}const Z2=function(t){return typeof t=="number"?"number:"+x2(t):"string:"+t},eU=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&er(e,".sv"),"Priority must be a string or number.")}else $(t===OE||t.isEmpty(),"priority of unexpected type.");$(t===OE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vx;class yt{constructor(e,n=yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),eU(this.priorityNode_)}static set __childrenNodeConstructor(e){vx=e}static get __childrenNodeConstructor(){return vx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ie(e)?this:re(e)===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=re(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:($(r!==".priority"||Zs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,yt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Z2(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=x2(this.value_):e+=this.value_,this.lazyHash_=k2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yt.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=yt.VALUE_TYPE_ORDER.indexOf(n),s=yt.VALUE_TYPE_ORDER.indexOf(r);return $(i>=0,"Unknown leaf type: "+n),$(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tU,nU;function lpe(t){tU=t}function upe(t){nU=t}class cpe extends tv{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?el(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return oe.MIN}maxPost(){return new oe(yi,new yt("[PRIORITY-POST]",nU))}makePost(e,n){const r=tU(e);return new oe(n,new yt("[PRIORITY-POST]",r))}toString(){return".priority"}}const ke=new cpe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hpe=Math.log(2);class dpe{constructor(e){const n=s=>parseInt(Math.log(s)/hpe,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Jg=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let h,d;if(c===0)return null;if(c===1)return h=t[l],d=n?n(h):h,new Et(d,h.node,Et.BLACK,null,null);{const f=parseInt(c/2,10)+l,p=i(l,f),g=i(f+1,u);return h=t[f],d=n?n(h):h,new Et(d,h.node,Et.BLACK,p,g)}},s=function(l){let u=null,c=null,h=t.length;const d=function(p,g){const w=h-p,m=h;h-=p;const y=i(w+1,m),v=t[w],_=n?n(v):v;f(new Et(_,v.node,g,null,y))},f=function(p){u?(u.left=p,u=p):(c=p,u=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),w=Math.pow(2,l.count-(p+1));g?d(w,Et.BLACK):(d(w,Et.BLACK),d(w,Et.RED))}return c},o=new dpe(t.length),a=s(o);return new xn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cw;const fl={};class Fi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $(fl&&ke,"ChildrenNode.ts has not been loaded"),cw=cw||new Fi({".priority":fl},{".priority":ke}),cw}get(e){const n=ma(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xn?n:null}hasIndex(e){return er(this.indexSet_,e.toString())}addIndex(e,n){$(e!==ci,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(oe.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Jg(r,e.getCompare()):a=fl;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new Fi(c,u)}addToIndexes(e,n){const r=xg(this.indexes_,(i,s)=>{const o=ma(this.indexSet_,s);if($(o,"Missing index implementation for "+s),i===fl)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(oe.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Jg(a,o.getCompare())}else return fl;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new oe(e.name,a))),l.insert(e,e.node)}});return new Fi(r,this.indexSet_)}removeFromIndexes(e,n){const r=xg(this.indexes_,i=>{if(i===fl)return i;{const s=n.get(e.name);return s?i.remove(new oe(e.name,s)):i}});return new Fi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc;class K{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&eU(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kc||(kc=new K(new xn(sI),null,Fi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kc}updatePriority(e){return this.children_.isEmpty()?this:new K(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?kc:n}}getChild(e){const n=re(e);return n===null?this:this.getImmediateChild(n).getChild(Se(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new oe(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?kc:this.priorityNode_;return new K(i,o,s)}}updateChild(e,n){const r=re(e);if(r===null)return n;{$(re(e)!==".priority"||Zs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Se(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ke,(o,a)=>{n[o]=a.val(e),r++,s&&K.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Z2(this.getPriority().val())+":"),this.forEachChild(ke,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":k2(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new oe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new oe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new oe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,oe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,oe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rf?-1:0}withIndex(e){if(e===ci||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new K(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ci||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ke),i=n.getIterator(ke);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ci?null:this.indexMap_.get(e.toString())}}K.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class fpe extends K{constructor(){super(new xn(sI),K.EMPTY_NODE,Fi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return K.EMPTY_NODE}isEmpty(){return!1}}const rf=new fpe;Object.defineProperties(oe,{MIN:{value:new oe(Ji,K.EMPTY_NODE)},MAX:{value:new oe(yi,rf)}});J2.__EMPTY_NODE=K.EMPTY_NODE;yt.__childrenNodeConstructor=K;ape(rf);upe(rf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ppe=!0;function Be(t,e=null){if(t===null)return K.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new yt(n,Be(e))}if(!(t instanceof Array)&&ppe){const n=[];let r=!1;if(Nt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Be(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new oe(o,l)))}}),n.length===0)return K.EMPTY_NODE;const s=Jg(n,ope,o=>o.name,sI);if(r){const o=Jg(n,ke.getCompare());return new K(s,Be(e),new Fi({".priority":o},{".priority":ke}))}else return new K(s,Be(e),Fi.Default)}else{let n=K.EMPTY_NODE;return Nt(t,(r,i)=>{if(er(t,r)&&r.substring(0,1)!=="."){const s=Be(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Be(e))}}lpe(Be);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI extends tv{constructor(e){super(),this.indexPath_=e,$(!ie(e)&&re(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?el(e.name,n.name):s}makePost(e,n){const r=Be(e),i=K.EMPTY_NODE.updateChild(this.indexPath_,r);return new oe(n,i)}maxPost(){const e=K.EMPTY_NODE.updateChild(this.indexPath_,rf);return new oe(yi,e)}toString(){return od(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gpe extends tv{compare(e,n){const r=e.node.compareTo(n.node);return r===0?el(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return oe.MIN}maxPost(){return oe.MAX}makePost(e,n){const r=Be(e);return new oe(n,r)}toString(){return".value"}}const aI=new gpe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",DE="-",rU="z",iU=786,mpe=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=mu.charAt(n%64),n=Math.floor(n/64);$(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=mu.charAt(e[i]);return $(o.length===20,"nextPushId: Length should be 20."),o}}(),_x=function(t){if(t===""+JT)return DE;const e=Qg(t);if(e!=null)return""+(e+1);const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t.charAt(o);if(n.length<iU)return n.push(DE),n.join("");let r=n.length-1;for(;r>=0&&n[r]===rU;)r--;if(r===-1)return yi;const i=n[r],s=mu.charAt(mu.indexOf(i)+1);return n[r]=s,n.slice(0,r+1).join("")},wx=function(t){if(t===""+N2)return Ji;const e=Qg(t);if(e!=null)return""+(e-1);const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===DE?n.length===1?""+JT:(delete n[n.length-1],n.join("")):(n[n.length-1]=mu.charAt(mu.indexOf(n[n.length-1])-1),n.join("")+rU.repeat(iU-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){return{type:"value",snapshotNode:t}}function yu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ad(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ld(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function ype(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){$(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ad(n,a)):$(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(yu(n,r)):o.trackChildChange(ld(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ke,(i,s)=>{n.hasChild(i)||r.trackChildChange(ad(i,s))}),n.isLeafNode()||n.forEachChild(ke,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ld(i,s,o))}else r.trackChildChange(yu(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?K.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.indexedFilter_=new lI(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ud.getStartPost_(e),this.endPost_=ud.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,r,i,s,o){return this.matches(new oe(n,r))||(r=K.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=K.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(K.EMPTY_NODE);const s=this;return n.forEachChild(ke,(o,a)=>{s.matches(new oe(o,a))||(i=i.updateImmediateChild(o,K.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vpe{constructor(e){this.rangedFilter_=new ud(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new oe(n,r))||(r=K.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=K.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=K.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:l=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(a.name,a.node),o++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(K.EMPTY_NODE);let s,o,a,l;if(this.reverse_){l=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const h=this.index_.getCompare();a=(d,f)=>h(f,d)}else l=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let u=0,c=!1;for(;l.hasNext();){const h=l.getNext();!c&&a(s,h)<=0&&(c=!0),c&&u<this.limit_&&a(h,o)<=0?u++:i=i.updateImmediateChild(h.name,K.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;$(a.numChildren()===this.limit_,"");const l=new oe(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,l);if(c&&!r.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(ld(n,r,h)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(ad(n,h));const g=a.updateImmediateChild(n,K.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(yu(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}}else return r.isEmpty()?e:c&&o(u,l)>=0?(s!=null&&(s.trackChildChange(ad(u.name,u.node)),s.trackChildChange(yu(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,K.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ke}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ji}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ke}copy(){const e=new nv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _pe(t){return t.loadsAllData()?new lI(t.getIndex()):t.hasLimit()?new vpe(t):new ud(t)}function wpe(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Epe(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function $E(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Spe(t,e,n){let r;if(t.index_===ci)typeof e=="string"&&(e=_x(e)),r=$E(t,e,n);else{let i;n==null?i=yi:i=_x(n),r=$E(t,e,i)}return r.startAfterSet_=!0,r}function ME(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function bpe(t,e,n){let r,i;return t.index_===ci?(typeof e=="string"&&(e=wx(e)),i=ME(t,e,n)):(n==null?r=Ji:r=wx(n),i=ME(t,e,r)),i.endBeforeSet_=!0,i}function rv(t,e){const n=t.copy();return n.index_=e,n}function Ex(t){const e={};if(t.isDefault())return e;let n;return t.index_===ke?n="$priority":t.index_===aI?n="$value":t.index_===ci?n="$key":($(t.index_ instanceof oI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ht(n),t.startSet_&&(e.startAt=ht(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+ht(t.indexStartName_))),t.endSet_&&(e.endAt=ht(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+ht(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Sx(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ke&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends G2{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=nf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Zg.getListenId_(e,r),a={};this.listens_[o]=a;const l=Ex(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let h=c;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,r),ma(this.listens_,o)===a){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=Zg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Ex(e._queryParams),r=e._path.toString(),i=new ct;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ha(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Wh(a.responseText)}catch{rn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&rn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tpe{constructor(){this.rootNode_=K.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){return{value:null,children:new Map}}function Xu(t,e,n){if(ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=re(e);t.children.has(r)||t.children.set(r,em());const i=t.children.get(r);e=Se(e),Xu(i,e,n)}}function FE(t,e){if(ie(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ke,(r,i)=>{Xu(t,new ge(r),i)}),FE(t,e)}}else if(t.children.size>0){const n=re(e);return e=Se(e),t.children.has(n)&&FE(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function LE(t,e,n){t.value!==null?n(e,t.value):Ipe(t,(r,i)=>{const s=new ge(e.toString()+"/"+r);LE(i,s,n)})}function Ipe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cpe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Nt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=10*1e3,kpe=30*1e3,Ape=5*60*1e3;class Rpe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Cpe(e);const r=bx+(kpe-bx)*Math.random();ch(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Nt(e,(i,s)=>{s>0&&er(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ch(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ape))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Mr||(Mr={}));function uI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function cI(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function hI(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Mr.ACK_USER_WRITE,this.source=uI()}operationForChild(e){if(ie(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ge(e));return new tm(pe(),n,this.revert)}}else return $(re(this.path)===e,"operationForChild called for unrelated child."),new tm(Se(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){this.source=e,this.path=n,this.type=Mr.LISTEN_COMPLETE}operationForChild(e){return ie(this.path)?new cd(this.source,pe()):new cd(this.source,Se(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Mr.OVERWRITE}operationForChild(e){return ie(this.path)?new ba(this.source,pe(),this.snap.getImmediateChild(e)):new ba(this.source,Se(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Mr.MERGE}operationForChild(e){if(ie(this.path)){const n=this.children.subtree(new ge(e));return n.isEmpty()?null:n.value?new ba(this.source,pe(),n.value):new vu(this.source,pe(),n)}else return $(re(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vu(this.source,Se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=re(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xpe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Npe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(ype(o.childName,o.snapshotNode))}),Ac(t,i,"child_removed",e,r,n),Ac(t,i,"child_added",e,r,n),Ac(t,i,"child_moved",s,r,n),Ac(t,i,"child_changed",e,r,n),Ac(t,i,"value",e,r,n),i}function Ac(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>Ope(t,a,l)),o.forEach(a=>{const l=Ppe(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function Ppe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ope(t,e,n){if(e.childName==null||n.childName==null)throw Lu("Should only compare child_ events.");const r=new oe(e.childName,e.snapshotNode),i=new oe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t,e){return{eventCache:t,serverCache:e}}function hh(t,e,n,r){return iv(new eo(e,n,r),t.serverCache)}function oU(t,e,n,r){return iv(t.eventCache,new eo(e,n,r))}function nm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ta(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hw;const Dpe=()=>(hw||(hw=new xn(yfe)),hw);class Te{constructor(e,n=Dpe()){this.value=e,this.children=n}static fromObject(e){let n=new Te(null);return Nt(e,(r,i)=>{n=n.set(new ge(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:pe(),value:this.value};if(ie(e))return null;{const r=re(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Se(e),n);return s!=null?{path:Le(new ge(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ie(e))return this;{const n=re(e),r=this.children.get(n);return r!==null?r.subtree(Se(e)):new Te(null)}}set(e,n){if(ie(e))return new Te(n,this.children);{const r=re(e),s=(this.children.get(r)||new Te(null)).set(Se(e),n),o=this.children.insert(r,s);return new Te(this.value,o)}}remove(e){if(ie(e))return this.children.isEmpty()?new Te(null):new Te(null,this.children);{const n=re(e),r=this.children.get(n);if(r){const i=r.remove(Se(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Te(null):new Te(this.value,s)}else return this}}get(e){if(ie(e))return this.value;{const n=re(e),r=this.children.get(n);return r?r.get(Se(e)):null}}setTree(e,n){if(ie(e))return n;{const r=re(e),s=(this.children.get(r)||new Te(null)).setTree(Se(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Te(this.value,o)}}fold(e){return this.fold_(pe(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Le(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,pe(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ie(e))return null;{const s=re(e),o=this.children.get(s);return o?o.findOnPath_(Se(e),Le(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,pe(),n)}foreachOnPath_(e,n,r){if(ie(e))return this;{this.value&&r(n,this.value);const i=re(e),s=this.children.get(i);return s?s.foreachOnPath_(Se(e),Le(n,i),r):new Te(null)}}foreach(e){this.foreach_(pe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Le(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.writeTree_=e}static empty(){return new Vr(new Te(null))}}function dh(t,e,n){if(ie(e))return new Vr(new Te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=mn(i,e);return s=s.updateChild(o,n),new Vr(t.writeTree_.set(i,s))}else{const i=new Te(n),s=t.writeTree_.setTree(e,i);return new Vr(s)}}}function UE(t,e,n){let r=t;return Nt(n,(i,s)=>{r=dh(r,Le(e,i),s)}),r}function Tx(t,e){if(ie(e))return Vr.empty();{const n=t.writeTree_.setTree(e,new Te(null));return new Vr(n)}}function jE(t,e){return tl(t,e)!=null}function tl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(mn(n.path,e)):null}function Ix(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ke,(r,i)=>{e.push(new oe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new oe(r,i.value))}),e}function Us(t,e){if(ie(e))return t;{const n=tl(t,e);return n!=null?new Vr(new Te(n)):new Vr(t.writeTree_.subtree(e))}}function VE(t){return t.writeTree_.isEmpty()}function _u(t,e){return aU(pe(),t.writeTree_,e)}function aU(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?($(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=aU(Le(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Le(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e){return hU(e,t)}function $pe(t,e,n,r,i){$(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=dh(t.visibleWrites,e,n)),t.lastWriteId=r}function Mpe(t,e,n,r){$(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=UE(t.visibleWrites,e,n),t.lastWriteId=r}function Fpe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Lpe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Upe(a,r.path)?i=!1:gr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return jpe(t),!0;if(r.snap)t.visibleWrites=Tx(t.visibleWrites,r.path);else{const a=r.children;Nt(a,l=>{t.visibleWrites=Tx(t.visibleWrites,Le(r.path,l))})}return!0}else return!1}function Upe(t,e){if(t.snap)return gr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gr(Le(t.path,n),e))return!0;return!1}function jpe(t){t.visibleWrites=lU(t.allWrites,Vpe,pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Vpe(t){return t.visible}function lU(t,e,n){let r=Vr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)gr(n,o)?(a=mn(n,o),r=dh(r,a,s.snap)):gr(o,n)&&(a=mn(o,n),r=dh(r,pe(),s.snap.getChild(a)));else if(s.children){if(gr(n,o))a=mn(n,o),r=UE(r,a,s.children);else if(gr(o,n))if(a=mn(o,n),ie(a))r=UE(r,pe(),s.children);else{const l=ma(s.children,re(a));if(l){const u=l.getChild(Se(a));r=dh(r,pe(),u)}}}else throw Lu("WriteRecord should have .snap or .children")}}return r}function uU(t,e,n,r,i){if(!r&&!i){const s=tl(t.visibleWrites,e);if(s!=null)return s;{const o=Us(t.visibleWrites,e);if(VE(o))return n;if(n==null&&!jE(o,pe()))return null;{const a=n||K.EMPTY_NODE;return _u(o,a)}}}else{const s=Us(t.visibleWrites,e);if(!i&&VE(s))return n;if(!i&&n==null&&!jE(s,pe()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(gr(u.path,e)||gr(e,u.path))},a=lU(t.allWrites,o,e),l=n||K.EMPTY_NODE;return _u(a,l)}}}function Bpe(t,e,n){let r=K.EMPTY_NODE;const i=tl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ke,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Us(t.visibleWrites,e);return n.forEachChild(ke,(o,a)=>{const l=_u(Us(s,new ge(o)),a);r=r.updateImmediateChild(o,l)}),Ix(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Us(t.visibleWrites,e);return Ix(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function zpe(t,e,n,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Le(e,n);if(jE(t.visibleWrites,s))return null;{const o=Us(t.visibleWrites,s);return VE(o)?i.getChild(n):_u(o,i.getChild(n))}}function qpe(t,e,n,r){const i=Le(e,n),s=tl(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Us(t.visibleWrites,i);return _u(o,r.getNode().getImmediateChild(n))}else return null}function Wpe(t,e){return tl(t.visibleWrites,e)}function Hpe(t,e,n,r,i,s,o){let a;const l=Us(t.visibleWrites,e),u=tl(l,pe());if(u!=null)a=u;else if(n!=null)a=_u(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const c=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&c.length<i;)h(f,r)!==0&&c.push(f),f=d.getNext();return c}else return[]}function Kpe(){return{visibleWrites:Vr.empty(),allWrites:[],lastWriteId:-1}}function rm(t,e,n,r){return uU(t.writeTree,t.treePath,e,n,r)}function dI(t,e){return Bpe(t.writeTree,t.treePath,e)}function Cx(t,e,n,r){return zpe(t.writeTree,t.treePath,e,n,r)}function im(t,e){return Wpe(t.writeTree,Le(t.treePath,e))}function Gpe(t,e,n,r,i,s){return Hpe(t.writeTree,t.treePath,e,n,r,i,s)}function fI(t,e,n){return qpe(t.writeTree,t.treePath,e,n)}function cU(t,e){return hU(Le(t.treePath,e),t.writeTree)}function hU(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qpe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ld(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ad(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,yu(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ld(r,e.snapshotNode,i.oldSnap));else throw Lu("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ype{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const dU=new Ype;class pI{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new eo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fI(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ta(this.viewCache_),s=Gpe(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xpe(t){return{filter:t}}function Jpe(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Zpe(t,e,n,r,i){const s=new Qpe;let o,a;if(n.type===Mr.OVERWRITE){const u=n;u.source.fromUser?o=BE(t,e,u.path,u.snap,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ie(u.path),o=sm(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Mr.MERGE){const u=n;u.source.fromUser?o=tge(t,e,u.path,u.children,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=zE(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Mr.ACK_USER_WRITE){const u=n;u.revert?o=ige(t,e,u.path,r,i,s):o=nge(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Mr.LISTEN_COMPLETE)o=rge(t,e,n.path,r,s);else throw Lu("Unknown operation type: "+n.type);const l=s.getChanges();return ege(e,o,l),{viewCache:o,changes:l}}function ege(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=nm(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(sU(nm(e)))}}function fU(t,e,n,r,i,s){const o=e.eventCache;if(im(r,n)!=null)return e;{let a,l;if(ie(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Ta(e),c=u instanceof K?u:K.EMPTY_NODE,h=dI(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const u=rm(r,Ta(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=re(n);if(u===".priority"){$(Zs(n)===1,"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const h=Cx(r,n,c,l);h!=null?a=t.filter.updatePriority(c,h):a=o.getNode()}else{const c=Se(n);let h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const d=Cx(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(u).updateChild(c,d):h=o.getNode().getImmediateChild(u)}else h=fI(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,c,i,s):a=o.getNode()}}return hh(e,a,o.isFullyInitialized()||ie(n),t.filter.filtersNodes())}}function sm(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(ie(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),f,null)}else{const f=re(n);if(!l.isCompleteForPath(n)&&Zs(n)>1)return e;const p=Se(n),w=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?u=c.updatePriority(l.getNode(),w):u=c.updateChild(l.getNode(),f,w,p,dU,null)}const h=oU(e,u,l.isFullyInitialized()||ie(n),c.filtersNodes()),d=new pI(i,h,s);return fU(t,h,n,i,d,a)}function BE(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new pI(i,e,s);if(ie(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=hh(e,u,!0,t.filter.filtersNodes());else{const h=re(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=hh(e,u,a.isFullyInitialized(),a.isFiltered());else{const d=Se(n),f=a.getNode().getImmediateChild(h);let p;if(ie(d))p=r;else{const g=c.getCompleteChild(h);g!=null?nI(d)===".priority"&&g.getChild(Y2(d)).isEmpty()?p=g:p=g.updateChild(d,r):p=K.EMPTY_NODE}if(f.equals(p))l=e;else{const g=t.filter.updateChild(a.getNode(),h,p,d,c,o);l=hh(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function kx(t,e){return t.eventCache.isCompleteForChild(e)}function tge(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=Le(n,l);kx(e,re(c))&&(a=BE(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=Le(n,l);kx(e,re(c))||(a=BE(t,a,c,u,i,s,o))}),a}function Ax(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function zE(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;ie(n)?u=r:u=new Te(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((h,d)=>{if(c.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=Ax(t,f,d);l=sm(t,l,new ge(h),p,i,s,o,a)}}),u.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!c.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),g=Ax(t,p,d);l=sm(t,l,new ge(h),g,i,s,o,a)}}),l}function nge(t,e,n,r,i,s,o){if(im(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ie(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return sm(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ie(n)){let u=new Te(null);return l.getNode().forEachChild(ci,(c,h)=>{u=u.set(new ge(c),h)}),zE(t,e,n,u,i,s,a,o)}else return e}else{let u=new Te(null);return r.foreach((c,h)=>{const d=Le(n,c);l.isCompleteForPath(d)&&(u=u.set(c,l.getNode().getChild(d)))}),zE(t,e,n,u,i,s,a,o)}}function rge(t,e,n,r,i){const s=e.serverCache,o=oU(e,s.getNode(),s.isFullyInitialized()||ie(n),s.isFiltered());return fU(t,o,n,r,dU,i)}function ige(t,e,n,r,i,s){let o;if(im(r,n)!=null)return e;{const a=new pI(r,e,i),l=e.eventCache.getNode();let u;if(ie(n)||re(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=rm(r,Ta(e));else{const h=e.serverCache.getNode();$(h instanceof K,"serverChildren would be complete if leaf node"),c=dI(r,h)}c=c,u=t.filter.updateFullNode(l,c,s)}else{const c=re(n);let h=fI(r,c,e.serverCache);h==null&&e.serverCache.isCompleteForChild(c)&&(h=l.getImmediateChild(c)),h!=null?u=t.filter.updateChild(l,c,h,Se(n),a,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,K.EMPTY_NODE,Se(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=rm(r,Ta(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||im(r,pe())!=null,hh(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sge{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new lI(r.getIndex()),s=_pe(r);this.processor_=Xpe(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(K.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(K.EMPTY_NODE,a.getNode(),null),c=new eo(l,o.isFullyInitialized(),i.filtersNodes()),h=new eo(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=iv(h,c),this.eventGenerator_=new xpe(this.query_)}get query(){return this.query_}}function oge(t){return t.viewCache_.serverCache.getNode()}function age(t){return nm(t.viewCache_)}function lge(t,e){const n=Ta(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ie(e)&&!n.getImmediateChild(re(e)).isEmpty())?n.getChild(e):null}function Rx(t){return t.eventRegistrations_.length===0}function uge(t,e){t.eventRegistrations_.push(e)}function xx(t,e,n){const r=[];if(n){$(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Nx(t,e,n,r){e.type===Mr.MERGE&&e.source.queryId!==null&&($(Ta(t.viewCache_),"We should always have a full cache before handling merges"),$(nm(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=Zpe(t.processor_,i,e,n,r);return Jpe(t.processor_,s.viewCache),$(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,pU(t,s.changes,s.viewCache.eventCache.getNode(),null)}function cge(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ke,(s,o)=>{r.push(yu(s,o))}),n.isFullyInitialized()&&r.push(sU(n.getNode())),pU(t,r,n.getNode(),e)}function pU(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Npe(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om;class gU{constructor(){this.views=new Map}}function hge(t){$(!om,"__referenceConstructor has already been defined"),om=t}function dge(){return $(om,"Reference.ts has not been loaded"),om}function fge(t){return t.views.size===0}function gI(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return $(s!=null,"SyncTree gave us an op for an invalid query."),Nx(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Nx(o,e,n,r));return s}}function mU(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=rm(n,i?r:null),l=!1;a?l=!0:r instanceof K?(a=dI(n,r),l=!1):(a=K.EMPTY_NODE,l=!1);const u=iv(new eo(a,l,!1),new eo(r,i,!1));return new sge(e,u)}return o}function pge(t,e,n,r,i,s){const o=mU(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),uge(o,n),cge(o,n)}function gge(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=to(t);if(i==="default")for(const[l,u]of t.views.entries())o=o.concat(xx(u,n,r)),Rx(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(xx(l,n,r)),Rx(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!to(t)&&s.push(new(dge())(e._repo,e._path)),{removed:s,events:o}}function yU(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function js(t,e){let n=null;for(const r of t.views.values())n=n||lge(r,e);return n}function vU(t,e){if(e._queryParams.loadsAllData())return ov(t);{const r=e._queryIdentifier;return t.views.get(r)}}function _U(t,e){return vU(t,e)!=null}function to(t){return ov(t)!=null}function ov(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am;function mge(t){$(!am,"__referenceConstructor has already been defined"),am=t}function yge(){return $(am,"Reference.ts has not been loaded"),am}let vge=1;class Px{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Te(null),this.pendingWriteTree_=Kpe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mI(t,e,n,r,i){return $pe(t.pendingWriteTree_,e,n,r,i),i?Ju(t,new ba(uI(),e,n)):[]}function _ge(t,e,n,r){Mpe(t.pendingWriteTree_,e,n,r);const i=Te.fromObject(n);return Ju(t,new vu(uI(),e,i))}function As(t,e,n=!1){const r=Fpe(t.pendingWriteTree_,e);if(Lpe(t.pendingWriteTree_,e)){let s=new Te(null);return r.snap!=null?s=s.set(pe(),!0):Nt(r.children,o=>{s=s.set(new ge(o),!0)}),Ju(t,new tm(r.path,s,n))}else return[]}function sf(t,e,n){return Ju(t,new ba(cI(),e,n))}function wge(t,e,n){const r=Te.fromObject(n);return Ju(t,new vu(cI(),e,r))}function Ege(t,e){return Ju(t,new cd(cI(),e))}function Sge(t,e,n){const r=yI(t,n);if(r){const i=vI(r),s=i.path,o=i.queryId,a=mn(s,e),l=new cd(hI(o),a);return _I(t,s,l)}else return[]}function lm(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||_U(o,e))){const l=gge(o,e,n,r);fge(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const c=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(s,(d,f)=>to(f));if(c&&!h){const d=t.syncPointTree_.subtree(s);if(!d.isEmpty()){const f=Ige(d);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,m=bU(t,g);t.listenProvider_.startListening(fh(w),hd(t,w),m.hashFn,m.onComplete)}}}!h&&u.length>0&&!r&&(c?t.listenProvider_.stopListening(fh(e),null):u.forEach(d=>{const f=t.queryToTagMap.get(lv(d));t.listenProvider_.stopListening(fh(d),f)}))}Cge(t,u)}return a}function wU(t,e,n,r){const i=yI(t,r);if(i!=null){const s=vI(i),o=s.path,a=s.queryId,l=mn(o,e),u=new ba(hI(a),l,n);return _I(t,o,u)}else return[]}function bge(t,e,n,r){const i=yI(t,r);if(i){const s=vI(i),o=s.path,a=s.queryId,l=mn(o,e),u=Te.fromObject(n),c=new vu(hI(a),l,u);return _I(t,o,c)}else return[]}function qE(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(d,f)=>{const p=mn(d,i);s=s||js(f,p),o=o||to(f)});let a=t.syncPointTree_.get(i);a?(o=o||to(a),s=s||js(a,pe())):(a=new gU,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=K.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{const g=js(p,pe());g&&(s=s.updateImmediateChild(f,g))}));const u=_U(a,e);if(!u&&!e._queryParams.loadsAllData()){const d=lv(e);$(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const f=kge();t.queryToTagMap.set(d,f),t.tagToQueryMap.set(f,d)}const c=sv(t.pendingWriteTree_,i);let h=pge(a,e,n,c,s,l);if(!u&&!o&&!r){const d=vU(a,e);h=h.concat(Age(t,e,d))}return h}function av(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=mn(o,e),u=js(a,l);if(u)return u});return uU(i,e,s,n,!0)}function Tge(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,c)=>{const h=mn(u,n);r=r||js(c,h)});let i=t.syncPointTree_.get(n);i?r=r||js(i,pe()):(i=new gU,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new eo(r,!0,!1):null,a=sv(t.pendingWriteTree_,e._path),l=mU(i,e,a,s?o.getNode():K.EMPTY_NODE,s);return age(l)}function Ju(t,e){return EU(e,t.syncPointTree_,null,sv(t.pendingWriteTree_,pe()))}function EU(t,e,n,r){if(ie(t.path))return SU(t,e,n,r);{const i=e.get(pe());n==null&&i!=null&&(n=js(i,pe()));let s=[];const o=re(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=cU(r,o);s=s.concat(EU(a,l,u,c))}return i&&(s=s.concat(gI(i,t,r,n))),s}}function SU(t,e,n,r){const i=e.get(pe());n==null&&i!=null&&(n=js(i,pe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=cU(r,o),c=t.operationForChild(o);c&&(s=s.concat(SU(c,a,l,u)))}),i&&(s=s.concat(gI(i,t,r,n))),s}function bU(t,e){const n=e.query,r=hd(t,n);return{hashFn:()=>(oge(e)||K.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Sge(t,n._path,r):Ege(t,n._path);{const s=wfe(i,n);return lm(t,n,null,s)}}}}function hd(t,e){const n=lv(e);return t.queryToTagMap.get(n)}function lv(t){return t._path.toString()+"$"+t._queryIdentifier}function yI(t,e){return t.tagToQueryMap.get(e)}function vI(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ge(t.substr(0,e))}}function _I(t,e,n){const r=t.syncPointTree_.get(e);$(r,"Missing sync point for query tag that we're tracking");const i=sv(t.pendingWriteTree_,e);return gI(r,n,i,null)}function Ige(t){return t.fold((e,n,r)=>{if(n&&to(n))return[ov(n)];{let i=[];return n&&(i=yU(n)),Nt(r,(s,o)=>{i=i.concat(o)}),i}})}function fh(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(yge())(t._repo,t._path):t}function Cge(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=lv(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function kge(){return vge++}function Age(t,e,n){const r=e._path,i=hd(t,e),s=bU(t,n),o=t.listenProvider_.startListening(fh(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)$(!to(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,c,h)=>{if(!ie(u)&&c&&to(c))return[ov(c).query];{let d=[];return c&&(d=d.concat(yU(c).map(f=>f.query))),Nt(h,(f,p)=>{d=d.concat(p)}),d}});for(let u=0;u<l.length;++u){const c=l[u];t.listenProvider_.stopListening(fh(c),hd(t,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new wI(n)}node(){return this.node_}}class EI{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Le(this.path_,e);return new EI(this.syncTree_,n)}node(){return av(this.syncTree_,this.path_)}}const Rge=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ox=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return xge(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Nge(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},xge=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},Nge=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);const i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},TU=function(t,e,n,r){return bI(e,new EI(n,t),r)},SI=function(t,e,n){return bI(t,new wI(e),n)};function bI(t,e,n){const r=t.getPriority().val(),i=Ox(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Ox(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new yt(a,Be(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new yt(i))),o.forEachChild(ke,(a,l)=>{const u=bI(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function uv(t,e){let n=e instanceof ge?e:new ge(e),r=t,i=re(n);for(;i!==null;){const s=ma(r.node.children,i)||{children:{},childCount:0};r=new TI(i,r,s),n=Se(n),i=re(n)}return r}function nl(t){return t.node.value}function II(t,e){t.node.value=e,WE(t)}function IU(t){return t.node.childCount>0}function Pge(t){return nl(t)===void 0&&!IU(t)}function cv(t,e){Nt(t.node.children,(n,r)=>{e(new TI(n,t,r))})}function CU(t,e,n,r){n&&!r&&e(t),cv(t,i=>{CU(i,e,!0,r)}),n&&r&&e(t)}function Oge(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function of(t){return new ge(t.parent===null?t.name:of(t.parent)+"/"+t.name)}function WE(t){t.parent!==null&&Dge(t.parent,t.name,t)}function Dge(t,e,n){const r=Pge(n),i=er(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,WE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,WE(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ge=/[\[\].#$\/\u0000-\u001F\u007F]/,Mge=/[\[\].#$\u0000-\u001F\u007F]/,dw=10*1024*1024,hv=function(t){return typeof t=="string"&&t.length!==0&&!$ge.test(t)},kU=function(t){return typeof t=="string"&&t.length!==0&&!Mge.test(t)},Fge=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kU(t)},dd=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ev(t)||t&&typeof t=="object"&&er(t,".sv")},vi=function(t,e,n,r){r&&e===void 0||af(Mn(t,"value"),e,n)},af=function(t,e,n){const r=n instanceof ge?new Jfe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Fo(r));if(typeof e=="function")throw new Error(t+"contains a function "+Fo(r)+" with contents = "+e.toString());if(ev(e))throw new Error(t+"contains "+e.toString()+" "+Fo(r));if(typeof e=="string"&&e.length>dw/3&&Iy(e)>dw)throw new Error(t+"contains a string greater than "+dw+" utf8 bytes "+Fo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Nt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!hv(o)))throw new Error(t+" contains an invalid key ("+o+") "+Fo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Zfe(r,o),af(t,a,r),epe(r)}),i&&s)throw new Error(t+' contains ".value" child '+Fo(r)+" in addition to actual children.")}},Lge=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=od(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!hv(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Xfe);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&gr(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},AU=function(t,e,n,r){if(r&&e===void 0)return;const i=Mn(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Nt(e,(o,a)=>{const l=new ge(o);if(af(i,a,Le(n,l)),nI(l)===".priority"&&!dd(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),Lge(i,s)},CI=function(t,e,n){if(!(n&&e===void 0)){if(ev(e))throw new Error(Mn(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!dd(e))throw new Error(Mn(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lf=function(t,e,n,r){if(!(r&&n===void 0)&&!hv(n))throw new Error(Mn(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},fd=function(t,e,n,r){if(!(r&&n===void 0)&&!kU(n))throw new Error(Mn(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Uge=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fd(t,e,n,r)},mr=function(t,e){if(re(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},RU=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!hv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Fge(n))throw new Error(Mn(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jge{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dv(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!rI(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function xU(t,e,n){dv(t,n),NU(t,r=>rI(r,e))}function tr(t,e,n){dv(t,n),NU(t,r=>gr(r,e)||gr(e,r))}function NU(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Vge(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Vge(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();la&&bt("event: "+n.toString()),Yu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU="repo_interrupt",Bge=25;class zge{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jge,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=em(),this.transactionQueueTree_=new TI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qge(t,e,n){if(t.stats_=eI(t.repoInfo_),t.forceRestClient_||Sfe())t.server_=new Zg(t.repoInfo_,(r,i,s,o)=>{Dx(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>$x(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ht(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new qi(t.repoInfo_,e,(r,i,s,o)=>{Dx(t,r,i,s,o)},r=>{$x(t,r)},r=>{Wge(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=kfe(t.repoInfo_,()=>new Rpe(t.stats_,t.server_)),t.infoData_=new Tpe,t.infoSyncTree_=new Px({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=sf(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),kI(t,"connected",!1),t.serverSyncTree_=new Px({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);tr(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function OU(t){const n=t.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function uf(t){return Rge({timestamp:OU(t)})}function Dx(t,e,n,r,i){t.dataUpdateCount++;const s=new ge(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=xg(n,u=>Be(u));o=bge(t.serverSyncTree_,s,l,i)}else{const l=Be(n);o=wU(t.serverSyncTree_,s,l,i)}else if(r){const l=xg(n,u=>Be(u));o=wge(t.serverSyncTree_,s,l)}else{const l=Be(n);o=sf(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=wu(t,s)),tr(t.eventQueue_,a,o)}function $x(t,e){kI(t,"connected",e),e===!1&&Gge(t)}function Wge(t,e){Nt(e,(n,r)=>{kI(t,n,r)})}function kI(t,e,n){const r=new ge("/.info/"+e),i=Be(n);t.infoData_.updateSnapshot(r,i);const s=sf(t.infoSyncTree_,r,i);tr(t.eventQueue_,r,s)}function fv(t){return t.nextWriteId_++}function Hge(t,e,n){const r=Tge(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Be(i).withIndex(e._queryParams.getIndex());qE(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=sf(t.serverSyncTree_,e._path,s);else{const a=hd(t.serverSyncTree_,e);o=wU(t.serverSyncTree_,e._path,s,a)}return tr(t.eventQueue_,e._path,o),lm(t.serverSyncTree_,e,n,null,!0),s},i=>(Zu(t,"get for query "+ht(e)+" failed: "+i),Promise.reject(new Error(i))))}function AI(t,e,n,r,i){Zu(t,"set",{path:e.toString(),value:n,priority:r});const s=uf(t),o=Be(n,r),a=av(t.serverSyncTree_,e),l=SI(o,a,s),u=fv(t),c=mI(t.serverSyncTree_,e,l,u,!0);dv(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(d,f)=>{const p=d==="ok";p||rn("set at "+e+" failed: "+d);const g=As(t.serverSyncTree_,u,!p);tr(t.eventQueue_,e,g),no(t,i,d,f)});const h=xI(t,e);wu(t,h),tr(t.eventQueue_,h,[])}function Kge(t,e,n,r){Zu(t,"update",{path:e.toString(),value:n});let i=!0;const s=uf(t),o={};if(Nt(n,(a,l)=>{i=!1,o[a]=TU(Le(e,a),Be(l),t.serverSyncTree_,s)}),i)bt("update() called with empty data.  Don't do anything."),no(t,r,"ok",void 0);else{const a=fv(t),l=_ge(t.serverSyncTree_,e,o,a);dv(t.eventQueue_,l),t.server_.merge(e.toString(),n,(u,c)=>{const h=u==="ok";h||rn("update at "+e+" failed: "+u);const d=As(t.serverSyncTree_,a,!h),f=d.length>0?wu(t,e):e;tr(t.eventQueue_,f,d),no(t,r,u,c)}),Nt(n,u=>{const c=xI(t,Le(e,u));wu(t,c)}),tr(t.eventQueue_,e,[])}}function Gge(t){Zu(t,"onDisconnectEvents");const e=uf(t),n=em();LE(t.onDisconnect_,pe(),(i,s)=>{const o=TU(i,s,t.serverSyncTree_,e);Xu(n,i,o)});let r=[];LE(n,pe(),(i,s)=>{r=r.concat(sf(t.serverSyncTree_,i,s));const o=xI(t,i);wu(t,o)}),t.onDisconnect_=em(),tr(t.eventQueue_,pe(),r)}function Qge(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&FE(t.onDisconnect_,e),no(t,n,r,i)})}function Mx(t,e,n,r){const i=Be(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Xu(t.onDisconnect_,e,i),no(t,r,s,o)})}function Yge(t,e,n,r,i){const s=Be(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Xu(t.onDisconnect_,e,s),no(t,i,o,a)})}function Xge(t,e,n,r){if(Rg(n)){bt("onDisconnect().update() called with empty data.  Don't do anything."),no(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&Nt(n,(o,a)=>{const l=Be(a);Xu(t.onDisconnect_,Le(e,o),l)}),no(t,r,i,s)})}function Jge(t,e,n){let r;re(e._path)===".info"?r=qE(t.infoSyncTree_,e,n):r=qE(t.serverSyncTree_,e,n),xU(t.eventQueue_,e._path,r)}function HE(t,e,n){let r;re(e._path)===".info"?r=lm(t.infoSyncTree_,e,n):r=lm(t.serverSyncTree_,e,n),xU(t.eventQueue_,e._path,r)}function DU(t){t.persistentConnection_&&t.persistentConnection_.interrupt(PU)}function Zge(t){t.persistentConnection_&&t.persistentConnection_.resume(PU)}function Zu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),bt(n,...e)}function no(t,e,n,r){e&&Yu(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function eme(t,e,n,r,i,s){Zu(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:C2(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=RI(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{af("transaction failed: Data returned ",l,o.path),o.status=0;const u=uv(t.transactionQueueTree_,e),c=nl(u)||[];c.push(o),II(u,c);let h;typeof l=="object"&&l!==null&&er(l,".priority")?(h=ma(l,".priority"),$(dd(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(av(t.serverSyncTree_,e)||K.EMPTY_NODE).getPriority().val();const d=uf(t),f=Be(l,h),p=SI(f,a,d);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=fv(t);const g=mI(t.serverSyncTree_,e,p,o.currentWriteId,o.applyLocally);tr(t.eventQueue_,e,g),pv(t,t.transactionQueueTree_)}}function RI(t,e,n){return av(t.serverSyncTree_,e,n)||K.EMPTY_NODE}function pv(t,e=t.transactionQueueTree_){if(e||gv(t,e),nl(e)){const n=MU(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&tme(t,of(e),n)}else IU(e)&&cv(e,n=>{pv(t,n)})}function tme(t,e,n){const r=n.map(u=>u.currentWriteId),i=RI(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];$(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const h=mn(e,c.path);s=s.updateChild(h,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{Zu(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,c=c.concat(As(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();gv(t,uv(t.transactionQueueTree_,e)),pv(t,t.transactionQueueTree_),tr(t.eventQueue_,e,c);for(let d=0;d<h.length;d++)Yu(h[d])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{rn("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}wu(t,e)}},o)}function wu(t,e){const n=$U(t,e),r=of(n),i=MU(t,n);return nme(t,i,r),r}function nme(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=mn(n,l.path);let c=!1,h;if($(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,h=l.abortReason,i=i.concat(As(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Bge)c=!0,h="maxretry",i=i.concat(As(t.serverSyncTree_,l.currentWriteId,!0));else{const d=RI(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){af("transaction failed: Data returned ",f,l.path);let p=Be(f);typeof f=="object"&&f!=null&&er(f,".priority")||(p=p.updatePriority(d.getPriority()));const w=l.currentWriteId,m=uf(t),y=SI(p,d,m);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=y,l.currentWriteId=fv(t),o.splice(o.indexOf(w),1),i=i.concat(mI(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(As(t.serverSyncTree_,w,!0))}else c=!0,h="nodata",i=i.concat(As(t.serverSyncTree_,l.currentWriteId,!0))}tr(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}gv(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Yu(r[a]);pv(t,t.transactionQueueTree_)}function $U(t,e){let n,r=t.transactionQueueTree_;for(n=re(e);n!==null&&nl(r)===void 0;)r=uv(r,n),e=Se(e),n=re(e);return r}function MU(t,e){const n=[];return FU(t,e,n),n.sort((r,i)=>r.order-i.order),n}function FU(t,e,n){const r=nl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);cv(e,i=>{FU(t,i,n)})}function gv(t,e){const n=nl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,II(e,n.length>0?n:void 0)}cv(e,r=>{gv(t,r)})}function xI(t,e){const n=of($U(t,e)),r=uv(t.transactionQueueTree_,e);return Oge(r,i=>{fw(t,i)}),fw(t,r),CU(r,i=>{fw(t,i)}),n}function fw(t,e){const n=nl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?($(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):($(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(As(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?II(e,void 0):n.length=s+1,tr(t.eventQueue_,of(e),i);for(let o=0;o<r.length;o++)Yu(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rme(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function ime(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rn(`Invalid query segment '${n}' in query '${t}'`)}return e}const KE=function(t,e){const n=sme(t),r=n.namespace;n.domain==="firebase.com"&&mi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&mi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||gfe();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new V2(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ge(n.pathString)}},sme=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=rme(t.substring(c,h)));const d=ime(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ht(this.snapshot.exportVal())}}class UU{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ome{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new ct;return Qge(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){mr("OnDisconnect.remove",this._path);const e=new ct;return Mx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){mr("OnDisconnect.set",this._path),vi("OnDisconnect.set",e,this._path,!1);const n=new ct;return Mx(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){mr("OnDisconnect.setWithPriority",this._path),vi("OnDisconnect.setWithPriority",e,this._path,!1),CI("OnDisconnect.setWithPriority",n,!1);const r=new ct;return Yge(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){mr("OnDisconnect.update",this._path),AU("OnDisconnect.update",e,this._path,!1);const n=new ct;return Xge(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ie(this._path)?null:nI(this._path)}get ref(){return new Ir(this._repo,this._path)}get _queryIdentifier(){const e=Sx(this._queryParams),n=XT(e);return n==="{}"?"default":n}get _queryObject(){return Sx(this._queryParams)}isEqual(e){if(e=N(e),!(e instanceof jn))return!1;const n=this._repo===e._repo,r=rI(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Yfe(this._path)}}function mv(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function yo(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ci){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ji)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==yi)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===ke){if(e!=null&&!dd(e)||n!=null&&!dd(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if($(t.getIndex()instanceof oI||t.getIndex()===aI,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function yv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ir extends jn{constructor(e,n){super(e,n,new nv,!1)}get parent(){const e=Y2(this._path);return e===null?null:new Ir(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ia{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ge(e),r=Ca(this.ref,e);return new Ia(this._node.getChild(n),r,ke)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ia(i,Ca(this.ref,r),ke)))}hasChild(e){const n=new ge(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jU(t,e){return t=N(t),t._checkNotDeleted("ref"),e!==void 0?Ca(t._root,e):t._root}function Fx(t,e){t=N(t),t._checkNotDeleted("refFromURL");const n=KE(e,t._repo.repoInfo_.nodeAdmin);RU("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&mi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),jU(t,n.path.toString())}function Ca(t,e){return t=N(t),re(t._path)===null?Uge("child","path",e,!1):fd("child","path",e,!1),new Ir(t._repo,Le(t._path,e))}function ame(t,e){t=N(t),mr("push",t._path),vi("push",e,t._path,!0);const n=OU(t._repo),r=mpe(n),i=Ca(t,r),s=Ca(t,r);let o;return e!=null?o=PI(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function lme(t){return mr("remove",t._path),PI(t,null)}function PI(t,e){t=N(t),mr("set",t._path),vi("set",e,t._path,!1);const n=new ct;return AI(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ume(t,e){t=N(t),mr("setPriority",t._path),CI("setPriority",e,!1);const n=new ct;return AI(t._repo,Le(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function cme(t,e,n){if(mr("setWithPriority",t._path),vi("setWithPriority",e,t._path,!1),CI("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new ct;return AI(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function hme(t,e){AU("update",e,t._path,!1);const n=new ct;return Kge(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function dme(t){t=N(t);const e=new NI(()=>{}),n=new cf(e);return Hge(t._repo,t,n).then(r=>new Ia(r,new Ir(t._repo,t._path),t._queryParams.getIndex()))}class cf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new LU("value",this,new Ia(e.snapshotNode,new Ir(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new UU(this,e,n):null}matches(e){return e instanceof cf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class vv{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new UU(this,e,n):null}createEvent(e,n){$(e.childName!=null,"Child events should have a childName.");const r=Ca(new Ir(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new LU(e.type,this,new Ia(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof vv?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function hf(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,u=(c,h)=>{HE(t._repo,t,a),l(c,h)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new NI(n,s||void 0),a=e==="value"?new cf(o):new vv(e,o);return Jge(t._repo,t,a),()=>HE(t._repo,t,a)}function GE(t,e,n,r){return hf(t,"value",e,n,r)}function Lx(t,e,n,r){return hf(t,"child_added",e,n,r)}function Ux(t,e,n,r){return hf(t,"child_changed",e,n,r)}function jx(t,e,n,r){return hf(t,"child_moved",e,n,r)}function Vx(t,e,n,r){return hf(t,"child_removed",e,n,r)}function Bx(t,e,n){let r=null;const i=n?new NI(n):null;e==="value"?r=new cf(i):e&&(r=new vv(e,i)),HE(t._repo,t,r)}class Hr{}class VU extends Hr{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){vi("endAt",this._value,e._path,!0);const n=ME(e._queryParams,this._value,this._key);if(yv(n),yo(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jn(e._repo,e._path,n,e._orderByCalled)}}function fme(t,e){return lf("endAt","key",e,!0),new VU(t,e)}class pme extends Hr{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){vi("endBefore",this._value,e._path,!1);const n=bpe(e._queryParams,this._value,this._key);if(yv(n),yo(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jn(e._repo,e._path,n,e._orderByCalled)}}function gme(t,e){return lf("endBefore","key",e,!0),new pme(t,e)}class BU extends Hr{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){vi("startAt",this._value,e._path,!0);const n=$E(e._queryParams,this._value,this._key);if(yv(n),yo(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new jn(e._repo,e._path,n,e._orderByCalled)}}function mme(t=null,e){return lf("startAt","key",e,!0),new BU(t,e)}class yme extends Hr{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){vi("startAfter",this._value,e._path,!1);const n=Spe(e._queryParams,this._value,this._key);if(yv(n),yo(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new jn(e._repo,e._path,n,e._orderByCalled)}}function vme(t,e){return lf("startAfter","key",e,!0),new yme(t,e)}class _me extends Hr{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new jn(e._repo,e._path,wpe(e._queryParams,this._limit),e._orderByCalled)}}function wme(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new _me(t)}class Eme extends Hr{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new jn(e._repo,e._path,Epe(e._queryParams,this._limit),e._orderByCalled)}}function Sme(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Eme(t)}class bme extends Hr{constructor(e){super(),this._path=e}_apply(e){mv(e,"orderByChild");const n=new ge(this._path);if(ie(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new oI(n),i=rv(e._queryParams,r);return yo(i),new jn(e._repo,e._path,i,!0)}}function Tme(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return fd("orderByChild","path",t,!1),new bme(t)}class Ime extends Hr{_apply(e){mv(e,"orderByKey");const n=rv(e._queryParams,ci);return yo(n),new jn(e._repo,e._path,n,!0)}}function Cme(){return new Ime}class kme extends Hr{_apply(e){mv(e,"orderByPriority");const n=rv(e._queryParams,ke);return yo(n),new jn(e._repo,e._path,n,!0)}}function Ame(){return new kme}class Rme extends Hr{_apply(e){mv(e,"orderByValue");const n=rv(e._queryParams,aI);return yo(n),new jn(e._repo,e._path,n,!0)}}function xme(){return new Rme}class Nme extends Hr{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(vi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new VU(this._value,this._key)._apply(new BU(this._value,this._key)._apply(e))}}function Pme(t,e){return lf("equalTo","key",e,!0),new Nme(t,e)}function Ar(t,...e){let n=N(t);for(const r of e)n=r._apply(n);return n}hge(Ir);mge(Ir);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ome="FIREBASE_DATABASE_EMULATOR_HOST",QE={};let Dme=!1;function $me(t,e,n,r){t.repoInfo_=new V2(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function zU(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||mi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=KE(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[Ome]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=KE(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new Ql(Ql.OWNER):new Tfe(t.name,t.options,e);RU("Invalid Firebase Database URL",o),ie(o.path)||mi("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Fme(a,t,c,new bfe(t.name,n));return new Lme(h,t)}function Mme(t,e){const n=QE[e];(!n||n[t.key]!==t)&&mi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),DU(t),delete n[t.key]}function Fme(t,e,n,r){let i=QE[e.name];i||(i={},QE[e.name]=i);let s=i[t.toURLString()];return s&&mi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new zge(t,Dme,n,r),i[t.toURLString()]=s,s}class Lme{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qge(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ir(this._repo,pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Mme(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&mi("Cannot call "+e+" on a deleted database.")}}function qU(){gu.IS_TRANSPORT_INITIALIZED&&rn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ume(){qU(),ks.forceDisallow()}function jme(){qU(),fr.forceDisallow(),ks.forceAllow()}function Vme(t,e,n,r={}){t=N(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&mi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&mi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ql(Ql.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Qb(r.mockUserToken,t.app.options.projectId);s=new Ql(o)}$me(i,e,n,s)}function Bme(t){t=N(t),t._checkNotDeleted("goOffline"),DU(t._repo)}function zme(t){t=N(t),t._checkNotDeleted("goOnline"),Zge(t._repo)}function qme(t,e){A2(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wme(t){T2(bi),Ye(new fe("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return zU(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),we(ix,sx,t),we(ix,sx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hme={".sv":"timestamp"};function Kme(){return Hme}function Gme(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qme{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Yme(t,e,n){var r;if(t=N(t),mr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new ct,o=(l,u,c)=>{let h=null;l?s.reject(l):(h=new Ia(c,new Ir(t._repo,t._path),ke),s.resolve(new Qme(u,h)))},a=GE(t,()=>{});return eme(t._repo,t._path,e,o,a,i),s.promise}qi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};qi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Wme();const Xme="@firebase/database-compat",Jme="0.2.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zme=new Si("@firebase/database-compat"),WU=function(t){const e="FIREBASE WARNING: "+t;Zme.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eye=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Mn(t,e)+"must be a boolean.")},tye=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Mn(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nye{constructor(e){this._delegate=e}cancel(e){G("OnDisconnect.cancel",0,1,arguments.length),wt("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){G("OnDisconnect.remove",0,1,arguments.length),wt("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){G("OnDisconnect.set",1,2,arguments.length),wt("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){G("OnDisconnect.setWithPriority",2,3,arguments.length),wt("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(G("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,WU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rye{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return G("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this._database=e,this._delegate=n}val(){return G("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return G("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return G("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return G("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return G("DataSnapshot.child",0,1,arguments.length),e=String(e),fd("DataSnapshot.child","path",e,!1),new Vs(this._database,this._delegate.child(e))}hasChild(e){return G("DataSnapshot.hasChild",1,1,arguments.length),fd("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return G("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return G("DataSnapshot.forEach",1,1,arguments.length),wt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new Vs(this._database,n)))}hasChildren(){return G("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return G("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return G("DataSnapshot.ref",0,0,arguments.length),new zn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ft{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;G("Query.on",2,4,arguments.length),wt("Query.on","callback",n,!1);const o=Ft.getCancelAndContextArgs_("Query.on",r,i),a=(u,c)=>{n.call(o.context,new Vs(this.database,u),c)};a.userCallback=n,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return GE(this._delegate,a,l),n;case"child_added":return Lx(this._delegate,a,l),n;case"child_removed":return Vx(this._delegate,a,l),n;case"child_changed":return Ux(this._delegate,a,l),n;case"child_moved":return jx(this._delegate,a,l),n;default:throw new Error(Mn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(G("Query.off",0,3,arguments.length),tye("Query.off",e,!0),wt("Query.off","callback",n,!0),tA("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,Bx(this._delegate,e,i)}else Bx(this._delegate,e)}get(){return dme(this._delegate).then(e=>new Vs(this.database,e))}once(e,n,r,i){G("Query.once",1,4,arguments.length),wt("Query.once","callback",n,!0);const s=Ft.getCancelAndContextArgs_("Query.once",r,i),o=new ct,a=(u,c)=>{const h=new Vs(this.database,u);n&&n.call(s.context,h,c),o.resolve(h)};a.userCallback=n,a.context=s.context;const l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":GE(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Lx(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Vx(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Ux(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":jx(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Mn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return G("Query.limitToFirst",1,1,arguments.length),new Ft(this.database,Ar(this._delegate,wme(e)))}limitToLast(e){return G("Query.limitToLast",1,1,arguments.length),new Ft(this.database,Ar(this._delegate,Sme(e)))}orderByChild(e){return G("Query.orderByChild",1,1,arguments.length),new Ft(this.database,Ar(this._delegate,Tme(e)))}orderByKey(){return G("Query.orderByKey",0,0,arguments.length),new Ft(this.database,Ar(this._delegate,Cme()))}orderByPriority(){return G("Query.orderByPriority",0,0,arguments.length),new Ft(this.database,Ar(this._delegate,Ame()))}orderByValue(){return G("Query.orderByValue",0,0,arguments.length),new Ft(this.database,Ar(this._delegate,xme()))}startAt(e=null,n){return G("Query.startAt",0,2,arguments.length),new Ft(this.database,Ar(this._delegate,mme(e,n)))}startAfter(e=null,n){return G("Query.startAfter",0,2,arguments.length),new Ft(this.database,Ar(this._delegate,vme(e,n)))}endAt(e=null,n){return G("Query.endAt",0,2,arguments.length),new Ft(this.database,Ar(this._delegate,fme(e,n)))}endBefore(e=null,n){return G("Query.endBefore",0,2,arguments.length),new Ft(this.database,Ar(this._delegate,gme(e,n)))}equalTo(e,n){return G("Query.equalTo",1,2,arguments.length),new Ft(this.database,Ar(this._delegate,Pme(e,n)))}toString(){return G("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return G("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(G("Query.isEqual",1,1,arguments.length),!(e instanceof Ft)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,wt(e,"cancel",i.cancel,!0),i.context=r,tA(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Mn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new zn(this.database,new Ir(this._delegate._repo,this._delegate._path))}}class zn extends Ft{constructor(e,n){super(e,new jn(n._repo,n._path,new nv,!1)),this.database=e,this._delegate=n}getKey(){return G("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return G("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new zn(this.database,Ca(this._delegate,e))}getParent(){G("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new zn(this.database,e):null}getRoot(){return G("Reference.root",0,0,arguments.length),new zn(this.database,this._delegate.root)}set(e,n){G("Reference.set",1,2,arguments.length),wt("Reference.set","onComplete",n,!0);const r=PI(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(G("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,WU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mr("Reference.update",this._delegate._path),wt("Reference.update","onComplete",n,!0);const r=hme(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){G("Reference.setWithPriority",2,3,arguments.length),wt("Reference.setWithPriority","onComplete",r,!0);const i=cme(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){G("Reference.remove",0,1,arguments.length),wt("Reference.remove","onComplete",e,!0);const n=lme(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){G("Reference.transaction",1,3,arguments.length),wt("Reference.transaction","transactionUpdate",e,!1),wt("Reference.transaction","onComplete",n,!0),eye("Reference.transaction","applyLocally",r,!0);const i=Yme(this._delegate,e,{applyLocally:r}).then(s=>new rye(s.committed,new Vs(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){G("Reference.setPriority",1,2,arguments.length),wt("Reference.setPriority","onComplete",n,!0);const r=ume(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){G("Reference.push",0,2,arguments.length),wt("Reference.push","onComplete",n,!0);const r=ame(this._delegate,e),i=r.then(o=>new zn(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new zn(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return mr("Reference.onDisconnect",this._delegate._path),new nye(new ome(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ume,forceLongPolling:jme}}useEmulator(e,n,r={}){Vme(this._delegate,e,n,r)}ref(e){if(G("database.ref",0,1,arguments.length),e instanceof zn){const n=Fx(this._delegate,e.toString());return new zn(this,n)}else{const n=jU(this._delegate,e);return new zn(this,n)}}refFromURL(e){G("database.refFromURL",1,1,arguments.length);const r=Fx(this._delegate,e);return new zn(this,r)}goOffline(){return G("database.goOffline",0,0,arguments.length),Bme(this._delegate)}goOnline(){return G("database.goOnline",0,0,arguments.length),zme(this._delegate)}}pd.ServerValue={TIMESTAMP:Kme(),increment:t=>Gme(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iye({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){T2(n);const o=new W$("auth-internal",new H$("database-standalone"));return o.setComponent(new fe("auth-internal",()=>r,"PRIVATE")),{instance:new pd(zU(t,o,void 0,e,s),t),namespace:i}}var sye=Object.freeze({__proto__:null,initStandalone:iye});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oye=pd.ServerValue;function aye(t){t.INTERNAL.registerComponent(new fe("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new pd(i,r)},"PUBLIC").setServiceProps({Reference:zn,Query:Ft,Database:pd,DataSnapshot:Vs,enableLogging:qme,INTERNAL:sye,ServerValue:oye}).setMultipleInstances(!0)),t.registerVersion(Xme,Jme)}aye(rt);var lye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j,OI=OI||{},Z=lye||self;function um(){}function YE(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function df(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function uye(t){return Object.prototype.hasOwnProperty.call(t,pw)&&t[pw]||(t[pw]=++cye)}var pw="closure_uid_"+(1e9*Math.random()>>>0),cye=0;function hye(t,e,n){return t.call.apply(t.bind,arguments)}function dye(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ht(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ht=hye:Ht=dye,Ht.apply(null,arguments)}function up(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Yt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function vo(){this.s=this.s,this.o=this.o}var fye=0;vo.prototype.s=!1;vo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),fye!=0)&&uye(this)};vo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HU=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},KU=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function pye(t){e:{var e=sve;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function zx(t){return Array.prototype.concat.apply([],arguments)}function DI(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function cm(t){return/^[\s\xa0]*$/.test(t)}var qx=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function fn(t,e){return t.indexOf(e)!=-1}function gw(t,e){return t<e?-1:t>e?1:0}var pn;e:{var Wx=Z.navigator;if(Wx){var Hx=Wx.userAgent;if(Hx){pn=Hx;break e}}pn=""}function $I(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function GU(t){const e={};for(const n in t)e[n]=t[n];return e}var Kx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QU(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Kx.length;s++)n=Kx[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function MI(t){return MI[" "](t),t}MI[" "]=um;function gye(t){var e=vye;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var mye=fn(pn,"Opera"),Eu=fn(pn,"Trident")||fn(pn,"MSIE"),YU=fn(pn,"Edge"),XE=YU||Eu,XU=fn(pn,"Gecko")&&!(fn(pn.toLowerCase(),"webkit")&&!fn(pn,"Edge"))&&!(fn(pn,"Trident")||fn(pn,"MSIE"))&&!fn(pn,"Edge"),yye=fn(pn.toLowerCase(),"webkit")&&!fn(pn,"Edge");function JU(){var t=Z.document;return t?t.documentMode:void 0}var hm;e:{var mw="",yw=function(){var t=pn;if(XU)return/rv:([^\);]+)(\)|;)/.exec(t);if(YU)return/Edge\/([\d\.]+)/.exec(t);if(Eu)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(yye)return/WebKit\/(\S+)/.exec(t);if(mye)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(yw&&(mw=yw?yw[1]:""),Eu){var vw=JU();if(vw!=null&&vw>parseFloat(mw)){hm=String(vw);break e}}hm=mw}var vye={};function _ye(){return gye(function(){let t=0;const e=qx(String(hm)).split("."),n=qx("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=gw(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||gw(i[2].length==0,s[2].length==0)||gw(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var JE;if(Z.document&&Eu){var Gx=JU();JE=Gx||parseInt(hm,10)||void 0}else JE=void 0;var wye=JE,Eye=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Z.addEventListener("test",um,e),Z.removeEventListener("test",um,e)}catch{}return t}();function sn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}sn.prototype.h=function(){this.defaultPrevented=!0};function gd(t,e){if(sn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(XU){e:{try{MI(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Sye[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&gd.Z.h.call(this)}}Yt(gd,sn);var Sye={2:"touch",3:"pen",4:"mouse"};gd.prototype.h=function(){gd.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ff="closure_listenable_"+(1e6*Math.random()|0),bye=0;function Tye(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++bye,this.ca=this.fa=!1}function _v(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function wv(t){this.src=t,this.g={},this.h=0}wv.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=eS(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new Tye(e,this.src,s,!!r,i),e.fa=n,t.push(e)),e};function ZE(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=HU(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(_v(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function eS(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}var FI="closure_lm_"+(1e6*Math.random()|0),_w={};function ZU(t,e,n,r,i){if(r&&r.once)return tj(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZU(t,e[s],n,r,i);return null}return n=jI(n),t&&t[ff]?t.N(e,n,df(r)?!!r.capture:!!r,i):ej(t,e,n,!1,r,i)}function ej(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=df(i)?!!i.capture:!!i,a=UI(t);if(a||(t[FI]=a=new wv(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Iye(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Eye||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rj(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Iye(){function t(n){return e.call(t.src,t.listener,n)}var e=Cye;return t}function tj(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)tj(t,e[s],n,r,i);return null}return n=jI(n),t&&t[ff]?t.O(e,n,df(r)?!!r.capture:!!r,i):ej(t,e,n,!0,r,i)}function nj(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)nj(t,e[s],n,r,i);else r=df(r)?!!r.capture:!!r,n=jI(n),t&&t[ff]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=eS(s,n,r,i),-1<n&&(_v(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=UI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=eS(e,n,r,i)),(n=-1<t?e[t]:null)&&LI(n))}function LI(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[ff])ZE(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rj(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=UI(e))?(ZE(n,t),n.h==0&&(n.src=null,e[FI]=null)):_v(t)}}}function rj(t){return t in _w?_w[t]:_w[t]="on"+t}function Cye(t,e){if(t.ca)t=!0;else{e=new gd(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&LI(t),t=n.call(r,e)}return t}function UI(t){return t=t[FI],t instanceof wv?t:null}var ww="__closure_events_fn_"+(1e9*Math.random()>>>0);function jI(t){return typeof t=="function"?t:(t[ww]||(t[ww]=function(e){return t.handleEvent(e)}),t[ww])}function Pt(){vo.call(this),this.i=new wv(this),this.P=this,this.I=null}Yt(Pt,vo);Pt.prototype[ff]=!0;Pt.prototype.removeEventListener=function(t,e,n,r){nj(this,t,e,n,r)};function Kt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new sn(e,t);else if(e instanceof sn)e.target=e.target||t;else{var i=e;e=new sn(r,t),QU(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=cp(o,r,!0,e)&&i}if(o=e.g=t,i=cp(o,r,!0,e)&&i,i=cp(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=cp(o,r,!1,e)&&i}Pt.prototype.M=function(){if(Pt.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_v(n[r]);delete t.g[e],t.h--}}this.I=null};Pt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function cp(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&ZE(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var VI=Z.JSON.stringify;function kye(){var t=sj;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Aye{constructor(){this.h=this.g=null}add(e,n){const r=ij.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ij=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Rye,t=>t.reset());class Rye{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function xye(t){Z.setTimeout(()=>{throw t},0)}function BI(t,e){tS||Nye(),nS||(tS(),nS=!0),sj.add(t,e)}var tS;function Nye(){var t=Z.Promise.resolve(void 0);tS=function(){t.then(Pye)}}var nS=!1,sj=new Aye;function Pye(){for(var t;t=kye();){try{t.h.call(t.g)}catch(n){xye(n)}var e=ij;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}nS=!1}function Ev(t,e){Pt.call(this),this.h=t||1,this.g=e||Z,this.j=Ht(this.kb,this),this.l=Date.now()}Yt(Ev,Pt);j=Ev.prototype;j.da=!1;j.S=null;j.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Kt(this,"tick"),this.da&&(zI(this),this.start()))}};j.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function zI(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}j.M=function(){Ev.Z.M.call(this),zI(this),delete this.g};function qI(t,e,n){if(typeof t=="function")n&&(t=Ht(t,n));else if(t&&typeof t.handleEvent=="function")t=Ht(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Z.setTimeout(t,e||0)}function oj(t){t.g=qI(()=>{t.g=null,t.i&&(t.i=!1,oj(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Oye extends vo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oj(this)}M(){super.M(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function md(t){vo.call(this),this.h=t,this.g={}}Yt(md,vo);var Qx=[];function aj(t,e,n,r){Array.isArray(n)||(n&&(Qx[0]=n.toString()),n=Qx);for(var i=0;i<n.length;i++){var s=ZU(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function lj(t){$I(t.g,function(e,n){this.g.hasOwnProperty(n)&&LI(e)},t),t.g={}}md.prototype.M=function(){md.Z.M.call(this),lj(this)};md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Sv(){this.g=!0}Sv.prototype.Aa=function(){this.g=!1};function Dye(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function $ye(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Dl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Fye(t,n)+(r?" "+r:"")})}function Mye(t,e){t.info(function(){return"TIMEOUT: "+e})}Sv.prototype.info=function(){};function Fye(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return VI(n)}catch{return e}}var rl={},Yx=null;function bv(){return Yx=Yx||new Pt}rl.Ma="serverreachability";function uj(t){sn.call(this,rl.Ma,t)}Yt(uj,sn);function yd(t){const e=bv();Kt(e,new uj(e))}rl.STAT_EVENT="statevent";function cj(t,e){sn.call(this,rl.STAT_EVENT,t),this.stat=e}Yt(cj,sn);function yn(t){const e=bv();Kt(e,new cj(e,t))}rl.Na="timingevent";function hj(t,e){sn.call(this,rl.Na,t),this.size=e}Yt(hj,sn);function pf(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){t()},e)}var Tv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},dj={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function WI(){}WI.prototype.h=null;function Xx(t){return t.h||(t.h=t.i())}function fj(){}var gf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function HI(){sn.call(this,"d")}Yt(HI,sn);function KI(){sn.call(this,"c")}Yt(KI,sn);var rS;function Iv(){}Yt(Iv,WI);Iv.prototype.g=function(){return new XMLHttpRequest};Iv.prototype.i=function(){return{}};rS=new Iv;function mf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new md(this),this.P=Lye,t=XE?125:void 0,this.W=new Ev(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pj}function pj(){this.i=null,this.g="",this.h=!1}var Lye=45e3,iS={},dm={};j=mf.prototype;j.setTimeout=function(t){this.P=t};function sS(t,e,n){t.K=1,t.v=kv(Zi(e)),t.s=n,t.U=!0,gj(t,null)}function gj(t,e){t.F=Date.now(),yf(t),t.A=Zi(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Sj(n.h,"t",r),t.C=0,n=t.l.H,t.h=new pj,t.g=Bj(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Oye(Ht(t.Ia,t,t.g),t.O)),aj(t.V,t.g,"readystatechange",t.gb),e=t.H?GU(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),yd(),Dye(t.j,t.u,t.A,t.m,t.X,t.s)}j.gb=function(t){t=t.target;const e=this.L;e&&Li(t)==3?e.l():this.Ia(t)};j.Ia=function(t){try{if(t==this.g)e:{const c=Li(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||XE||this.g&&(this.h.h||this.g.ga()||tN(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?yd(3):yd(2)),Cv(this);var n=this.g.ba();this.N=n;t:if(mj(this)){var r=tN(this.g);t="";var i=r.length,s=Li(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zo(this),ph(this);var o="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,$ye(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cm(a)){var u=a;break t}}u=null}if(n=u)Dl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,oS(this,n);else{this.i=!1,this.o=3,yn(12),Zo(this),ph(this);break e}}this.U?(yj(this,c,o),XE&&this.i&&c==3&&(aj(this.V,this.W,"tick",this.fb),this.W.start())):(Dl(this.j,this.m,o,null),oS(this,o)),c==4&&Zo(this),this.i&&!this.I&&(c==4?Lj(this.l,this):(this.i=!1,yf(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,yn(12)):(this.o=0,yn(13)),Zo(this),ph(this)}}}catch{}finally{}};function mj(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function yj(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=Uye(t,n),i==dm){e==4&&(t.o=4,yn(14),r=!1),Dl(t.j,t.m,null,"[Incomplete Response]");break}else if(i==iS){t.o=4,yn(15),Dl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Dl(t.j,t.m,i,null),oS(t,i);mj(t)&&i!=dm&&i!=iS&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,yn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),n1(e),e.L=!0,yn(11))):(Dl(t.j,t.m,n,"[Invalid Chunked Response]"),Zo(t),ph(t))}j.fb=function(){if(this.g){var t=Li(this.g),e=this.g.ga();this.C<e.length&&(Cv(this),yj(this,t,e),this.i&&t!=4&&yf(this))}};function Uye(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?dm:(n=Number(e.substring(n,r)),isNaN(n)?iS:(r+=1,r+n>e.length?dm:(e=e.substr(r,n),t.C=r+n,e)))}j.cancel=function(){this.I=!0,Zo(this)};function yf(t){t.Y=Date.now()+t.P,vj(t,t.P)}function vj(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=pf(Ht(t.eb,t),e)}function Cv(t){t.B&&(Z.clearTimeout(t.B),t.B=null)}j.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Mye(this.j,this.A),this.K!=2&&(yd(),yn(17)),Zo(this),this.o=2,ph(this)):vj(this,this.Y-t)};function ph(t){t.l.G==0||t.I||Lj(t.l,t)}function Zo(t){Cv(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,zI(t.W),lj(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function oS(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||aS(n.i,t))){if(n.I=t.N,!t.J&&aS(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)mm(n),xv(n);else break e;t1(n),yn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=pf(Ht(n.ab,n),6e3));if(1>=Ij(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else ea(n,11)}else if((t.J||n.g==t)&&mm(n),!cm(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.U=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.J=u[1],n.la=u[2];const c=u[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const h=u[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;!s.g&&(fn(p,"spdy")||fn(p,"quic")||fn(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(YI(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.sa=g,Fe(r.F,r.D,g))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=Vj(r,r.H?r.la:null,r.W),o.J){Cj(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(Cv(a),yf(a)),r.g=o}else Mj(r);0<n.l.length&&Nv(n)}else u[0]!="stop"&&u[0]!="close"||ea(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?ea(n,7):e1(n):u[0]!="noop"&&n.j&&n.j.wa(u),n.A=0)}}yd(4)}catch{}}function jye(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(YE(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function GI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(YE(t)||typeof t=="string")KU(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(YE(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=jye(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function ec(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ec)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}j=ec.prototype;j.R=function(){QI(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};j.T=function(){return QI(this),this.g.concat()};function QI(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ka(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],ka(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}j.get=function(t,e){return ka(this.h,t)?this.h[t]:e};j.set=function(t,e){ka(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};j.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function ka(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var _j=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vye(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Aa(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Aa){this.g=e!==void 0?e:t.g,fm(this,t.j),this.s=t.s,pm(this,t.i),gm(this,t.m),this.l=t.l,e=t.h;var n=new vd;n.i=e.i,e.g&&(n.g=new ec(e.g),n.h=e.h),Jx(this,n),this.o=t.o}else t&&(n=String(t).match(_j))?(this.g=!!e,fm(this,n[1]||"",!0),this.s=gh(n[2]||""),pm(this,n[3]||"",!0),gm(this,n[4]),this.l=gh(n[5]||"",!0),Jx(this,n[6]||"",!0),this.o=gh(n[7]||"")):(this.g=!!e,this.h=new vd(null,this.g))}Aa.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Wc(e,Zx,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Wc(e,Zx,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Wc(n,n.charAt(0)=="/"?Hye:Wye,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Wc(n,Gye)),t.join("")};function Zi(t){return new Aa(t)}function fm(t,e,n){t.j=n?gh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function pm(t,e,n){t.i=n?gh(e,!0):e}function gm(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Jx(t,e,n){e instanceof vd?(t.h=e,Qye(t.h,t.g)):(n||(e=Wc(e,Kye)),t.h=new vd(e,t.g))}function Fe(t,e,n){t.h.set(e,n)}function kv(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Bye(t){return t instanceof Aa?Zi(t):new Aa(t,void 0)}function zye(t,e,n,r){var i=new Aa(null,void 0);return t&&fm(i,t),e&&pm(i,e),n&&gm(i,n),r&&(i.l=r),i}function gh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,qye),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qye(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Zx=/[#\/\?@]/g,Wye=/[#\?:]/g,Hye=/[#\?]/g,Kye=/[#\?@]/g,Gye=/#/g;function vd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _o(t){t.g||(t.g=new ec,t.h=0,t.i&&Vye(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}j=vd.prototype;j.add=function(t,e){_o(this),this.i=null,t=tc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function wj(t,e){_o(t),e=tc(t,e),ka(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,ka(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&QI(t)))}function Ej(t,e){return _o(t),e=tc(t,e),ka(t.g.h,e)}j.forEach=function(t,e){_o(this),this.g.forEach(function(n,r){KU(n,function(i){t.call(e,i,r,this)},this)},this)};j.T=function(){_o(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};j.R=function(t){_o(this);var e=[];if(typeof t=="string")Ej(this,t)&&(e=zx(e,this.g.get(tc(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=zx(e,t[n])}return e};j.set=function(t,e){return _o(this),this.i=null,t=tc(this,t),Ej(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};j.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Sj(t,e,n){wj(t,e),0<n.length&&(t.i=null,t.g.set(tc(t,e),DI(n)),t.h+=n.length)}j.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};function tc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Qye(t,e){e&&!t.j&&(_o(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(wj(this,r),Sj(this,i,n))},t)),t.j=e}var Yye=class{constructor(t,e){this.h=t,this.g=e}};function bj(t){this.l=t||Xye,Z.PerformanceNavigationTiming?(t=Z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Z.g&&Z.g.Ea&&Z.g.Ea()&&Z.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xye=10;function Tj(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Ij(t){return t.h?1:t.g?t.g.size:0}function aS(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function YI(t,e){t.g?t.g.add(e):t.h=e}function Cj(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}bj.prototype.cancel=function(){if(this.i=kj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function kj(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return DI(t.i)}function XI(){}XI.prototype.stringify=function(t){return Z.JSON.stringify(t,void 0)};XI.prototype.parse=function(t){return Z.JSON.parse(t,void 0)};function Jye(){this.g=new XI}function Zye(t,e,n){const r=n||"";try{GI(t,function(i,s){let o=i;df(i)&&(o=VI(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function eve(t,e){const n=new Sv;if(Z.Image){const r=new Image;r.onload=up(hp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=up(hp,n,r,"TestLoadImage: error",!1,e),r.onabort=up(hp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=up(hp,n,r,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function hp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function vf(t){this.l=t.$b||null,this.j=t.ib||!1}Yt(vf,WI);vf.prototype.g=function(){return new Av(this.l,this.j)};vf.prototype.i=function(t){return function(){return t}}({});function Av(t,e){Pt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=JI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yt(Av,Pt);var JI=0;j=Av.prototype;j.open=function(t,e){if(this.readyState!=JI)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,_d(this)};j.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Z).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_f(this)),this.readyState=JI};j.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,_d(this)),this.g&&(this.readyState=3,_d(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Aj(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function Aj(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}j.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_f(this):_d(this),this.readyState==3&&Aj(this)}};j.Ua=function(t){this.g&&(this.response=this.responseText=t,_f(this))};j.Ta=function(t){this.g&&(this.response=t,_f(this))};j.ha=function(){this.g&&_f(this)};function _f(t){t.readyState=4,t.l=null,t.j=null,t.A=null,_d(t)}j.setRequestHeader=function(t,e){this.v.append(t,e)};j.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};j.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function _d(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Av.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var tve=Z.JSON.parse;function at(t){Pt.call(this),this.headers=new ec,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Rj,this.K=this.L=!1}Yt(at,Pt);var Rj="",nve=/^https?$/i,rve=["POST","PUT"];j=at.prototype;j.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rS.g(),this.C=this.u?Xx(this.u):Xx(rS),this.g.onreadystatechange=Ht(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){eN(this,s);return}t=n||"";const i=new ec(this.headers);r&&GI(r,function(s,o){i.set(o,s)}),r=pye(i.T()),n=Z.FormData&&t instanceof Z.FormData,!(0<=HU(rve,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pj(this),0<this.B&&((this.K=ive(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ht(this.pa,this)):this.A=qI(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){eN(this,s)}};function ive(t){return Eu&&_ye()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function sve(t){return t.toLowerCase()=="content-type"}j.pa=function(){typeof OI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kt(this,"timeout"),this.abort(8))};function eN(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xj(t),Rv(t)}function xj(t){t.D||(t.D=!0,Kt(t,"complete"),Kt(t,"error"))}j.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Kt(this,"complete"),Kt(this,"abort"),Rv(this))};j.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rv(this,!0)),at.Z.M.call(this)};j.Fa=function(){this.s||(this.F||this.v||this.l?Nj(this):this.cb())};j.cb=function(){Nj(this)};function Nj(t){if(t.h&&typeof OI<"u"&&(!t.C[1]||Li(t)!=4||t.ba()!=2)){if(t.v&&Li(t)==4)qI(t.Fa,0,t);else if(Kt(t,"readystatechange"),Li(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(_j)[1]||null;if(!i&&Z.self&&Z.self.location){var s=Z.self.location.protocol;i=s.substr(0,s.length-1)}r=!nve.test(i?i.toLowerCase():"")}n=r}if(n)Kt(t,"complete"),Kt(t,"success");else{t.m=6;try{var o=2<Li(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",xj(t)}}finally{Rv(t)}}}}function Rv(t,e){if(t.g){Pj(t);const n=t.g,r=t.C[0]?um:null;t.g=null,t.C=null,e||Kt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Pj(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Z.clearTimeout(t.A),t.A=null)}function Li(t){return t.g?t.g.readyState:0}j.ba=function(){try{return 2<Li(this)?this.g.status:-1}catch{return-1}};j.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};j.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),tve(e)}};function tN(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Rj:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}j.Da=function(){return this.m};j.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function ove(t){let e="";return $I(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function ZI(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ove(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Fe(t,e,n))}function Rc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Oj(t){this.za=0,this.l=[],this.h=new Sv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rc("baseRetryDelayMs",5e3,t),this.$a=Rc("retryDelaySeedMs",1e4,t),this.Ya=Rc("forwardChannelMaxRetries",2,t),this.ra=Rc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new bj(t&&t.concurrentRequestLimit),this.Ca=new Jye,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}j=Oj.prototype;j.ma=8;j.G=1;function e1(t){if(Dj(t),t.G==3){var e=t.V++,n=Zi(t.F);Fe(n,"SID",t.J),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),wf(t,n),e=new mf(t,t.h,e,void 0),e.K=2,e.v=kv(Zi(n)),n=!1,Z.navigator&&Z.navigator.sendBeacon&&(n=Z.navigator.sendBeacon(e.v.toString(),"")),!n&&Z.Image&&(new Image().src=e.v,n=!0),n||(e.g=Bj(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yf(e)}jj(t)}j.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function xv(t){t.g&&(n1(t),t.g.cancel(),t.g=null)}function Dj(t){xv(t),t.u&&(Z.clearTimeout(t.u),t.u=null),mm(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Z.clearTimeout(t.m),t.m=null)}function Ew(t,e){t.l.push(new Yye(t.Za++,e)),t.G==3&&Nv(t)}function Nv(t){Tj(t.i)||t.m||(t.m=!0,BI(t.Ha,t),t.C=0)}function ave(t,e){return Ij(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=pf(Ht(t.Ha,t,e),Uj(t,t.C)),t.C++,!0)}j.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new mf(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=GU(s),QU(s,this.P)):s=this.P),this.o===null&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$j(this,i,e),n=Zi(this.F),Fe(n,"RID",t),Fe(n,"CVER",22),this.D&&Fe(n,"X-HTTP-Session-Id",this.D),wf(this,n),this.o&&s&&ZI(n,this.o,s),YI(this.i,i),this.Ra&&Fe(n,"TYPE","init"),this.ja?(Fe(n,"$req",e),Fe(n,"SID","null"),i.$=!0,sS(i,n,null)):sS(i,n,e),this.G=2}}else this.G==3&&(t?nN(this,t):this.l.length==0||Tj(this.i)||nN(this))};function nN(t,e){var n;e?n=e.m:n=t.V++;const r=Zi(t.F);Fe(r,"SID",t.J),Fe(r,"RID",n),Fe(r,"AID",t.U),wf(t,r),t.o&&t.s&&ZI(r,t.o,t.s),n=new mf(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=$j(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),YI(t.i,n),sS(n,r,e)}function wf(t,e){t.j&&GI({},function(n,r){Fe(e,r,n)})}function $j(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ht(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].h;const c=i[l].g;if(u-=s,0>u)s=Math.max(0,i[l].h-100),a=!1;else try{Zye(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function Mj(t){t.g||t.u||(t.Y=1,BI(t.Ga,t),t.A=0)}function t1(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=pf(Ht(t.Ga,t),Uj(t,t.A)),t.A++,!0)}j.Ga=function(){if(this.u=null,Fj(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=pf(Ht(this.bb,this),t)}};j.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yn(10),xv(this),Fj(this))};function n1(t){t.B!=null&&(Z.clearTimeout(t.B),t.B=null)}function Fj(t){t.g=new mf(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Zi(t.oa);Fe(e,"RID","rpc"),Fe(e,"SID",t.J),Fe(e,"CI",t.N?"0":"1"),Fe(e,"AID",t.U),wf(t,e),Fe(e,"TYPE","xmlhttp"),t.o&&t.s&&ZI(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=kv(Zi(e)),n.s=null,n.U=!0,gj(n,t)}j.ab=function(){this.v!=null&&(this.v=null,xv(this),t1(this),yn(19))};function mm(t){t.v!=null&&(Z.clearTimeout(t.v),t.v=null)}function Lj(t,e){var n=null;if(t.g==e){mm(t),n1(t),t.g=null;var r=2}else if(aS(t.i,e))n=e.D,Cj(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=bv(),Kt(r,new hj(r,n)),Nv(t)}else Mj(t);else if(i=e.o,i==3||i==0&&0<t.I||!(r==1&&ave(t,e)||r==2&&t1(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ea(t,5);break;case 4:ea(t,10);break;case 3:ea(t,6);break;default:ea(t,2)}}}function Uj(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ea(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=Ht(t.jb,t);n||(n=new Aa("//www.google.com/images/cleardot.gif"),Z.location&&Z.location.protocol=="http"||fm(n,"https"),kv(n)),eve(n.toString(),r)}else yn(2);t.G=0,t.j&&t.j.va(e),jj(t),Dj(t)}j.jb=function(t){t?(this.h.info("Successfully pinged google.com"),yn(2)):(this.h.info("Failed to ping google.com"),yn(1))};function jj(t){t.G=0,t.I=-1,t.j&&((kj(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,DI(t.l),t.l.length=0),t.j.ua())}function Vj(t,e,n){let r=Bye(n);if(r.i!="")e&&pm(r,e+"."+r.i),gm(r,r.m);else{const i=Z.location;r=zye(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&$I(t.aa,function(i,s){Fe(r,s,i)}),e=t.D,n=t.sa,e&&n&&Fe(r,e,n),Fe(r,"VER",t.ma),wf(t,r),r}function Bj(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new at(new vf({ib:!0})):new at(t.qa),e.L=t.H,e}function zj(){}j=zj.prototype;j.xa=function(){};j.wa=function(){};j.va=function(){};j.ua=function(){};j.Oa=function(){};function ym(){if(Eu&&!(10<=Number(wye)))throw Error("Environmental error: no available transport.")}ym.prototype.g=function(t,e){return new nr(t,e)};function nr(t,e){Pt.call(this),this.g=new Oj(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!cm(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cm(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new nc(this)}Yt(nr,Pt);nr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),BI(Ht(t.hb,t,e))),yn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Vj(t,null,t.W),Nv(t)};nr.prototype.close=function(){e1(this.g)};nr.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Ew(this.g,e)}else this.v?(e={},e.__data__=VI(t),Ew(this.g,e)):Ew(this.g,t)};nr.prototype.M=function(){this.g.j=null,delete this.j,e1(this.g),delete this.g,nr.Z.M.call(this)};function qj(t){HI.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Yt(qj,HI);function Wj(){KI.call(this),this.status=1}Yt(Wj,KI);function nc(t){this.g=t}Yt(nc,zj);nc.prototype.xa=function(){Kt(this.g,"a")};nc.prototype.wa=function(t){Kt(this.g,new qj(t))};nc.prototype.va=function(t){Kt(this.g,new Wj)};nc.prototype.ua=function(){Kt(this.g,"b")};ym.prototype.createWebChannel=ym.prototype.g;nr.prototype.send=nr.prototype.u;nr.prototype.open=nr.prototype.m;nr.prototype.close=nr.prototype.close;Tv.NO_ERROR=0;Tv.TIMEOUT=8;Tv.HTTP_ERROR=6;dj.COMPLETE="complete";fj.EventType=gf;gf.OPEN="a";gf.CLOSE="b";gf.ERROR="c";gf.MESSAGE="d";Pt.prototype.listen=Pt.prototype.N;at.prototype.listenOnce=at.prototype.O;at.prototype.getLastError=at.prototype.La;at.prototype.getLastErrorCode=at.prototype.Da;at.prototype.getStatus=at.prototype.ba;at.prototype.getResponseJson=at.prototype.Qa;at.prototype.getResponseText=at.prototype.ga;at.prototype.send=at.prototype.ea;var lve=function(){return new ym},uve=function(){return bv()},Sw=Tv,cve=dj,hve=rl,rN={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dve=vf,dp=fj,fve=at;const iN="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc="9.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Si("@firebase/firestore");function lS(){return ro.logLevel}function pve(t){ro.setLogLevel(t)}function P(t,...e){if(ro.logLevel<=ne.DEBUG){const n=e.map(r1);ro.debug(`Firestore (${rc}): ${t}`,...n)}}function tt(t,...e){if(ro.logLevel<=ne.ERROR){const n=e.map(r1);ro.error(`Firestore (${rc}): ${t}`,...n)}}function Su(t,...e){if(ro.logLevel<=ne.WARN){const n=e.map(r1);ro.warn(`Firestore (${rc}): ${t}`,...n)}}function r1(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t="Unexpected state"){const e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+t;throw tt(e),new Error(e)}function Y(t,e){t||V()}function gve(t,e){t||V()}function F(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends We{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mve{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class yve{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vve{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new It;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new It,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new It)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new Hj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new St(e)}}class _ve{constructor(e,n,r){this.type="FirstParty",this.user=St.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class wve{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new _ve(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Eve{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sve{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{s.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,P("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Y(typeof n.token=="string"),this.p=n.token,new Eve(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bve(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bve(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ee(t,e){return t<e?-1:t>e?1:0}function bu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Gj(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new x(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new x(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ue(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Q(e)}static min(){return new Q(new Ue(0,0))}static max(){return new Q(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r){n===void 0?n=0:n>e.length&&V(),r===void 0?r=e.length-n:r>e.length-n&&V(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ce extends wd{construct(e,n,r){return new ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new x(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const Tve=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends wd{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return Tve.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new x(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new x(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new x(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new x(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.path=e}static fromPath(e){return new M(ce.fromString(e))}static fromName(e){return new M(ce.fromString(e).popFirst(5))}static empty(){return new M(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function uS(t){return t.fields.find(e=>e.kind===2)}function Lo(t){return t.fields.filter(e=>e.kind!==2)}Qj.UNKNOWN_ID=-1;class Ive{constructor(e,n){this.fieldPath=e,this.kind=n}}class vm{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new vm(0,rr.min())}}function Yj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new rr(i,M.empty(),e)}function Xj(t){return new rr(t.readTime,t.key,-1)}class rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rr(Q.min(),M.empty(),-1)}static max(){return new rr(Q.max(),M.empty(),-1)}}function i1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==Jj)throw t;P("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new S((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof S?n:S.resolve(n)}catch(n){return S.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):S.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):S.reject(n)}static resolve(e){return new S((n,r)=>{n(e)})}static reject(e){return new S((n,r)=>{r(e)})}static waitFor(e){return new S((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=S.resolve(!1);for(const r of e)n=n.next(i=>i?S.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new S((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new S((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.T=new It,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{n.error?this.T.reject(new mh(e,n.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=s1(r.target.error);this.T.reject(new mh(e,i))}}static open(e,n,r,i){try{return new Pv(n,e.transaction(i,r))}catch(s){throw new mh(n,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new kve(n)}}class Fr{constructor(e,n,r){this.name=e,this.version=n,this.P=r,Fr.v(Oe())===12.2&&tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return P("SimpleDb","Removing database:",e),jo(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!Ln())return!1;if(Fr.S())return!0;const e=Oe(),n=Fr.v(e),r=0<n&&n<10,i=Fr.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.C)==="YES"}static N(e,n){return e.store(n)}static v(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async k(e){return this.db||(P("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new mh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new x(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new x(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mh(e,o))},i.onupgradeneeded=s=>{P("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.P.M(o,i.transaction,s.oldVersion,this.version).next(()=>{P("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.O&&(this.db.onversionchange=n=>this.O(n)),this.db}F(e){this.O=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=Pv.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.R(),u)).catch(u=>(a.abort(u),S.reject(u))).toPromise();return l.catch(()=>{}),await a.A,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(P("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Cve{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return jo(this.$.delete())}}class mh extends x{constructor(e,n){super(b.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Eo(t){return t.name==="IndexedDbTransactionError"}class kve{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(P("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jo(r)}add(e){return P("SimpleDb","ADD",this.store.name,e,e),jo(this.store.add(e))}get(e){return jo(this.store.get(e)).next(n=>(n===void 0&&(n=null),P("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return P("SimpleDb","DELETE",this.store.name,e),jo(this.store.delete(e))}count(){return P("SimpleDb","COUNT",this.store.name),jo(this.store.count())}K(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new S((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new S((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}W(e,n){P("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Y(e){const n=this.cursor({});return new S((r,i)=>{n.onerror=s=>{const o=s1(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new S((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Cve(a),u=n(a.primaryKey,a.value,l);if(u instanceof S){const c=u.catch(h=>(l.done(),S.reject(h)));r.push(c)}l.isDone?i():l.U===null?a.continue():a.continue(l.U)}}).next(()=>S.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function jo(t){return new S((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=s1(r.target.error);n(i)}})}let sN=!1;function s1(t){const e=Fr.v(Oe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sN||(sN=!0,setTimeout(()=>{throw r},0)),r}}return t}class Ave{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}Z(e){P("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{P("IndexBackiller",`Documents written: ${await this.X.tt()}`)}catch(n){Eo(n)?P("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await wo(n)}await this.Z(1)})}}class Rve{constructor(e,n){this.localStore=e,this.persistence=n}async tt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.et(n,e))}et(e,n){const r=new Set;let i=n,s=!0;return S.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return P("IndexBackiller",`Processing collection: ${o}`),this.nt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}nt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.st(i,s)).next(a=>(P("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}st(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Xj(s);i1(o,r)>0&&(r=o)}),new rr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function il(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function eV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.ot=-1;class Xe{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fp(this.root,e,this.comparator,!1)}getReverseIterator(){return new fp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fp(this.root,e,this.comparator,!0)}}class fp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:jt.RED,this.left=i!=null?i:jt.EMPTY,this.right=s!=null?s:jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new jt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();const e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(t,e,n,r,i){return this}insert(t,e,n){return new jt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aN(this.data.getIterator())}getIteratorFrom(e){return new aN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ee)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ee(this.comparator);return n.data=e,n}}class aN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new Ee(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xve(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new ft(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const Nve=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(t){if(Y(!!t),typeof t=="string"){let e=0;const n=Nve.exec(t);if(Y(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ra(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tV(t){const e=t.mapValue.fields.__previous_value__;return o1(e)?tV(e):e}function Ed(t){const e=io(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve{constructor(e,n,r,i,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class es{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new es("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof es&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t){return t==null}function Sd(t){return t===0&&1/t==-1/0}function nV(t){return typeof t=="number"&&Number.isInteger(t)&&!Sd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zp={nullValue:"NULL_VALUE"};function xa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?o1(t)?4:rV(t)?9007199254740991:10:V()}function _i(t,e){if(t===e)return!0;const n=xa(t);if(n!==xa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ed(t).isEqual(Ed(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=io(r.timestampValue),o=io(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ra(r.bytesValue).isEqual(Ra(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Qe(r.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(r.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Qe(r.integerValue)===Qe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Qe(r.doubleValue),o=Qe(i.doubleValue);return s===o?Sd(s)===Sd(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return bu(t.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(oN(s)!==oN(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!_i(s[a],o[a])))return!1;return!0}(t,e);default:return V()}}function bd(t,e){return(t.values||[]).find(n=>_i(n,e))!==void 0}function so(t,e){if(t===e)return 0;const n=xa(t),r=xa(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Qe(i.integerValue||i.doubleValue),a=Qe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return lN(t.timestampValue,e.timestampValue);case 4:return lN(Ed(t),Ed(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Ra(i),a=Ra(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=ee(o[l],a[l]);if(u!==0)return u}return ee(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ee(Qe(i.latitude),Qe(s.latitude));return o!==0?o:ee(Qe(i.longitude),Qe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=so(o[l],a[l]);if(u)return u}return ee(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Rs.mapValue&&s===Rs.mapValue)return 0;if(i===Rs.mapValue)return 1;if(s===Rs.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=ee(a[c],u[c]);if(h!==0)return h;const d=so(o[a[c]],l[u[c]]);if(d!==0)return d}return ee(a.length,u.length)}(t.mapValue,e.mapValue);default:throw V()}}function lN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=io(t),r=io(e),i=ee(n.seconds,r.seconds);return i!==0?i:ee(n.nanos,r.nanos)}function Yl(t){return cS(t)}function cS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=io(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ra(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,M.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=cS(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${cS(r.fields[a])}`;return s+"}"}(t.mapValue):V();var e,n}function Na(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hS(t){return!!t&&"integerValue"in t}function Td(t){return!!t&&"arrayValue"in t}function uN(t){return!!t&&"nullValue"in t}function cN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qp(t){return!!t&&"mapValue"in t}function yh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return il(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Ove(t){return"nullValue"in t?zp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Na(es.empty(),M.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:V()}function Dve(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Na(es.empty(),M.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Rs:V()}function hN(t,e){const n=so(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function dN(t,e){const n=so(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yh(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());qp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){il(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Vt(yh(this.value))}}function iV(t){const e=[];return il(t.fields,(n,r)=>{const i=new nt([n]);if(qp(r)){const s=iV(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ie(e,0,Q.min(),Q.min(),Vt.empty(),0)}static newFoundDocument(e,n,r){return new Ie(e,1,n,Q.min(),r,0)}static newNoDocument(e,n){return new Ie(e,2,n,Q.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new Ie(e,3,n,Q.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ie&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ie(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ve{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function fN(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $ve(t,e,n,r,i,s,o)}function Pa(t){const e=F(t);if(e.ut===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Yl(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ef(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yl(r)).join(",")),e.ut=n}return e.ut}function Mve(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Yl(r.value)}`;var r}).join(", ")}]`),Ef(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Yl(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Yl(n)).join(",")),`Target(${e})`}function Sf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!qve(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!_i(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yN(t.startAt,e.startAt)&&yN(t.endAt,e.endAt)}function _m(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wm(t,e){return t.filters.filter(n=>n instanceof Bt&&n.field.isEqual(e))}function pN(t,e,n){let r=zp,i=!0;for(const s of wm(t,e)){let o=zp,a=!0;switch(s.op){case"<":case"<=":o=Ove(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=zp}hN({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];hN({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function gN(t,e,n){let r=Rs,i=!0;for(const s of wm(t,e)){let o=Rs,a=!0;switch(s.op){case">=":case">":o=Dve(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Rs}dN({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];dN({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class Bt extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.ct(e,n,r):new Fve(e,n,r):n==="array-contains"?new jve(e,r):n==="in"?new Vve(e,r):n==="not-in"?new Bve(e,r):n==="array-contains-any"?new zve(e,r):new Bt(e,n,r)}static ct(e,n,r){return n==="in"?new Lve(e,r):new Uve(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.at(so(n,this.value)):n!==null&&xa(this.value)===xa(n)&&this.at(so(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Fve extends Bt{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.at(n)}}class Lve extends Bt{constructor(e,n){super(e,"in",n),this.keys=sV("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Uve extends Bt{constructor(e,n){super(e,"not-in",n),this.keys=sV("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sV(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}class jve extends Bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Td(n)&&bd(n.arrayValue,this.value)}}class Vve extends Bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bd(this.value.arrayValue,n)}}class Bve extends Bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!bd(this.value.arrayValue,n)}}class zve extends Bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Td(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bd(this.value.arrayValue,r))}}class oo{constructor(e,n){this.position=e,this.inclusive=n}}class Xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function qve(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function mN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=M.comparator(M.fromName(o.referenceValue),n.key):r=so(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_i(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.lt=null,this.ft=null,this.startAt,this.endAt}}function oV(t,e,n,r,i,s,o,a){return new ls(t,e,n,r,i,s,o,a)}function ic(t){return new ls(t)}function vN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a1(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function l1(t){for(const e of t.filters)if(e.ht())return e.field;return null}function u1(t){return t.collectionGroup!==null}function Tu(t){const e=F(t);if(e.lt===null){e.lt=[];const n=l1(e),r=a1(e);if(n!==null&&r===null)n.isKeyField()||e.lt.push(new Xl(n)),e.lt.push(new Xl(nt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Xl(nt.keyField(),s))}}}return e.lt}function Un(t){const e=F(t);if(!e.ft)if(e.limitType==="F")e.ft=fN(e.path,e.collectionGroup,Tu(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Tu(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Xl(s.field,o))}const r=e.endAt?new oo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new oo(e.startAt.position,e.startAt.inclusive):null;e.ft=fN(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.ft}function Em(t,e,n){return new ls(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bf(t,e){return Sf(Un(t),Un(e))&&t.limitType===e.limitType}function aV(t){return`${Pa(Un(t))}|lt:${t.limitType}`}function dS(t){return`Query(target=${Mve(Un(t))}; limitType=${t.limitType})`}function c1(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):M.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=mN(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Tu(n),r)||n.endAt&&!function(i,s,o){const a=mN(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Tu(n),r))}(t,e)}function lV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uV(t){return(e,n)=>{let r=!1;for(const i of Tu(t)){const s=Wve(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Wve(t,e,n){const r=t.field.isKeyField()?M.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?so(a,l):V()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return V()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function hV(t){return{integerValue:""+t}}function dV(t,e){return nV(e)?hV(e):cV(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this._=void 0}}function Hve(t,e,n){return t instanceof Iu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Oa?pV(t,e):t instanceof Da?gV(t,e):function(r,i){const s=fV(r,i),o=_N(s)+_N(r._t);return hS(s)&&hS(r._t)?hV(o):cV(r.wt,o)}(t,e)}function Kve(t,e,n){return t instanceof Oa?pV(t,e):t instanceof Da?gV(t,e):n}function fV(t,e){return t instanceof Cu?hS(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Iu extends Ov{}class Oa extends Ov{constructor(e){super(),this.elements=e}}function pV(t,e){const n=mV(e);for(const r of t.elements)n.some(i=>_i(i,r))||n.push(r);return{arrayValue:{values:n}}}class Da extends Ov{constructor(e){super(),this.elements=e}}function gV(t,e){let n=mV(e);for(const r of t.elements)n=n.filter(i=>!_i(i,r));return{arrayValue:{values:n}}}class Cu extends Ov{constructor(e,n){super(),this.wt=e,this._t=n}}function _N(t){return Qe(t.integerValue||t.doubleValue)}function mV(t){return Td(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){this.field=e,this.transform=n}}function Gve(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Oa&&r instanceof Oa||n instanceof Da&&r instanceof Da?bu(n.elements,r.elements,_i):n instanceof Cu&&r instanceof Cu?_i(n._t,r._t):n instanceof Iu&&r instanceof Iu}(t.transform,e.transform)}class Qve{constructor(e,n){this.version=e,this.transformResults=n}}class ze{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ze}static exists(e){return new ze(void 0,e)}static updateTime(e){return new ze(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dv{}function yV(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oc(t.key,ze.none()):new sc(t.key,t.data,ze.none());{const n=t.data,r=Vt.empty();let i=new Ee(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new us(t.key,r,new Xn(i.toArray()),ze.none())}}function Yve(t,e,n){t instanceof sc?function(r,i,s){const o=r.value.clone(),a=EN(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof us?function(r,i,s){if(!Wp(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=EN(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(vV(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function vh(t,e,n,r){return t instanceof sc?function(i,s,o,a){if(!Wp(i.precondition,s))return o;const l=i.value.clone(),u=SN(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(i,s,o,a){if(!Wp(i.precondition,s))return o;const l=SN(i.fieldTransforms,a,s),u=s.data;return u.setAll(vV(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return Wp(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function Xve(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=fV(r.transform,i||null);s!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,s))}return n||null}function wN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&bu(n,r,(i,s)=>Gve(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sc extends Dv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class us extends Dv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function EN(t,e,n){const r=new Map;Y(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Kve(o,a,n[i]))}return r}function SN(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Hve(s,o,e))}return r}class oc extends Dv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h1 extends Dv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jve{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,ue;function _V(t){switch(t){default:return V();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function wV(t){if(t===void 0)return tt("GRPC error has no .code"),b.UNKNOWN;switch(t){case it.OK:return b.OK;case it.CANCELLED:return b.CANCELLED;case it.UNKNOWN:return b.UNKNOWN;case it.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case it.INTERNAL:return b.INTERNAL;case it.UNAVAILABLE:return b.UNAVAILABLE;case it.UNAUTHENTICATED:return b.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case it.NOT_FOUND:return b.NOT_FOUND;case it.ALREADY_EXISTS:return b.ALREADY_EXISTS;case it.PERMISSION_DENIED:return b.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case it.ABORTED:return b.ABORTED;case it.OUT_OF_RANGE:return b.OUT_OF_RANGE;case it.UNIMPLEMENTED:return b.UNIMPLEMENTED;case it.DATA_LOSS:return b.DATA_LOSS;default:return V()}}(ue=it||(it={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){il(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zve=new Xe(M.comparator);function Pn(){return Zve}const EV=new Xe(M.comparator);function Hc(...t){let e=EV;for(const n of t)e=e.insert(n.key,n);return e}function SV(t){let e=EV;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ii(){return _h()}function bV(){return _h()}function _h(){return new So(t=>t.toString(),(t,e)=>t.isEqual(e))}const e_e=new Xe(M.comparator),t_e=new Ee(M.comparator);function te(...t){let e=t_e;for(const n of t)e=e.add(n);return e}const n_e=new Ee(ee);function $v(){return n_e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Cf.createSynthesizedTargetChangeForCurrentChange(e,n)),new If(Q.min(),r,$v(),Pn(),te())}}class Cf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Cf(ft.EMPTY_BYTE_STRING,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,r,i){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=i}}class TV{constructor(e,n){this.targetId=e,this.It=n}}class IV{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class bN{constructor(){this.Tt=0,this.Et=IN(),this.At=ft.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=te(),n=te(),r=te();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:V()}}),new Cf(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=IN()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class r_e{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Pn(),this.Bt=TN(),this.Lt=new Ee(ee)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,i)=>{this.jt(i)&&n(i)})}zt(e){const n=e.targetId,r=e.It.count,i=this.Ht(n);if(i){const s=i.target;if(_m(s))if(r===0){const o=new M(s.path);this.Kt(n,o,Ie.newNoDocument(o,Q.min()))}else Y(r===1);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&_m(a.target)){const l=new M(a.target.path);this.$t.get(l)!==null||this.Xt(o,l)||this.Kt(o,l,Ie.newNoDocument(l,e))}s.vt&&(n.set(o,s.St()),s.Dt())}});let r=te();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ht(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const i=new If(e,n,this.Lt,this.$t,r);return this.$t=Pn(),this.Bt=TN(),this.Lt=new Ee(ee),i}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,n)?i.Ct(n,1):i.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new bN,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new Ee(ee),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=this.Ht(e)!==null;return n||P("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new bN),this.Ot.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Ot.getRemoteKeysForTarget(e).has(n)}}function TN(){return new Xe(M.comparator)}function IN(){return new Xe(M.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_e=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),s_e=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class o_e{constructor(e,n){this.databaseId=e,this.dt=n}}function Id(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CV(t,e){return t.dt?e.toBase64():e.toUint8Array()}function a_e(t,e){return Id(t,e.toTimestamp())}function Ct(t){return Y(!!t),Q.fromTimestamp(function(e){const n=io(e);return new Ue(n.seconds,n.nanos)}(t))}function d1(t,e){return function(n){return new ce(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function kV(t){const e=ce.fromString(t);return Y($V(e)),e}function Cd(t,e){return d1(t.databaseId,e.path)}function hi(t,e){const n=kV(e);if(n.get(1)!==t.databaseId.projectId)throw new x(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new x(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(RV(n))}function fS(t,e){return d1(t.databaseId,e)}function AV(t){const e=kV(t);return e.length===4?ce.emptyPath():RV(e)}function kd(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RV(t){return Y(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function CN(t,e,n){return{name:Cd(t,e),fields:n.value.mapValue.fields}}function xV(t,e,n){const r=hi(t,e.name),i=Ct(e.updateTime),s=new Vt({mapValue:{fields:e.fields}}),o=Ie.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function l_e(t,e){return"found"in e?function(n,r){Y(!!r.found),r.found.name,r.found.updateTime;const i=hi(n,r.found.name),s=Ct(r.found.updateTime),o=new Vt({mapValue:{fields:r.found.fields}});return Ie.newFoundDocument(i,s,o)}(t,e):"missing"in e?function(n,r){Y(!!r.missing),Y(!!r.readTime);const i=hi(n,r.missing),s=Ct(r.readTime);return Ie.newNoDocument(i,s)}(t,e):V()}function u_e(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:V()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.dt?(Y(u===void 0||typeof u=="string"),ft.fromBase64String(u||"")):(Y(u===void 0||u instanceof Uint8Array),ft.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?b.UNKNOWN:wV(l.code);return new x(u,l.message||"")}(o);n=new IV(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=hi(t,r.document.name),s=Ct(r.document.updateTime),o=new Vt({mapValue:{fields:r.document.fields}}),a=Ie.newFoundDocument(i,s,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Hp(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=hi(t,r.document),s=r.readTime?Ct(r.readTime):Q.min(),o=Ie.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Hp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=hi(t,r.document),s=r.removedTargetIds||[];n=new Hp([],s,i,null)}else{if(!("filter"in e))return V();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new Jve(i),o=r.targetId;n=new TV(o,s)}}return n}function Ad(t,e){let n;if(e instanceof sc)n={update:CN(t,e.key,e.value)};else if(e instanceof oc)n={delete:Cd(t,e.key)};else if(e instanceof us)n={update:CN(t,e.key,e.data),updateMask:m_e(e.fieldMask)};else{if(!(e instanceof h1))return V();n={verify:Cd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Iu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Oa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Da)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Cu)return{fieldPath:s.field.canonicalString(),increment:o._t};throw V()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:a_e(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:V()}(t,e.precondition)),n}function pS(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?ze.updateTime(Ct(i.updateTime)):i.exists!==void 0?ze.exists(i.exists):ze.none()}(e.currentDocument):ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)Y(o.setToServerValue==="REQUEST_TIME"),a=new Iu;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new Oa(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new Da(u)}else"increment"in o?a=new Cu(s,o.increment):V();const l=nt.fromServerFormat(o.fieldPath);return new Tf(l,a)}(t,i)):[];if(e.update){e.update.name;const i=hi(t,e.update.name),s=new Vt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new Xn(l.map(u=>nt.fromServerFormat(u)))}(e.updateMask);return new us(i,s,o,n,r)}return new sc(i,s,n,r)}if(e.delete){const i=hi(t,e.delete);return new oc(i,n)}if(e.verify){const i=hi(t,e.verify);return new h1(i,n)}return V()}function c_e(t,e){return t&&t.length>0?(Y(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Ct(r.updateTime):Ct(i);return s.isEqual(Q.min())&&(s=Ct(i)),new Qve(s,r.transformResults||[])}(n,e))):[]}function NV(t,e){return{documents:[fS(t,e.path)]}}function PV(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=fS(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fS(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(cN(h.value))return{unaryFilter:{field:gl(h.field),op:"IS_NAN"}};if(uN(h.value))return{unaryFilter:{field:gl(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(cN(h.value))return{unaryFilter:{field:gl(h.field),op:"IS_NOT_NAN"}};if(uN(h.value))return{unaryFilter:{field:gl(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gl(h.field),op:f_e(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:gl(c.field),direction:d_e(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(l,u){return l.dt||Ef(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function OV(t){let e=AV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Y(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=DV(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Xl($l(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Ef(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new oo(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new oo(d,h)}(n.endAt)),oV(e,i,o,s,a,"F",l,u)}function h_e(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return V()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function DV(t){return t?t.unaryFilter!==void 0?[g_e(t)]:t.fieldFilter!==void 0?[p_e(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>DV(e)).reduce((e,n)=>e.concat(n)):V():[]}function d_e(t){return i_e[t]}function f_e(t){return s_e[t]}function gl(t){return{fieldPath:t.canonicalString()}}function $l(t){return nt.fromServerFormat(t.fieldPath)}function p_e(t){return Bt.create($l(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(t.fieldFilter.op),t.fieldFilter.value)}function g_e(t){switch(t.unaryFilter.op){case"IS_NAN":const e=$l(t.unaryFilter.field);return Bt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=$l(t.unaryFilter.field);return Bt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$l(t.unaryFilter.field);return Bt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=$l(t.unaryFilter.field);return Bt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return V()}}function m_e(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $V(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kN(e)),e=y_e(t.get(n),e);return kN(e)}function y_e(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function kN(t){return t+""}function si(t){const e=t.length;if(Y(e>=2),e===2)return Y(t.charAt(0)===""&&t.charAt(1)===""),ce.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&V(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:V()}s=o+2}return new ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e){return[t,_n(e)]}function MV(t,e,n){return[t,_n(e),n]}const v_e={},__e=["prefixPath","collectionGroup","readTime","documentId"],w_e=["prefixPath","collectionGroup","documentId"],E_e=["collectionGroup","readTime","prefixPath","documentId"],S_e=["canonicalId","targetId"],b_e=["targetId","path"],T_e=["path","targetId"],I_e=["collectionId","parent"],C_e=["indexId","uid"],k_e=["uid","sequenceNumber"],A_e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],R_e=["indexId","uid","orderedDocumentKey"],x_e=["userId","collectionPath","documentId"],N_e=["userId","collectionPath","largestBatchId"],P_e=["userId","collectionGroup","largestBatchId"],FV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O_e=[...FV,"documentOverlays"],LV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UV=LV,D_e=[...UV,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS extends Zj{constructor(e,n){super(),this.ee=e,this.currentSequenceNumber=n}}function $t(t,e){const n=F(t);return Fr.N(n.ee,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Yve(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=yV(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&bu(this.mutations,e.mutations,(n,r)=>wN(n,r))&&bu(this.baseMutations,e.baseMutations,(n,r)=>wN(n,r))}}class p1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Y(e.mutations.length===r.length);let i=e_e;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new p1(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,i,s=Q.min(),o=Q.min(),a=ft.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.ne=e}}function $_e(t,e){let n;if(e.document)n=xV(t.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=M.fromSegments(e.noDocument.path),i=Ma(e.noDocument.readTime);n=Ie.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return V();{const r=M.fromSegments(e.unknownDocument.path),i=Ma(e.unknownDocument.version);n=Ie.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Ue(r[0],r[1]);return Q.fromTimestamp(i)}(e.readTime)),n}function RN(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Sm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:Cd(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Id(i,s.version.toTimestamp())}}(t.ne,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$a(e.version)};else{if(!e.isUnknownDocument())return V();r.unknownDocument={path:n.path.toArray(),version:$a(e.version)}}return r}function Sm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $a(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ma(t){const e=new Ue(t.seconds,t.nanoseconds);return Q.fromTimestamp(e)}function Vo(t,e){const n=(e.baseMutations||[]).map(s=>pS(t.ne,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>pS(t.ne,s)),i=Ue.fromMillis(e.localWriteTimeMs);return new f1(e.batchId,i,n,r)}function Kc(t){const e=Ma(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ma(t.lastLimboFreeSnapshotVersion):Q.min();let r;var i;return t.query.documents!==void 0?(Y((i=t.query).documents.length===1),r=Un(ic(AV(i.documents[0])))):r=function(s){return Un(OV(s))}(t.query),new Bs(r,t.targetId,0,t.lastListenSequenceNumber,e,n,ft.fromBase64String(t.resumeToken))}function VV(t,e){const n=$a(e.snapshotVersion),r=$a(e.lastLimboFreeSnapshotVersion);let i;i=_m(e.target)?NV(t.ne,e.target):PV(t.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function m1(t){const e=OV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Em(e,e.limit,"L"):e}function bw(t,e){return new g1(e.largestBatchId,pS(t.ne,e.overlayMutation))}function xN(t,e){const n=e.path.lastSegment();return[t,_n(e.path.popLast()),n]}function NN(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:$a(r.readTime),documentKey:_n(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_e{getBundleMetadata(e,n){return PN(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ma(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return PN(e).put({bundleId:(r=n).id,createTime:$a(Ct(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return ON(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:m1(i.bundledQuery),readTime:Ma(i.readTime)};var i})}saveNamedQuery(e,n){return ON(e).put(function(r){return{name:r.name,readTime:$a(Ct(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function PN(t){return $t(t,"bundles")}function ON(t){return $t(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.wt=e,this.userId=n}static se(e,n){const r=n.uid||"";return new Mv(e,r)}getOverlay(e,n){return xc(e).get(xN(this.userId,n)).next(r=>r?bw(this.wt,r):null)}getOverlays(e,n){const r=ii();return S.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new g1(n,o);i.push(this.ie(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(_n(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(xc(e).W("collectionPathOverlayIndex",a))}),S.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ii(),s=_n(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xc(e).K("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=bw(this.wt,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ii();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xc(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=bw(this.wt,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}ie(e,n){return xc(e).put(function(r,i,s){const[o,a,l]=xN(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ad(r.ne,s.mutation)}}(this.wt,this.userId,n))}}function xc(t){return $t(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){}re(e,n){this.oe(e,n),n.ue()}oe(e,n){if("nullValue"in e)this.ce(n,5);else if("booleanValue"in e)this.ce(n,10),n.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(n,15),n.ae(Qe(e.integerValue));else if("doubleValue"in e){const r=Qe(e.doubleValue);isNaN(r)?this.ce(n,13):(this.ce(n,15),Sd(r)?n.ae(0):n.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(n,20),typeof r=="string"?n.he(r):(n.he(`${r.seconds||""}`),n.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,n),this.fe(n);else if("bytesValue"in e)this.ce(n,30),n.de(Ra(e.bytesValue)),this.fe(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(n,45),n.ae(r.latitude||0),n.ae(r.longitude||0)}else"mapValue"in e?rV(e)?this.ce(n,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,n),this.fe(n)):"arrayValue"in e?(this.me(e.arrayValue,n),this.fe(n)):V()}le(e,n){this.ce(n,25),this.ge(e,n)}ge(e,n){n.he(e)}we(e,n){const r=e.fields||{};this.ce(n,55);for(const i of Object.keys(r))this.le(i,n),this.oe(r[i],n)}me(e,n){const r=e.values||[];this.ce(n,50);for(const i of r)this.oe(i,n)}_e(e,n){this.ce(n,37),M.fromName(e).path.forEach(r=>{this.ce(n,60),this.ge(r,n)})}ce(e,n){e.ae(n)}fe(e){e.ae(2)}}Bo.ye=new Bo;function F_e(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function DN(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=F_e(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class L_e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ie(r.value),r=n.next();this.Te()}Ee(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ae(r.value),r=n.next();this.Re()}be(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=n.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=n.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const n=this.Ve(e),r=DN(n);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}De(e){const n=this.Ve(e),r=DN(n);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ie(e){const n=255&e;n===0?(this.xe(0),this.xe(255)):n===255?(this.xe(255),this.xe(0)):this.xe(n)}Ae(e){const n=255&e;n===0?(this.ke(0),this.ke(255)):n===255?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class U_e{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class j_e{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class Nc{constructor(){this.Oe=new L_e,this.Fe=new U_e(this.Oe),this.$e=new j_e(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return e===0?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zo(this.indexId,this.documentKey,this.arrayValue,r)}}function Ao(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=$N(t.arrayValue,e.arrayValue),n!==0?n:(n=$N(t.directionalValue,e.directionalValue),n!==0?n:M.comparator(t.documentKey,e.documentKey)))}function $N(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_e{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const n of e.filters){const r=n;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const n=uS(e);if(n!==void 0&&!this.Qe(n))return!1;const r=Lo(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(this.Ke!==void 0){const o=r[i];if(!this.je(this.Ke,o)||!this.We(this.Ue[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Ue.length||!this.We(this.Ue[s++],o))return!1}return!0}Qe(e){for(const n of this.qe)if(this.je(n,e))return!0;return!1}je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}We(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_e{constructor(){this.ze=new y1}addToCollectionParentIndex(e,n){return this.ze.add(n),S.resolve()}getCollectionParents(e,n){return S.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return S.resolve()}deleteFieldIndex(e,n){return S.resolve()}getDocumentsMatchingTarget(e,n){return S.resolve(null)}getIndexType(e,n){return S.resolve(0)}getFieldIndexes(e,n){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,n){return S.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return S.resolve(rr.min())}updateCollectionGroup(e,n,r){return S.resolve()}updateIndexEntries(e,n){return S.resolve()}}class y1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ee(ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ee(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new Uint8Array(0);class z_e{constructor(e,n){this.user=e,this.databaseId=n,this.He=new y1,this.Je=new So(r=>Pa(r),(r,i)=>Sf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.He.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.He.add(n)});const s={collectionId:r,parent:_n(i)};return MN(e).put(s)}return S.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Gj(n),""],!1,!0);return MN(e).K(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(si(o.parent))}return r})}addFieldIndex(e,n){const r=gp(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Oc(e);return s.next(a=>{o.put(NN(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=gp(e),i=Oc(e),s=Pc(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Pc(e);let i=!0;const s=new Map;return S.forEach(this.Ye(n),o=>this.Xe(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=te();const a=[];return S.forEach(s,(l,u)=>{var c;P("IndexedDbIndexManager",`Using index ${c=l,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(v=>`${v.fieldPath}:${v.kind}`).join(",")}`} to execute ${Pa(n)}`);const h=function(v,_){const E=uS(_);if(E===void 0)return null;for(const T of wm(v,E.fieldPath))switch(T.op){case"array-contains-any":return T.value.arrayValue.values||[];case"array-contains":return[T.value]}return null}(u,l),d=function(v,_){const E=new Map;for(const T of Lo(_))for(const C of wm(v,T.fieldPath))switch(C.op){case"==":case"in":E.set(T.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return E.set(T.fieldPath.canonicalString(),C.value),Array.from(E.values())}return null}(u,l),f=function(v,_){const E=[];let T=!0;for(const C of Lo(_)){const k=C.kind===0?pN(v,C.fieldPath,v.startAt):gN(v,C.fieldPath,v.startAt);E.push(k.value),T&&(T=k.inclusive)}return new oo(E,T)}(u,l),p=function(v,_){const E=[];let T=!0;for(const C of Lo(_)){const k=C.kind===0?gN(v,C.fieldPath,v.endAt):pN(v,C.fieldPath,v.endAt);E.push(k.value),T&&(T=k.inclusive)}return new oo(E,T)}(u,l),g=this.Ze(l,u,f),w=this.Ze(l,u,p),m=this.tn(l,u,d),y=this.en(l.indexId,h,g,f.inclusive,w,p.inclusive,m);return S.forEach(y,v=>r.j(v,n.limit).next(_=>{_.forEach(E=>{const T=M.fromSegments(E.documentKey);o.has(T)||(o=o.add(T),a.push(T))})}))}).next(()=>a)}return S.resolve(null)})}Ye(e){let n=this.Je.get(e);return n||(n=[e],this.Je.set(e,n),n)}en(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const d=n?this.nn(n[h/u]):pp,f=this.sn(e,d,r[h%u],i),p=this.rn(e,d,s[h%u],o),g=a.map(w=>this.sn(e,d,w,!0));c.push(...this.createRange(f,p,g))}return c}sn(e,n,r,i){const s=new zo(e,M.empty(),n,r);return i?s:s.Le()}rn(e,n,r,i){const s=new zo(e,M.empty(),n,r);return i?s.Le():s}Xe(e,n){const r=new V_e(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.Ge(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;return S.forEach(this.Ye(n),i=>this.Xe(e,i).next(s=>{s?r!==0&&s.fields.length<function(o){let a=new Ee(nt.comparator),l=!1;for(const u of o.filters){const c=u;c.field.isKeyField()||(c.op==="array-contains"||c.op==="array-contains-any"?l=!0:a=a.add(c.field))}for(const u of o.orderBy)u.field.isKeyField()||(a=a.add(u.field));return a.size+(l?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,n){const r=new Nc;for(const i of Lo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Be(i.kind);Bo.ye.re(s,o)}return r.Me()}nn(e){const n=new Nc;return Bo.ye.re(e,n.Be(0)),n.Me()}un(e,n){const r=new Nc;return Bo.ye.re(Na(this.databaseId,n),r.Be(function(i){const s=Lo(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Me()}tn(e,n,r){if(r===null)return[];let i=[];i.push(new Nc);let s=0;for(const o of Lo(e)){const a=r[s++];for(const l of i)if(this.cn(n,o.fieldPath)&&Td(a))i=this.an(i,o,a);else{const u=l.Be(o.kind);Bo.ye.re(a,u)}}return this.hn(i)}Ze(e,n,r){return this.tn(e,n,r.position)}hn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Me();return n}an(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Nc;l.seed(a.Me()),Bo.ye.re(o,l.Be(n.kind)),s.push(l)}return s}cn(e,n){return!!e.filters.find(r=>r instanceof Bt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=gp(e),i=Oc(e);return(n?r.K("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.K()).next(s=>{const o=[];return S.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,c){const h=c?new vm(c.sequenceNumber,new rr(Ma(c.readTime),new M(si(c.documentKey)),c.largestBatchId)):vm.empty(),d=u.fields.map(([f,p])=>new Ive(nt.fromServerFormat(f),p));return new Qj(u.indexId,u.collectionGroup,d,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ee(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=gp(e),s=Oc(e);return this.ln(e).next(o=>i.K("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>S.forEach(a,l=>s.put(NN(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return S.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?S.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,l=>this.fn(e,i,l).next(u=>{const c=this.dn(s,l);return u.isEqual(c)?S.resolve():this._n(e,s,l,u,c)}))))})}wn(e,n,r,i){return Pc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,n.key),documentKey:n.key.path.toArray()})}mn(e,n,r,i){return Pc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,n.key),n.key.path.toArray()])}fn(e,n,r){const i=Pc(e);let s=new Ee(Ao);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,n)])},(o,a)=>{s=s.add(new zo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}dn(e,n){let r=new Ee(Ao);const i=this.on(n,e);if(i==null)return r;const s=uS(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Td(o))for(const a of o.arrayValue.values||[])r=r.add(new zo(n.indexId,e.key,this.nn(a),i))}else r=r.add(new zo(n.indexId,e.key,pp,i));return r}_n(e,n,r,i,s){P("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,u,c,h){const d=a.getIterator(),f=l.getIterator();let p=pl(d),g=pl(f);for(;p||g;){let w=!1,m=!1;if(p&&g){const y=u(p,g);y<0?m=!0:y>0&&(w=!0)}else p!=null?m=!0:w=!0;w?(c(g),g=pl(f)):m?(h(p),p=pl(d)):(p=pl(d),g=pl(f))}}(i,s,Ao,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.mn(e,n,r,a))}),S.waitFor(o)}ln(e){let n=1;return Oc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ao(o,a)).filter((o,a,l)=>!a||Ao(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ao(o,e),l=Ao(o,n);if(a===0)i[0]=e.Le();else if(a>0&&l<0)i.push(o),i.push(o.Le());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2)s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,pp,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,pp,[]]));return s}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(FN)}getMinOffset(e,n){return S.mapArray(this.Ye(n),r=>this.Xe(e,r).next(i=>i||V())).next(FN)}}function MN(t){return $t(t,"collectionParents")}function Pc(t){return $t(t,"indexEntries")}function gp(t){return $t(t,"indexConfiguration")}function Oc(t){return $t(t,"indexState")}function FN(t){Y(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;i1(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new rr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class In{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(c,h,d)=>(a++,d.delete()));s.push(l.next(()=>{Y(a===1)}));const u=[];for(const c of n.mutations){const h=MV(e,c.key.path,n.batchId);s.push(i.delete(h)),u.push(c.key)}return S.waitFor(s).next(()=>u)}function bm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw V();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(41943040,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class Fv{constructor(e,n,r,i){this.userId=e,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,n,r,i){Y(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Fv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ps(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=_l(e),o=ps(e);return o.add({}).next(a=>{Y(typeof a=="number");const l=new f1(a,n,r,i),u=function(d,f,p){const g=p.baseMutations.map(m=>Ad(d.ne,m)),w=p.mutations.map(m=>Ad(d.ne,m));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:w}}(this.wt,this.userId,l),c=[];let h=new Ee((d,f)=>ee(d.canonicalString(),f.canonicalString()));for(const d of i){const f=MV(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,v_e))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.gn[a]=l.keys()}),S.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return ps(e).get(n).next(r=>r?(Y(r.userId===this.userId),Vo(this.wt,r)):null)}yn(e,n){return this.gn[n]?S.resolve(this.gn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.gn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ps(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Y(a.batchId>=r),s=Vo(this.wt,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ps(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ps(e).K("userMutationsIndex",n).next(r=>r.map(i=>Vo(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Kp(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return _l(e).J({range:i},(o,a,l)=>{const[u,c,h]=o,d=si(c);if(u===this.userId&&n.path.isEqual(d))return ps(e).get(h).next(f=>{if(!f)throw V();Y(f.userId===this.userId),s.push(Vo(this.wt,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ee(ee);const i=[];return n.forEach(s=>{const o=Kp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=_l(e).J({range:a},(u,c,h)=>{const[d,f,p]=u,g=si(f);d===this.userId&&s.path.isEqual(g)?r=r.add(p):h.done()});i.push(l)}),S.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Kp(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ee(ee);return _l(e).J({range:o},(l,u,c)=>{const[h,d,f]=l,p=si(d);h===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):c.done()}).next(()=>this.pn(e,a))}pn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ps(e).get(s).next(o=>{if(o===null)throw V();Y(o.userId===this.userId),r.push(Vo(this.wt,o))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return BV(e.ee,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.In(n.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return S.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return _l(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=si(s[1]);i.push(l)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,n){return zV(e,this.userId,n)}Tn(e){return qV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zV(t,e,n){const r=Kp(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return _l(t).J({range:s,H:!0},(a,l,u)=>{const[c,h,d]=a;c===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function ps(t){return $t(t,"mutations")}function _l(t){return $t(t,"documentMutations")}function qV(t){return $t(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Fa(0)}static Rn(){return new Fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_e{constructor(e,n){this.referenceDelegate=e,this.wt=n}allocateTargetId(e){return this.bn(e).next(n=>{const r=new Fa(n.highestTargetId);return n.highestTargetId=r.next(),this.Pn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(n=>Q.fromTimestamp(new Ue(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Pn(e,i)))}addTargetData(e,n){return this.vn(e,n).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(n,r),this.Pn(e,r))))}updateTargetData(e,n){return this.vn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ml(e).delete(n.targetId)).next(()=>this.bn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ml(e).J((o,a)=>{const l=Kc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>S.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ml(e).J((r,i)=>{const s=Kc(i);n(s)})}bn(e){return UN(e).get("targetGlobalKey").next(n=>(Y(n!==null),n))}Pn(e,n){return UN(e).put("targetGlobalKey",n)}vn(e,n){return ml(e).put(VV(this.wt,n))}Vn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Pa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ml(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=Kc(a);Sf(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ss(e);return n.forEach(o=>{const a=_n(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),S.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ss(e);return S.forEach(n,s=>{const o=_n(s.path);return S.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ss(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ss(e);let s=te();return i.J({range:r,H:!0},(o,a,l)=>{const u=si(o[1]),c=new M(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=_n(n.path),i=IDBKeyRange.bound([r],[Gj(r)],!1,!0);let s=0;return Ss(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}te(e,n){return ml(e).get(n).next(r=>r?Kc(r):null)}}function ml(t){return $t(t,"targets")}function UN(t){return $t(t,"targetGlobal")}function Ss(t){return $t(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN([t,e],[n,r]){const i=ee(t,n);return i===0?ee(e,r):i}class W_e{constructor(e){this.Sn=e,this.buffer=new Ee(jN),this.Dn=0}Cn(){return++this.Dn}xn(e){const n=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H_e{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Nn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return this.Nn!==null}kn(e){P("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Nn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await wo(n)}await this.kn(3e5)})}}class K_e{constructor(e,n){this.Mn=e,this.params=n}calculateTargetCount(e,n){return this.Mn.On(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return S.resolve(Nn.ot);const r=new W_e(n);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Mn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Mn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(LN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LN):this.$n(e,n))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),lS()<=ne.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_e{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new K_e(r,i)}(this,n)}On(e){const n=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Bn(e){let n=0;return this.Fn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Fn(e,n){return this.Ln(e,(r,i)=>n(i))}addReference(e,n,r){return mp(e,r)}removeReference(e,n,r){return mp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return mp(e,n)}Un(e,n){return function(r,i){let s=!1;return qV(r).Y(o=>zV(r,o,i).next(a=>(a&&(s=!0),S.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(o,a)=>{if(a<=n){const l=this.Un(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Q.min()),Ss(e).delete([0,_n(o.path)])))});i.push(l)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return mp(e,n)}Ln(e,n){const r=Ss(e);let i,s=Nn.ot;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Nn.ot&&n(new M(si(i)),s),s=u,i=l):s=Nn.ot}).next(()=>{s!==Nn.ot&&n(new M(si(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mp(t,e){return Ss(t).put(function(n,r){return{targetId:0,path:_n(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.changes=new So(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ie.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?S.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_e{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ro(e).put(r)}removeEntry(e,n,r){return Ro(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Sm(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.qn(e,r)))}getEntry(e,n){let r=Ie.newInvalidDocument(n);return Ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dc(n))},(i,s)=>{r=this.Kn(n,s)}).next(()=>r)}Gn(e,n){let r={size:0,document:Ie.newInvalidDocument(n)};return Ro(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dc(n))},(i,s)=>{r={document:this.Kn(n,s),size:bm(s)}}).next(()=>r)}getEntries(e,n){let r=Pn();return this.Qn(e,n,(i,s)=>{const o=this.Kn(i,s);r=r.insert(i,o)}).next(()=>r)}jn(e,n){let r=Pn(),i=new Xe(M.comparator);return this.Qn(e,n,(s,o)=>{const a=this.Kn(s,o);r=r.insert(s,a),i=i.insert(s,bm(o))}).next(()=>({documents:r,Wn:i}))}Qn(e,n,r){if(n.isEmpty())return S.resolve();let i=new Ee(zN);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Dc(i.first()),Dc(i.last())),o=i.getIterator();let a=o.getNext();return Ro(e).J({index:"documentKeyIndex",range:s},(l,u,c)=>{const h=M.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&zN(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.q(Dc(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const i=[n.popLast().toArray(),n.lastSegment(),Sm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ro(e).K(IDBKeyRange.bound(i,s,!0)).next(o=>{let a=Pn();for(const l of o){const u=this.Kn(M.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(u.key,u)}return a})}getAllFromCollectionGroup(e,n,r,i){let s=Pn();const o=BN(n,r),a=BN(n,rr.max());return Ro(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.Kn(M.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new Y_e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return VN(e).get("remoteDocumentGlobalKey").next(n=>(Y(!!n),n))}qn(e,n){return VN(e).put("remoteDocumentGlobalKey",n)}Kn(e,n){if(n){const r=$_e(this.wt,n);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return Ie.newInvalidDocument(e)}}function HV(t){return new Q_e(t)}class Y_e extends WV{constructor(e,n){super(),this.zn=e,this.trackRemovals=n,this.Hn=new So(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ee((s,o)=>ee(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Hn.get(s);if(n.push(this.zn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=RN(this.zn.wt,o);i=i.add(s.path.popLast()),r+=bm(l)-a.size,n.push(this.zn.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=RN(this.zn.wt,o.convertToNoDocument(Q.min()));n.push(this.zn.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.zn.updateMetadata(e,r)),S.waitFor(n)}getFromCache(e,n){return this.zn.Gn(e,n).next(r=>(this.Hn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.zn.jn(e,n).next(({documents:r,Wn:i})=>(i.forEach((s,o)=>{this.Hn.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function VN(t){return $t(t,"remoteDocumentGlobal")}function Ro(t){return $t(t,"remoteDocumentsV14")}function Dc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BN(t,e){const n=e.documentKey.path.toArray();return[t,Sm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zN(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ee(n[s],r[s]),i)return i;return i=ee(n.length,r.length),i||(i=ee(n[n.length-2],r[r.length-2]),i||ee(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.getBaseDocument(e,n,r))).next(i=>(r!==null&&vh(r.mutation,i,Xn.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const i=ii();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Pn();const o=_h(),a=_h();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof us)?s=s.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),vh(c.mutation,u,c.mutation.getFieldMask(),Ue.now()))}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new X_e(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_h();let i=new Xe((o,a)=>o-a),s=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Xn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||te()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=bV();c.forEach(d=>{if(!s.has(d)){const f=yV(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return S.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return M.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):u1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):S.resolve(ii());let a=-1,l=s;return o.next(u=>S.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?S.resolve():this.getBaseDocument(e,c,h).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,te())).next(c=>({batchId:a,changes:SV(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=Hc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Hc();return this.indexManager.getCollectionParents(e,i).next(o=>S.forEach(o,a=>{const l=function(u,c){return new ls(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((a,l)=>{const u=l.getKey();i.get(u)===null&&(i=i.insert(u,Ie.newInvalidDocument(u)))});let o=Hc();return i.forEach((a,l)=>{const u=s.get(a);u!==void 0&&vh(u.mutation,l,Xn.empty(),Ue.now()),c1(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):S.resolve(Ie.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_e{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return S.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:Ct(r.createTime)}),S.resolve()}getNamedQuery(e,n){return S.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,function(r){return{name:r.name,query:m1(r.bundledQuery),readTime:Ct(r.readTime)}}(n)),S.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_e{constructor(){this.overlays=new Xe(M.comparator),this.Xn=new Map}getOverlay(e,n){return S.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ii();return S.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ie(e,n,s)}),S.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Xn.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),S.resolve()}getOverlaysForCollection(e,n,r){const i=ii(),s=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return S.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xe((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=ii(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ii(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return S.resolve(a)}ie(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new g1(n,r));let s=this.Xn.get(n);s===void 0&&(s=te(),this.Xn.set(n,s)),this.Xn.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.Zn=new Ee(vt.ts),this.es=new Ee(vt.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new vt(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new vt(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new M(new ce([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.es.forEachInRange([r,i],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new M(new ce([])),r=new vt(n,e),i=new vt(n,e+1);let s=te();return this.es.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.Zn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return M.comparator(e.key,n.key)||ee(e.ls,n.ls)}static ns(e,n){return ee(e.ls,n.ls)||M.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ewe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Ee(vt.ts)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new f1(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ds=this.ds.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,n){return S.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ws(r),s=i<0?0:i;return S.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],o=>{const a=this._s(o.ls);s.push(a)}),S.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ee(ee);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{r=r.add(a.ls)})}),S.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;M.isDocumentKey(s)||(s=s.child(""));const o=new vt(new M(s),0);let a=new Ee(ee);return this.ds.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.ls)),!0)},o),S.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(r=>{const i=this._s(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Y(this.ys(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ds;return S.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new vt(n,0),i=this.ds.firstAfterOrEqual(r);return S.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}ys(e,n){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class twe{constructor(e){this.ps=e,this.docs=new Xe(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return S.resolve(r?r.document.mutableCopy():Ie.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ie.newInvalidDocument(i))}),S.resolve(r)}getAllFromCollection(e,n,r){let i=Pn();const s=new M(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||i1(Xj(l),r)<=0||(i=i.insert(l.key,l.mutableCopy()))}return S.resolve(i)}getAllFromCollectionGroup(e,n,r,i){V()}Is(e,n){return S.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nwe(this)}getSize(e){return S.resolve(this.size)}}class nwe extends WV{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),S.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rwe{constructor(e){this.persistence=e,this.Ts=new So(n=>Pa(n),Sf),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Es=0,this.As=new v1,this.targetCount=0,this.Rs=Fa.An()}forEachTarget(e,n){return this.Ts.forEach((r,i)=>n(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),S.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new Fa(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,S.resolve()}updateTargetData(e,n){return this.vn(n),S.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(s).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return S.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),S.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),S.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),S.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return S.resolve(r)}containsKey(e,n){return S.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n){this.bs={},this.overlays={},this.Ps=new Nn(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new rwe(this),this.indexManager=new B_e,this.remoteDocumentCache=function(r){return new twe(r)}(r=>this.referenceDelegate.Ss(r)),this.wt=new jV(n),this.Ds=new J_e(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z_e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new ewe(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){P("MemoryPersistence","Starting transaction:",e);const i=new iwe(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,n){return S.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class iwe extends Zj{constructor(e){super(),this.currentSequenceNumber=e}}class Lv{constructor(e){this.persistence=e,this.ks=new v1,this.Ms=null}static Os(e){return new Lv(e)}get Fs(){if(this.Ms)return this.Ms;throw V()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),S.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),S.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Ms=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Fs,r=>{const i=M.fromPath(r);return this.$s(e,i).next(s=>{s||n.removeEntry(i,Q.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return S.or([()=>S.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class swe{constructor(e){this.wt=e}M(e,n,r,i){const s=new Pv("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AN,{unique:!0}),a.createObjectStore("documentMutations")}(e),qN(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=S.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),qN(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").K().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AN,{unique:!0});const c=l.store("mutations"),h=u.map(d=>c.put(d));return S.waitFor(h)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Bs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(o=o.next(()=>this.Us(s))),r<8&&i>=8&&(o=o.next(()=>this.qs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ks(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:x_e});l.createIndex("collectionPathOverlayIndex",N_e,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",P_e,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:__e});l.createIndex("documentKeyIndex",w_e),l.createIndex("collectionGroupIndex",E_e)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Qs(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:C_e}).createIndex("sequenceNumberIndex",k_e,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:A_e}).createIndex("documentKeyIndex",R_e,{unique:!1})}(e))),o}Ls(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=bm(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next(i=>S.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",o).next(a=>S.forEach(a,l=>{Y(l.userId===s.userId);const u=Vo(this.wt,l);return BV(e,s.userId,u).next(()=>{})}))}))}Us(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new ce(o),u=function(c){return[0,_n(c)]}(l);s.push(n.get(u).next(c=>c?S.resolve():(h=>n.put({targetId:0,path:_n(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>S.waitFor(s))})}qs(e,n){e.createObjectStore("collectionParents",{keyPath:I_e});const r=n.store("collectionParents"),i=new y1,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:_n(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new ce(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const c=si(a);return s(c.popLast())}))}Ks(e){const n=e.store("targets");return n.J((r,i)=>{const s=Kc(i),o=VV(this.wt,s);return n.put(o)})}Gs(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(u=o,u.document?new M(ce.fromString(u.document.name).popFirst(5)):u.noDocument?M.fromSegments(u.noDocument.path):u.unknownDocument?M.fromSegments(u.unknownDocument.path):V()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>S.waitFor(i))}Qs(e,n){const r=n.store("mutations"),i=HV(this.wt),s=new GV(Lv.Os,this.wt.ne);return r.K().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:te();Vo(this.wt,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),S.forEach(a,(l,u)=>{const c=new St(u),h=Mv.se(this.wt,c),d=s.getIndexManager(c),f=Fv.se(c,this.wt,d,s.referenceDelegate);return new KV(i,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new gS(n,Nn.ot),l).next()})})}}function qN(t){t.createObjectStore("targetDocuments",{keyPath:b_e}).createIndex("documentTargetsIndex",T_e,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",S_e,{unique:!0}),t.createObjectStore("targetGlobal")}const Tw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _1{constructor(e,n,r,i,s,o,a,l,u,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=s,this.window=o,this.document=a,this.Ws=u,this.zs=c,this.Hs=h,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=d=>Promise.resolve(),!_1.V())throw new x(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new G_e(this,i),this.ei=n+"main",this.wt=new jV(l),this.ni=new Fr(this.ei,this.Hs,new swe(this.wt)),this.Vs=new q_e(this.referenceDelegate,this.wt),this.remoteDocumentCache=HV(this.wt),this.Ds=new M_e,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,c===!1&&tt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(b.FAILED_PRECONDITION,Tw);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Nn(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){return this.ti=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(async()=>{this.started&&await this.ii()}))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(n=>{n||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(n=>this.isPrimary&&!n?this.li(e).next(()=>!1):!!n&&this.fi(e).next(()=>!0))).catch(e=>{if(Eo(e))return P("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return $c(e).get("owner").next(n=>S.resolve(this.di(n)))}_i(e){return yp(e).delete(this.clientId)}async wi(){if(this.isPrimary&&!this.mi(this.Zs,18e5)){this.Zs=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=$t(n,"clientMetadata");return r.K().next(i=>{const s=this.gi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return S.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.si)for(const n of e)this.si.removeItem(this.yi(n.clientId))}}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?S.resolve(!0):$c(e).get("owner").next(n=>{if(n!==null&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)){if(this.di(n)&&this.networkEnabled)return!0;if(!this.di(n)){if(!n.allowTabSynchronization)throw new x(b.FAILED_PRECONDITION,Tw);return!1}}return!(!this.networkEnabled||!this.inForeground)||yp(e).K().next(r=>this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&P("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),await this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new gS(e,Nn.ot);return this.li(n).next(()=>this._i(n))}),this.ni.close(),this.Ai()}gi(e,n){return e.filter(r=>this.mi(r.updateTimeMs,n)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>yp(e).K().next(n=>this.gi(n,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,n){return Fv.se(e,this.wt,n,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z_e(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Mv.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,n,r){P("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.Hs)===15?D_e:o===14?UV:o===13?LV:o===12?O_e:o===11?FV:void V();var o;let a;return this.ni.runTransaction(e,i,s,l=>(a=new gS(l,this.Ps?this.Ps.next():Nn.ot),n==="readwrite-primary"?this.ai(a).next(u=>!!u||this.hi(a)).next(u=>{if(!u)throw tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new x(b.FAILED_PRECONDITION,Jj);return r(a)}).next(u=>this.fi(a).next(()=>u)):this.bi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}bi(e){return $c(e).get("owner").next(n=>{if(n!==null&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)&&!this.di(n)&&!(this.zs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new x(b.FAILED_PRECONDITION,Tw)})}fi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $c(e).put("owner",n)}static V(){return Fr.V()}li(e){const n=$c(e);return n.get("owner").next(r=>this.di(r)?(P("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):S.resolve())}mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground=this.document.visibilityState==="visible")}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Js=()=>{this.Ii(),GK()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var n;try{const r=((n=this.si)===null||n===void 0?void 0:n.getItem(this.yi(e)))!==null;return P("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){tt("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $c(t){return $t(t,"owner")}function yp(t){return $t(t,"clientMetadata")}function w1(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=i}static Vi(e,n){let r=te(),i=te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new E1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ci(e,n).next(s=>s||this.xi(e,n,i,r)).next(s=>s||this.Ni(e,n))}Ci(e,n){if(vN(n))return S.resolve(null);let r=Un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Em(n,null,"F"),r=Un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=te(...s);return this.Di.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ki(n,a);return this.Mi(n,u,o,l.readTime)?this.Ci(e,Em(n,null,"F")):this.Oi(e,u,n,l)}))})))}xi(e,n,r,i){return vN(n)||i.isEqual(Q.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(s=>{const o=this.ki(n,s);return this.Mi(n,o,r,i)?this.Ni(e,n):(lS()<=ne.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dS(n)),this.Oi(e,o,n,Yj(i,-1)))})}ki(e,n){let r=new Ee(uV(e));return n.forEach((i,s)=>{c1(e,s)&&(r=r.add(s))}),r}Mi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,n){return lS()<=ne.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",dS(n)),this.Di.getDocumentsMatchingQuery(e,n,rr.min())}Oi(e,n,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class owe{constructor(e,n,r,i){this.persistence=e,this.Fi=n,this.wt=i,this.$i=new Xe(ee),this.Bi=new So(s=>Pa(s),Sf),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KV(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function YV(t,e,n,r){return new owe(t,e,n,r)}async function XV(t,e){const n=F(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=te();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ki:u,removedBatchIds:o,addedBatchIds:a}))})})}function awe(t,e){const n=F(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=S.resolve();return h.forEach(f=>{d=d.next(()=>u.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);Y(g!==null),p.version.compareTo(g)<0&&(c.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=te();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function JV(t){const e=F(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function lwe(t,e){const n=F(t),r=e.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Vs.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Vs.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(h)?f=f.withResumeToken(ft.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(h,f),function(p,g,w){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,f,c)&&a.push(n.Vs.updateTargetData(s,f))});let l=Pn(),u=te();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(ZV(s,o,e.documentUpdates).next(c=>{l=c.Gi,u=c.Qi})),!r.isEqual(Q.min())){const c=n.Vs.getLastRemoteSnapshotVersion(s).next(h=>n.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return S.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.$i=i,s))}function ZV(t,e,n){let r=te(),i=te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Pn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Q.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):P("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Gi:o,Qi:i}})}function uwe(t,e){const n=F(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ku(t,e){const n=F(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Vs.getTargetData(r,e).next(s=>s?(i=s,S.resolve(i)):n.Vs.allocateTargetId(r).next(o=>(i=new Bs(e,o,0,r.currentSequenceNumber),n.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.$i.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}async function Au(t,e,n){const r=F(t),i=r.$i.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Eo(o))throw o;P("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}function Tm(t,e,n){const r=F(t);let i=Q.min(),s=te();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=F(a),h=c.Bi.get(u);return h!==void 0?S.resolve(c.$i.get(h)):c.Vs.getTargetData(l,u)}(r,o,Un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,n?i:Q.min(),n?s:te())).next(a=>(nB(r,lV(e),a),{documents:a,ji:s})))}function eB(t,e){const n=F(t),r=F(n.Vs),i=n.$i.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(o=>o?o.target:null))}function tB(t,e){const n=F(t),r=n.Li.get(e)||Q.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ui.getAllFromCollectionGroup(i,e,Yj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(nB(n,e,i),i))}function nB(t,e,n){let r=Q.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Li.set(e,r)}async function cwe(t,e,n,r){const i=F(t);let s=te(),o=Pn();for(const u of n){const c=e.Wi(u.metadata.name);u.document&&(s=s.add(c));const h=e.zi(u);h.setReadTime(e.Hi(u.metadata.readTime)),o=o.insert(c,h)}const a=i.Ui.newChangeBuffer({trackRemovals:!0}),l=await ku(i,function(u){return Un(ic(ce.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>ZV(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Vs.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Vs.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.Gi,c.Qi)).next(()=>c.Gi)))}async function hwe(t,e,n=te()){const r=await ku(t,Un(m1(e.bundledQuery))),i=F(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ct(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ds.saveNamedQuery(s,e);const a=r.withResumeToken(ft.EMPTY_BYTE_STRING,o);return i.$i=i.$i.insert(a.targetId,a),i.Vs.updateTargetData(s,a).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}function WN(t,e){return`firestore_clients_${t}_${e}`}function HN(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Iw(t,e){return`firestore_targets_${t}_${e}`}class Im{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ji(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new x(i.error.code,i.error.message))),o?new Im(e,n,i.state,s):(tt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ji(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new x(r.error.code,r.error.message))),s?new wh(e,r.state,i):(tt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ji(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=$v();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=nV(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Cm(e,s):(tt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class S1{constructor(e,n){this.clientId=e,this.onlineState=n}static Ji(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new S1(n.clientId,n.onlineState):(tt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mS{constructor(){this.activeTargetIds=$v()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cw{constructor(e,n,r,i,s){this.window=e,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Xe(ee),this.started=!1,this.ir=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=WN(this.persistenceKey,this.tr),this.ur=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new mS),this.cr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.lr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.dr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ri();for(const r of e){if(r===this.tr)continue;const i=this.getItem(WN(this.persistenceKey,r));if(i){const s=Cm.Ji(r,i);s&&(this.sr=this.sr.insert(s.clientId,s))}}this._r();const n=this.storage.getItem(this.lr);if(n){const r=this.wr(n);r&&this.mr(r)}for(const r of this.ir)this.nr(r);this.ir=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let n=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,n,r){this.yr(e,n,r),this.pr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Iw(this.persistenceKey,e));if(r){const i=wh.Ji(e,r);i&&(n=i.state)}}return this.Ir.Xi(e),this._r(),n}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Iw(this.persistenceKey,e))}updateQueryState(e,n,r){this.Tr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return P("SharedClientState","READ",e,n),n}setItem(e,n){P("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){P("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){const n=e;if(n.storageArea===this.storage){if(P("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.cr.test(n.key)){if(n.newValue==null){const r=this.Rr(n.key);return this.br(r,null)}{const r=this.Pr(n.key,n.newValue);if(r)return this.br(r.clientId,r)}}else if(this.ar.test(n.key)){if(n.newValue!==null){const r=this.vr(n.key,n.newValue);if(r)return this.Vr(r)}}else if(this.hr.test(n.key)){if(n.newValue!==null){const r=this.Sr(n.key,n.newValue);if(r)return this.Dr(r)}}else if(n.key===this.lr){if(n.newValue!==null){const r=this.wr(n.newValue);if(r)return this.mr(r)}}else if(n.key===this.ur){const r=function(i){let s=Nn.ot;if(i!=null)try{const o=JSON.parse(i);Y(typeof o=="number"),s=o}catch(o){tt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==Nn.ot&&this.sequenceNumberHandler(r)}else if(n.key===this.dr){const r=this.Cr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Nr(i)))}}}else this.ir.push(n)})}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,n,r){const i=new Im(this.currentUser,e,n,r),s=HN(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const n=HN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Er(e){const n={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(n))}Tr(e,n,r){const i=Iw(this.persistenceKey,e),s=new wh(e,n,r);this.setItem(i,s.Yi())}Ar(e){const n=JSON.stringify(Array.from(e));this.setItem(this.dr,n)}Rr(e){const n=this.cr.exec(e);return n?n[1]:null}Pr(e,n){const r=this.Rr(e);return Cm.Ji(r,n)}vr(e,n){const r=this.ar.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Im.Ji(new St(s),i,n)}Sr(e,n){const r=this.hr.exec(e),i=Number(r[1]);return wh.Ji(i,n)}wr(e){return S1.Ji(e)}Cr(e){return JSON.parse(e)}async Vr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.kr(e.batchId,e.state,e.error);P("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,n){const r=n?this.sr.insert(e,n):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Or(o,a).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let n=$v();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class rB{constructor(){this.Fr=new mS,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new mS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dwe{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fwe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pwe{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gwe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.so=n+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,i,s){const o=this.oo(e,n);P("RestConnection","Sending: ",o,r);const a={};return this.uo(a,i,s),this.co(e,o,a,r).then(l=>(P("RestConnection","Received: ",l),l),l=>{throw Su("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}ao(e,n,r,i,s,o){return this.ro(e,n,r,i,s)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+rc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,n){const r=fwe[e];return`${this.so}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,i){return new Promise((s,o)=>{const a=new fve;a.listenOnce(cve.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Sw.NO_ERROR:const u=a.getResponseJson();P("Connection","XHR received:",JSON.stringify(u)),s(u);break;case Sw.TIMEOUT:P("Connection",'RPC "'+e+'" timed out'),o(new x(b.DEADLINE_EXCEEDED,"Request time out"));break;case Sw.HTTP_ERROR:const c=a.getStatus();if(P("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(p)>=0?p:b.UNKNOWN}(h.status);o(new x(d,h.message))}else o(new x(b.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new x(b.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{P("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(n,"POST",l,r,15)})}ho(e,n,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=lve(),o=uve(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new dve({})),this.uo(a.initMessageHeaders,n,r),by()||zd()||HK()||Xb()||KK()||Bd()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=i.join("");P("Connection","Creating WebChannel: "+l,a);const u=s.createWebChannel(l,a);let c=!1,h=!1;const d=new pwe({jr:p=>{h?P("Connection","Not sending because WebChannel is closed:",p):(c||(P("Connection","Opening WebChannel transport."),u.open(),c=!0),P("Connection","WebChannel sending:",p),u.send(p))},Wr:()=>u.close()}),f=(p,g,w)=>{p.listen(g,m=>{try{w(m)}catch(y){setTimeout(()=>{throw y},0)}})};return f(u,dp.EventType.OPEN,()=>{h||P("Connection","WebChannel transport opened.")}),f(u,dp.EventType.CLOSE,()=>{h||(h=!0,P("Connection","WebChannel transport closed"),d.eo())}),f(u,dp.EventType.ERROR,p=>{h||(h=!0,Su("Connection","WebChannel transport errored:",p),d.eo(new x(b.UNAVAILABLE,"The operation could not be completed")))}),f(u,dp.EventType.MESSAGE,p=>{var g;if(!h){const w=p.data[0];Y(!!w);const m=w,y=m.error||((g=m[0])===null||g===void 0?void 0:g.error);if(y){P("Connection","WebChannel received error:",y);const v=y.status;let _=function(T){const C=it[T];if(C!==void 0)return wV(C)}(v),E=y.message;_===void 0&&(_=b.INTERNAL,E="Unknown error status: "+v+" with message "+y.message),h=!0,d.eo(new x(_,E)),u.close()}else P("Connection","WebChannel received:",w),d.no(w)}}),f(o,hve.STAT_EVENT,p=>{p.stat===rN.PROXY?P("Connection","Detected buffering proxy"):p.stat===rN.NOPROXY&&P("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.Zr()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(){return typeof window<"u"?window:null}function Gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t){return new o_e(t,!0)}class b1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,n,r,i,s,o,a,l){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new b1(e,n)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,n){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(tt(n.toString()),tt("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(n)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===n&&this.Uo(r,i)},r=>{e(()=>{const i=new x(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return P("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mwe extends sB{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.wt=s}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=u_e(this.wt,e),r=function(i){if(!("targetChange"in i))return Q.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?Ct(s.readTime):Q.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=kd(this.wt),n.addTarget=function(i,s){let o;const a=s.target;return o=_m(a)?{documents:NV(i,a)}:{query:PV(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=CV(i,s.resumeToken):s.snapshotVersion.compareTo(Q.min())>0&&(o.readTime=Id(i,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=h_e(this.wt,e);r&&(n.labels=r),this.Oo(n)}jo(e){const n={};n.database=kd(this.wt),n.removeTarget=e,this.Oo(n)}}class ywe extends sB{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=c_e(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.Jo(r,n)}return Y(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=kd(this.wt),this.Oo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ad(this.wt,r))};this.Oo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vwe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new x(b.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new x(b.UNKNOWN,i.toString())})}ao(e,n,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(b.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class _we{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(tt(n),this.su=!1):P("OnlineStateTracker",n)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wwe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(o=>{r.enqueueAndForget(async()=>{bo(this)&&(P("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=F(a);l.lu.add(4),await ac(l),l._u.set("Unknown"),l.lu.delete(4),await Af(l)}(this))})}),this._u=new _we(r,i)}}async function Af(t){if(bo(t))for(const e of t.fu)await e(!0)}async function ac(t){for(const e of t.fu)await e(!1)}function Uv(t,e){const n=F(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),C1(n)?I1(n):uc(n).Co()&&T1(n,e))}function Rd(t,e){const n=F(t),r=uc(n);n.hu.delete(e),r.Co()&&oB(n,e),n.hu.size===0&&(r.Co()?r.ko():bo(n)&&n._u.set("Unknown"))}function T1(t,e){t.wu.Nt(e.targetId),uc(t).Qo(e)}function oB(t,e){t.wu.Nt(e),uc(t).jo(e)}function I1(t){t.wu=new r_e({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),uc(t).start(),t._u.iu()}function C1(t){return bo(t)&&!uc(t).Do()&&t.hu.size>0}function bo(t){return F(t).lu.size===0}function aB(t){t.wu=void 0}async function Ewe(t){t.hu.forEach((e,n)=>{T1(t,e)})}async function Swe(t,e){aB(t),C1(t)?(t._u.uu(e),I1(t)):t._u.set("Unknown")}async function bwe(t,e,n){if(t._u.set("Online"),e instanceof IV&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.hu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.hu.delete(o),r.wu.removeTarget(o))}(t,e)}catch(r){P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await km(t,r)}else if(e instanceof Hp?t.wu.Ut(e):e instanceof TV?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(Q.min()))try{const r=await JV(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.wu.Yt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.hu.get(l);u&&i.hu.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.hu.get(a);if(!l)return;i.hu.set(a,l.withResumeToken(ft.EMPTY_BYTE_STRING,l.snapshotVersion)),oB(i,a);const u=new Bs(l.target,a,1,l.sequenceNumber);T1(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){P("RemoteStore","Failed to raise snapshot:",r),await km(t,r)}}async function km(t,e,n){if(!Eo(e))throw e;t.lu.add(1),await ac(t),t._u.set("Offline"),n||(n=()=>JV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{P("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await Af(t)})}function lB(t,e){return e().catch(n=>km(t,n,e))}async function lc(t){const e=F(t),n=ao(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;Twe(e);)try{const i=await uwe(e.localStore,r);if(i===null){e.au.length===0&&n.ko();break}r=i.batchId,Iwe(e,i)}catch(i){await km(e,i)}uB(e)&&cB(e)}function Twe(t){return bo(t)&&t.au.length<10}function Iwe(t,e){t.au.push(e);const n=ao(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function uB(t){return bo(t)&&!ao(t).Do()&&t.au.length>0}function cB(t){ao(t).start()}async function Cwe(t){ao(t).Xo()}async function kwe(t){const e=ao(t);for(const n of t.au)e.Ho(n.mutations)}async function Awe(t,e,n){const r=t.au.shift(),i=p1.from(r,e,n);await lB(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await lc(t)}async function Rwe(t,e){e&&ao(t).zo&&await async function(n,r){if(i=r.code,_V(i)&&i!==b.ABORTED){const s=n.au.shift();ao(n).No(),await lB(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await lc(n)}var i}(t,e),uB(t)&&cB(t)}async function GN(t,e){const n=F(t);n.asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials");const r=bo(n);n.lu.add(3),await ac(n),r&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await Af(n)}async function yS(t,e){const n=F(t);e?(n.lu.delete(2),await Af(n)):e||(n.lu.add(2),await ac(n),n._u.set("Unknown"))}function uc(t){return t.mu||(t.mu=function(e,n,r){const i=F(e);return i.tu(),new mwe(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:Ewe.bind(null,t),Jr:Swe.bind(null,t),Go:bwe.bind(null,t)}),t.fu.push(async e=>{e?(t.mu.No(),C1(t)?I1(t):t._u.set("Unknown")):(await t.mu.stop(),aB(t))})),t.mu}function ao(t){return t.gu||(t.gu=function(e,n,r){const i=F(e);return i.tu(),new ywe(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:Cwe.bind(null,t),Jr:Rwe.bind(null,t),Yo:kwe.bind(null,t),Jo:Awe.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await lc(t)):(await t.gu.stop(),t.au.length>0&&(P("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new It,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new k1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cc(t,e){if(tt("AsyncQueue",`${e}: ${t}`),Eo(t))return new x(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=Hc(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Jl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.yu=new Xe(M.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?e.type!==0&&r.type===3?this.yu=this.yu.insert(n,e):e.type===3&&r.type!==1?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.yu=this.yu.remove(n):e.type===1&&r.type===2?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):V():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ru{constructor(e,n,r,i,s,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Ru(e,n,Jl.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xwe{constructor(){this.Iu=void 0,this.listeners=[]}}class Nwe{constructor(){this.queries=new So(e=>aV(e),bf),this.onlineState="Unknown",this.Tu=new Set}}async function A1(t,e){const n=F(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new xwe),i)try{s.Iu=await n.onListen(r)}catch(o){const a=cc(o,`Initialization of query '${dS(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Eu(n.onlineState),s.Iu&&e.Au(s.Iu)&&x1(n)}async function R1(t,e){const n=F(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Pwe(t,e){const n=F(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Au(i)&&(r=!0);o.Iu=i}}r&&x1(n)}function Owe(t,e,n){const r=F(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function x1(t){t.Tu.forEach(e=>{e.next()})}class N1{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ru(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Du||!r)&&(!e.docs.isEmpty()||n==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const n=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Su(e){e=Ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dwe{constructor(e,n){this.payload=e,this.byteLength=n}Cu(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.wt=e}Wi(e){return hi(this.wt,e)}zi(e){return e.metadata.exists?xV(this.wt,e.document,!1):Ie.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Ct(e)}}class $we{constructor(e,n,r){this.xu=e,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hB(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const r=ce.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ku(e){const n=new Map,r=new YN(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||te()).add(s);n.set(o,a)}}return n}async complete(){const e=await cwe(this.localStore,new YN(this.wt),this.documents,this.xu.id),n=this.ku(this.documents);for(const r of this.queries)await hwe(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:e}}}function hB(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.key=e}}class fB{constructor(e){this.key=e}}class pB{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=te(),this.mutatedKeys=te(),this.Lu=uV(e),this.Uu=new Jl(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new QN,i=n?n.Uu:this.Uu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=c1(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),w=!0):this.Qu(d,f)||(r.track({type:2,doc:f}),w=!0,(l&&this.Lu(f,l)>0||u&&this.Lu(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),w=!0):d&&!f&&(r.track({type:1,doc:d}),w=!0,(l||u)&&(a=!0)),w&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Mi:a,mutatedKeys:s}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((u,c)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return f(h)-f(d)}(u.type,c.type)||this.Lu(u.doc,c.doc)),this.ju(r);const o=n?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,l=a!==this.$u;return this.$u=a,s.length!==0||l?{snapshot:new Ru(this.query,e.Uu,i,s,e.mutatedKeys,a===0,l,!1),zu:o}:{zu:o}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new QN,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=te(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new fB(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new dB(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=te();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return Ru.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class Mwe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Fwe{constructor(e){this.key=e,this.Xu=!1}}class Lwe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new So(a=>aV(a),bf),this.ec=new Map,this.nc=new Set,this.sc=new Xe(M.comparator),this.ic=new Map,this.rc=new v1,this.oc={},this.uc=new Map,this.cc=Fa.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function Uwe(t,e){const n=M1(t);let r,i;const s=n.tc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const o=await ku(n.localStore,Un(e));n.isPrimaryClient&&Uv(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await P1(n,e,r,a==="current")}return i}async function P1(t,e,n,r){t.hc=(c,h,d)=>async function(f,p,g,w){let m=p.view.Ku(g);m.Mi&&(m=await Tm(f.localStore,p.query,!1).then(({documents:_})=>p.view.Ku(_,m)));const y=w&&w.targetChanges.get(p.targetId),v=p.view.applyChanges(m,f.isPrimaryClient,y);return vS(f,p.targetId,v.zu),v.snapshot}(t,c,h,d);const i=await Tm(t.localStore,e,!0),s=new pB(e,i.ji),o=s.Ku(i.documents),a=Cf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),l=s.applyChanges(o,t.isPrimaryClient,a);vS(t,n,l.zu);const u=new Mwe(e,n,s);return t.tc.set(e,u),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),l.snapshot}async function jwe(t,e){const n=F(t),r=n.tc.get(e),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter(s=>!bf(s,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Au(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Rd(n.remoteStore,r.targetId),xu(n,r.targetId)}).catch(wo)):(xu(n,r.targetId),await Au(n.localStore,r.targetId,!0))}async function Vwe(t,e,n){const r=F1(t);try{const i=await function(s,o){const a=F(s),l=Ue.now(),u=o.reduce((d,f)=>d.add(f.key),te());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=Pn(),p=te();return a.Ui.getEntries(d,u).next(g=>{f=g,f.forEach((w,m)=>{m.isValidDocument()||(p=p.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(g=>{c=g;const w=[];for(const m of o){const y=Xve(m,c.get(m.key).overlayedDocument);y!=null&&w.push(new us(m.key,y,iV(y.value.mapValue),ze.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,w,o)}).next(g=>{h=g;const w=g.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(d,g.batchId,w)})}).then(()=>({batchId:h.batchId,changes:SV(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.oc[s.currentUser.toKey()];l||(l=new Xe(ee)),l=l.insert(o,a),s.oc[s.currentUser.toKey()]=l}(r,i.batchId,n),await cs(r,i.changes),await lc(r.remoteStore)}catch(i){const s=cc(i,"Failed to persist write");n.reject(s)}}async function gB(t,e){const n=F(t);try{const r=await lwe(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ic.get(s);o&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Xu=!0:i.modifiedDocuments.size>0?Y(o.Xu):i.removedDocuments.size>0&&(Y(o.Xu),o.Xu=!1))}),await cs(n,r,e)}catch(r){await wo(r)}}function XN(t,e,n){const r=F(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=F(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.Eu(o)&&(l=!0)}),l&&x1(a)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Bwe(t,e,n){const r=F(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ic.get(e),s=i&&i.key;if(s){let o=new Xe(M.comparator);o=o.insert(s,Ie.newNoDocument(s,Q.min()));const a=te().add(s),l=new If(Q.min(),new Map,new Ee(ee),o,a);await gB(r,l),r.sc=r.sc.remove(s),r.ic.delete(e),$1(r)}else await Au(r.localStore,e,!1).then(()=>xu(r,e,n)).catch(wo)}async function zwe(t,e){const n=F(t),r=e.batch.batchId;try{const i=await awe(n.localStore,e);D1(n,r,null),O1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cs(n,i)}catch(i){await wo(i)}}async function qwe(t,e,n){const r=F(t);try{const i=await function(s,o){const a=F(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(Y(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);D1(r,e,n),O1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cs(r,i)}catch(i){await wo(i)}}async function Wwe(t,e){const n=F(t);bo(n.remoteStore)||P("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=F(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.uc.get(r)||[];i.push(e),n.uc.set(r,i)}catch(r){const i=cc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function O1(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function D1(t,e,n){const r=F(t);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function xu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||mB(t,r)})}function mB(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);n!==null&&(Rd(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),$1(t))}function vS(t,e,n){for(const r of n)r instanceof dB?(t.rc.addReference(r.key,e),Hwe(t,r)):r instanceof fB?(P("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||mB(t,r.key)):V()}function Hwe(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(P("SyncEngine","New document in limbo: "+n),t.nc.add(r),$1(t))}function $1(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new M(ce.fromString(e)),r=t.cc.next();t.ic.set(r,new Fwe(n)),t.sc=t.sc.insert(n,r),Uv(t.remoteStore,new Bs(Un(ic(n.path)),r,2,Nn.ot))}}async function cs(t,e,n){const r=F(t),i=[],s=[],o=[];r.tc.isEmpty()||(r.tc.forEach((a,l)=>{o.push(r.hc(l,e,n).then(u=>{if(u){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u.fromCache?"not-current":"current"),i.push(u);const c=E1.Vi(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.Zu.Go(i),await async function(a,l){const u=F(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>S.forEach(l,h=>S.forEach(h.Pi,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>S.forEach(h.vi,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!Eo(c))throw c;P("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.$i.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);u.$i=u.$i.insert(h,p)}}}(r.localStore,s))}async function Kwe(t,e){const n=F(t);if(!n.currentUser.isEqual(e)){P("SyncEngine","User change. New user:",e.toKey());const r=await XV(n.localStore,e);n.currentUser=e,function(i,s){i.uc.forEach(o=>{o.forEach(a=>{a.reject(new x(b.CANCELLED,s))})}),i.uc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cs(n,r.Ki)}}function Gwe(t,e){const n=F(t),r=n.ic.get(e);if(r&&r.Xu)return te().add(r.key);{let i=te();const s=n.ec.get(e);if(!s)return i;for(const o of s){const a=n.tc.get(o);i=i.unionWith(a.view.qu)}return i}}async function Qwe(t,e){const n=F(t),r=await Tm(n.localStore,e.query,!0),i=e.view.Ju(r);return n.isPrimaryClient&&vS(n,e.targetId,i.zu),i}async function Ywe(t,e){const n=F(t);return tB(n.localStore,e).then(r=>cs(n,r))}async function Xwe(t,e,n,r){const i=F(t),s=await function(o,a){const l=F(o),u=F(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",c=>u.yn(c,a).next(h=>h?l.localDocuments.getDocuments(c,h):S.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await lc(i.remoteStore):n==="acknowledged"||n==="rejected"?(D1(i,e,r||null),O1(i,e),function(o,a){F(F(o).mutationQueue).In(a)}(i.localStore,e)):V(),await cs(i,s)):P("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Jwe(t,e){const n=F(t);if(M1(n),F1(n),e===!0&&n.ac!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await JN(n,r.toArray());n.ac=!0,await yS(n.remoteStore,!0);for(const s of i)Uv(n.remoteStore,s)}else if(e===!1&&n.ac!==!1){const r=[];let i=Promise.resolve();n.ec.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(xu(n,o),Au(n.localStore,o,!0))),Rd(n.remoteStore,o)}),await i,await JN(n,r),function(s){const o=F(s);o.ic.forEach((a,l)=>{Rd(o.remoteStore,l)}),o.rc.cs(),o.ic=new Map,o.sc=new Xe(M.comparator)}(n),n.ac=!1,await yS(n.remoteStore,!1)}}async function JN(t,e,n){const r=F(t),i=[],s=[];for(const o of e){let a;const l=r.ec.get(o);if(l&&l.length!==0){a=await ku(r.localStore,Un(l[0]));for(const u of l){const c=r.tc.get(u),h=await Qwe(r,c);h.snapshot&&s.push(h.snapshot)}}else{const u=await eB(r.localStore,o);a=await ku(r.localStore,u),await P1(r,yB(u),o,!1)}i.push(a)}return r.Zu.Go(s),i}function yB(t){return oV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Zwe(t){const e=F(t);return F(F(e.localStore).persistence).Ri()}async function e0e(t,e,n,r){const i=F(t);if(i.ac)return void P("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await tB(i.localStore,lV(s[0])),a=If.createSynthesizedRemoteEventForCurrentChange(e,n==="current");await cs(i,o,a);break}case"rejected":await Au(i.localStore,e,!0),xu(i,e,r);break;default:V()}}async function t0e(t,e,n){const r=M1(t);if(r.ac){for(const i of e){if(r.ec.has(i)){P("SyncEngine","Adding an already active target "+i);continue}const s=await eB(r.localStore,i),o=await ku(r.localStore,s);await P1(r,yB(s),o.targetId,!1),Uv(r.remoteStore,o)}for(const i of n)r.ec.has(i)&&await Au(r.localStore,i,!1).then(()=>{Rd(r.remoteStore,i),xu(r,i)}).catch(wo)}}function M1(t){const e=F(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gwe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bwe.bind(null,e),e.Zu.Go=Pwe.bind(null,e.eventManager),e.Zu.lc=Owe.bind(null,e.eventManager),e}function F1(t){const e=F(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zwe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qwe.bind(null,e),e}function n0e(t,e,n){const r=F(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(h,d){const f=F(h),p=Ct(d.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",g=>f.Ds.getBundleMetadata(g,d.id)).then(g=>!!g&&g.createTime.compareTo(p)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(hB(a));const l=new $we(a,i.localStore,s.wt);let u=await s.fc();for(;u;){const h=await l.Nu(u);h&&o._updateProgress(h),u=await s.fc()}const c=await l.complete();return await cs(i,c.Ou,void 0),await function(h,d){const f=F(h);return f.persistence.runTransaction("Save bundle","readwrite",p=>f.Ds.saveBundleMetadata(p,d))}(i.localStore,a),o._completeWith(c.progress),Promise.resolve(c.Mu)}catch(a){return Su("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class vB{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=kf(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,n){return null}gc(e,n){return null}wc(e){return YV(this.persistence,new QV,e.initialUser,this.wt)}_c(e){return new GV(Lv.Os,this.wt)}dc(e){return new rB}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _B extends vB{constructor(e,n,r){super(),this.yc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.yc.initialize(this,e),await F1(this.yc.syncEngine),await lc(this.yc.remoteStore),await this.persistence.ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wc(e){return YV(this.persistence,new QV,e.initialUser,this.wt)}mc(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new H_e(r,e.asyncQueue,n)}gc(e,n){const r=new Rve(n,this.persistence);return new Ave(e.asyncQueue,r)}_c(e){const n=w1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new _1(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,iB(),Gp(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new rB}}class r0e extends _B{constructor(e,n){super(e,n,!1),this.yc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.yc.syncEngine;this.sharedClientState instanceof Cw&&(this.sharedClientState.syncEngine={kr:Xwe.bind(null,n),Mr:e0e.bind(null,n),Or:t0e.bind(null,n),Ri:Zwe.bind(null,n),Nr:Ywe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.ci(async r=>{await Jwe(this.yc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}dc(e){const n=iB();if(!Cw.V(n))throw new x(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=w1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Cw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class L1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kwe.bind(null,this.syncEngine),await yS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Nwe}createDatastore(e){const n=kf(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new gwe(i));var i;return function(s,o,a,l){return new vwe(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>XN(this.syncEngine,a,0),o=KN.V()?new KN:new dwe,new wwe(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new Lwe(r,i,s,o,a,l);return u&&(c.ac=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=F(e);P("RemoteStore","RemoteStore shutting down."),n.lu.add(5),await ac(n),n.du.shutdown(),n._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):tt("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0e{constructor(e,n){this.Ec=e,this.wt=n,this.metadata=new It,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}async getMetadata(){return this.metadata.promise}async fc(){return await this.getMetadata(),this.Rc()}async Rc(){const e=await this.bc();if(e===null)return null;const n=this.Ac.decode(e),r=Number(n);isNaN(r)&&this.Pc(`length string (${n}) is not valid number`);const i=await this.vc(r);return new Dwe(JSON.parse(i),e.length+r)}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async bc(){for(;this.Vc()<0&&!await this.Sc(););if(this.buffer.length===0)return null;const e=this.Vc();e<0&&this.Pc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async vc(e){for(;this.buffer.length<e;)await this.Sc()&&this.Pc("Reached the end of bundle when more is expected.");const n=this.Ac.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}async Sc(){const e=await this.Ec.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0e{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new x(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=F(r),o=kd(s.wt)+"/documents",a={documents:i.map(h=>Cd(s.wt,h))},l=await s.ao("BatchGetDocuments",o,a,i.length),u=new Map;l.forEach(h=>{const d=l_e(s.wt,h);u.set(d.key.toString(),d)});const c=[];return i.forEach(h=>{const d=u.get(h.toString());Y(!!d),c.push(d)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new oc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=M.fromPath(r);this.mutations.push(new h1(i,this.precondition(i)))}),await async function(n,r){const i=F(n),s=kd(i.wt)+"/documents",o={writes:r.map(a=>Ad(i.wt,a))};await i.ro("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw V();n=Q.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new x(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?ze.updateTime(n):ze.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Q.min()))throw new x(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(n)}return ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0e{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new b1(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){this.So.Io(async()=>{const e=new s0e(this.datastore),n=this.xc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Nc(i)}))}).catch(r=>{this.Nc(r)})})}xc(e){try{const n=this.updateFunction(e);return!Ef(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||!_V(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0e{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=Kj.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{P("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(P("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new It;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wB(t,e){t.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XV(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function EB(t,e){t.asyncQueue.verifyOperationInProgress();const n=await U1(t);P("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>GN(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>GN(e.remoteStore,s)),t.onlineComponents=e}async function U1(t){return t.offlineComponents||(P("FirestoreClient","Using default OfflineComponentProvider"),await wB(t,new vB)),t.offlineComponents}async function Vv(t){return t.onlineComponents||(P("FirestoreClient","Using default OnlineComponentProvider"),await EB(t,new L1)),t.onlineComponents}function SB(t){return U1(t).then(e=>e.persistence)}function j1(t){return U1(t).then(e=>e.localStore)}function bB(t){return Vv(t).then(e=>e.remoteStore)}function V1(t){return Vv(t).then(e=>e.syncEngine)}async function Nu(t){const e=await Vv(t),n=e.eventManager;return n.onListen=Uwe.bind(null,e.syncEngine),n.onUnlisten=jwe.bind(null,e.syncEngine),n}function l0e(t){return t.asyncQueue.enqueue(async()=>{const e=await SB(t),n=await bB(t);return e.setNetworkEnabled(!0),function(r){const i=F(r);return i.lu.delete(0),Af(i)}(n)})}function u0e(t){return t.asyncQueue.enqueue(async()=>{const e=await SB(t),n=await bB(t);return e.setNetworkEnabled(!1),async function(r){const i=F(r);i.lu.add(0),await ac(i),i._u.set("Offline")}(n)})}function c0e(t,e){const n=new It;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const u=F(a);return u.persistence.runTransaction("read document","readonly",c=>u.localDocuments.getDocument(c,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new x(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=cc(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await j1(t),e,n)),n.promise}function TB(t,e,n={}){const r=new It;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new jv({next:h=>{s.enqueueAndForget(()=>R1(i,c));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new x(b.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new x(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new N1(ic(o.path),u,{includeMetadataChanges:!0,Du:!0});return A1(i,c)}(await Nu(t),t.asyncQueue,e,n,r)),r.promise}function h0e(t,e){const n=new It;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await Tm(r,i,!0),a=new pB(i,o.ji),l=a.Ku(o.documents),u=a.applyChanges(l,!1);s.resolve(u.snapshot)}catch(o){const a=cc(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await j1(t),e,n)),n.promise}function IB(t,e,n={}){const r=new It;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new jv({next:h=>{s.enqueueAndForget(()=>R1(i,c)),h.fromCache&&a.source==="server"?l.reject(new x(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new N1(o,u,{includeMetadataChanges:!0,Du:!0});return A1(i,c)}(await Nu(t),t.asyncQueue,e,n,r)),r.promise}function d0e(t,e){const n=new jv(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){F(r).Tu.add(i),i.next()}(await Nu(t),n)),()=>{n.Tc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){F(r).Tu.delete(i)}(await Nu(t),n))}}function f0e(t,e,n){const r=new It;return t.asyncQueue.enqueueAndForget(async()=>{const i=await function(s){return Vv(s).then(o=>o.datastore)}(t);new o0e(t.asyncQueue,i,n,e,r).run()}),r.promise}function p0e(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(l,u){return new i0e(l,u)}(function(l,u){if(l instanceof Uint8Array)return ZN(l,u);if(l instanceof ArrayBuffer)return ZN(new Uint8Array(l),u);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,kf(e));t.asyncQueue.enqueueAndForget(async()=>{n0e(await V1(t),i,r)})}function g0e(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=F(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(await j1(t),e))}const eP=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e,n){if(!n)throw new x(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CB(t,e,n,r){if(e===!0&&r===!0)throw new x(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tP(t){if(!M.isDocumentKey(t))throw new x(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nP(t){if(M.isDocumentKey(t))throw new x(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":V()}function de(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new x(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bv(t);throw new x(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kB(t,e){if(e<=0)throw new x(b.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new x(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,CB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rP({}),this._settingsFrozen=!1,e instanceof es?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new x(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new es(i.options.projectId)}(e))}get app(){if(!this._app)throw new x(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new x(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rP(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new mve;switch(n.type){case"gapi":const r=n.client;return Y(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new wve(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new x(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=eP.get(e);n&&(P("ComponentProvider","Removing Datastore"),eP.delete(e),n.terminate())}(this),Promise.resolve()}}function m0e(t,e,n,r={}){var i;const s=(t=de(t,Rf))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Su("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=St.MOCK_USER;else{o=Qb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new x(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new St(l)}t._authCredentials=new yve(new Hj(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}}class an{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new an(this.firestore,e,this._query)}}class di extends an{constructor(e,n,r){super(e,n,ic(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new M(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function AB(t,e,...n){if(t=N(t),B1("collection","path",e),t instanceof Rf){const r=ce.fromString(e,...n);return nP(r),new di(t,null,r)}{if(!(t instanceof Pe||t instanceof di))throw new x(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return nP(r),new di(t.firestore,null,r)}}function y0e(t,e){if(t=de(t,Rf),B1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(b.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new an(t,null,function(n){return new ls(ce.emptyPath(),n)}(e))}function Am(t,e,...n){if(t=N(t),arguments.length===1&&(e=Kj.I()),B1("doc","path",e),t instanceof Rf){const r=ce.fromString(e,...n);return tP(r),new Pe(t,null,new M(r))}{if(!(t instanceof Pe||t instanceof di))throw new x(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return tP(r),new Pe(t.firestore,t instanceof di?t.converter:null,new M(r))}}function RB(t,e){return t=N(t),e=N(e),(t instanceof Pe||t instanceof di)&&(e instanceof Pe||e instanceof di)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function xB(t,e){return t=N(t),e=N(e),t instanceof an&&e instanceof an&&t.firestore===e.firestore&&bf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0e{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new b1(this,"async_queue_retry"),this.Kc=()=>{const n=Gp();n&&P("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=Gp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=Gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new It;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}async jc(){if(this.Oc.length!==0){try{await this.Oc[0](),this.Oc.shift(),this.So.reset()}catch(e){if(!Eo(e))throw e;P("AsyncQueue","Operation failed with retryable error: "+e)}this.Oc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const n=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{this.Bc=r,this.Lc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw tt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Lc=!1,r))));return this.Mc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const i=k1.createAndSchedule(this,e,n,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&V()}verifyOperationInProgress(){}async zc(){let e;do e=this.Mc,await e;while(e!==this.Mc)}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function _S(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class _0e{constructor(){this._progressObserver={},this._taskCompletionResolver=new It,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0e=-1;class Je extends Rf{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new v0e,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||NB(this),this._firestoreClient.terminate()}}function Mt(t){return t._firestoreClient||NB(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function NB(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new Pve(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new a0e(t._authCredentials,t._appCheckCredentials,t._queue,r)}function E0e(t,e){OB(t=de(t,Je));const n=Mt(t),r=t._freezeSettings(),i=new L1;return PB(n,i,new _B(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function S0e(t){OB(t=de(t,Je));const e=Mt(t),n=t._freezeSettings(),r=new L1;return PB(e,r,new r0e(r,n.cacheSizeBytes))}function PB(t,e,n){const r=new It;return t.asyncQueue.enqueue(async()=>{try{await wB(t,n),await EB(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===b.FAILED_PRECONDITION||o.code===b.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;Su("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function b0e(t){if(t._initialized&&!t._terminated)throw new x(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new It;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Fr.V())return Promise.resolve();const r=n+"main";await Fr.delete(r)}(w1(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function T0e(t){return function(e){const n=new It;return e.asyncQueue.enqueueAndForget(async()=>Wwe(await V1(e),n)),n.promise}(Mt(t=de(t,Je)))}function I0e(t){return l0e(Mt(t=de(t,Je)))}function C0e(t){return u0e(Mt(t=de(t,Je)))}function k0e(t,e){const n=Mt(t=de(t,Je)),r=new _0e;return p0e(n,t._databaseId,e,r),r}function A0e(t,e){return g0e(Mt(t=de(t,Je)),e).then(n=>n?new an(t,null,n.query):null)}function OB(t){if(t._initialized||t._terminated)throw new x(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new x(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(ft.fromBase64String(e))}catch(n){throw new x(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wi(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new x(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new x(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0e=/^__.*__$/;class x0e{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new sc(e,this.data,n,this.fieldTransforms)}}class DB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $B(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}class qv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new qv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Rm(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if($B(this.Zc)&&R0e.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class N0e{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||kf(e)}aa(e,n,r,i=!1){return new qv({Zc:e,methodName:n,ca:r,path:nt.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function ol(t){const e=t._freezeSettings(),n=kf(t._databaseId);return new N0e(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Wv(t,e,n,r,i,s={}){const o=t.aa(s.merge||s.mergeFields?2:0,e,n,i);H1("Data must be an object, but it was:",o,r);const a=LB(r,o);let l,u;if(s.merge)l=new Xn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=wS(e,h,n);if(!o.contains(d))throw new x(b.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);jB(c,d)||c.push(d)}l=new Xn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new x0e(new Vt(a),l,u)}class xf extends sl{_toFieldTransform(e){if(e.Zc!==2)throw e.Zc===1?e.oa(`${this._methodName}() can only appear at the top level of your update data`):e.oa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}function MB(t,e,n){return new qv({Zc:3,ca:e.settings.ca,methodName:t._methodName,na:n},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class z1 extends sl{_toFieldTransform(e){return new Tf(e.path,new Iu)}isEqual(e){return e instanceof z1}}class P0e extends sl{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=MB(this,e,!0),r=this.ha.map(s=>al(s,n)),i=new Oa(r);return new Tf(e.path,i)}isEqual(e){return this===e}}class O0e extends sl{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=MB(this,e,!0),r=this.ha.map(s=>al(s,n)),i=new Da(r);return new Tf(e.path,i)}isEqual(e){return this===e}}class D0e extends sl{constructor(e,n){super(e),this.la=n}_toFieldTransform(e){const n=new Cu(e.wt,dV(e.wt,this.la));return new Tf(e.path,n)}isEqual(e){return this===e}}function q1(t,e,n,r){const i=t.aa(1,e,n);H1("Data must be an object, but it was:",i,r);const s=[],o=Vt.empty();il(r,(l,u)=>{const c=K1(e,l,n);u=N(u);const h=i.ia(c);if(u instanceof xf)s.push(c);else{const d=al(u,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new Xn(s);return new DB(o,a,i.fieldTransforms)}function W1(t,e,n,r,i,s){const o=t.aa(1,e,n),a=[wS(e,r,n)],l=[i];if(s.length%2!=0)throw new x(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(wS(e,s[d])),l.push(s[d+1]);const u=[],c=Vt.empty();for(let d=a.length-1;d>=0;--d)if(!jB(u,a[d])){const f=a[d];let p=l[d];p=N(p);const g=o.ia(f);if(p instanceof xf)u.push(f);else{const w=al(p,g);w!=null&&(u.push(f),c.set(f,w))}}const h=new Xn(u);return new DB(c,h,o.fieldTransforms)}function FB(t,e,n,r=!1){return al(n,t.aa(r?4:3,e))}function al(t,e){if(UB(t=N(t)))return H1("Unsupported field value:",e,t),LB(t,e);if(t instanceof sl)return function(n,r){if(!$B(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=al(o,r.ra(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=N(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dV(r.wt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ue.fromDate(n);return{timestampValue:Id(r.wt,i)}}if(n instanceof Ue){const i=new Ue(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Id(r.wt,i)}}if(n instanceof zv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wi)return{bytesValue:CV(r.wt,n._byteString)};if(n instanceof Pe){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:d1(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${Bv(n)}`)}(t,e)}function LB(t,e){const n={};return eV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):il(t,(r,i)=>{const s=al(i,e.ea(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UB(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof zv||t instanceof wi||t instanceof Pe||t instanceof sl)}function H1(t,e,n){if(!UB(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Bv(n);throw r==="an object"?e.oa(t+" a custom object"):e.oa(t+" "+r)}}function wS(t,e,n){if((e=N(e))instanceof lo)return e._internalPath;if(typeof e=="string")return K1(t,e);throw Rm("Field path arguments must be of type string or ",t,!1,void 0,n)}const $0e=new RegExp("[~\\*/\\[\\]]");function K1(t,e,n){if(e.search($0e)>=0)throw Rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lo(...e.split("."))._internalPath}catch{throw Rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rm(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new x(b.INVALID_ARGUMENT,a+t+l)}function jB(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M0e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class M0e extends xd{data(){return super.data()}}function Hv(t,e){return typeof e=="string"?K1(t,e):e instanceof lo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ts extends xd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Eh extends ts{data(e={}){return super.data(e)}}class uo{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Eh(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Eh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ta(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Eh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ta(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:F0e(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function F0e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}function VB(t,e){return t instanceof ts&&e instanceof ts?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof uo&&e instanceof uo&&t._firestore===e._firestore&&xB(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new x(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nf{}function gs(t,...e){for(const n of e)t=n._apply(t);return t}class L0e extends Nf{constructor(e,n,r){super(),this.fa=e,this.da=n,this._a=r,this.type="where"}_apply(e){const n=ol(e.firestore),r=function(i,s,o,a,l,u,c){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new x(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){sP(c,u);const f=[];for(const p of c)f.push(iP(a,i,p));h={arrayValue:{values:f}}}else h=iP(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||sP(c,u),h=FB(o,s,c,u==="in"||u==="not-in");const d=Bt.create(l,u,h);return function(f,p){if(p.ht()){const w=l1(f);if(w!==null&&!w.isEqual(p.field))throw new x(b.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${w.toString()}' and '${p.field.toString()}'`);const m=a1(f);m!==null&&KB(f,p.field,m)}const g=function(w,m){for(const y of w.filters)if(m.indexOf(y.op)>=0)return y.op;return null}(f,function(w){switch(w){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(g!==null)throw g===p.op?new x(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`):new x(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${p.op.toString()}' filters with '${g.toString()}' filters.`)}(i,d),d}(e._query,"where",n,e.firestore._databaseId,this.fa,this.da,this._a);return new an(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new ls(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function U0e(t,e,n){const r=e,i=Hv("where",t);return new L0e(i,r,n)}class j0e extends Nf{constructor(e,n){super(),this.fa=e,this.wa=n,this.type="orderBy"}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new x(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new x(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Xl(i,s);return function(a,l){if(a1(a)===null){const u=l1(a);u!==null&&KB(a,u,l.field)}}(r,o),o}(e._query,this.fa,this.wa);return new an(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new ls(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function V0e(t,e="asc"){const n=e,r=Hv("orderBy",t);return new j0e(r,n)}class zB extends Nf{constructor(e,n,r){super(),this.type=e,this.ma=n,this.ga=r}_apply(e){return new an(e.firestore,e.converter,Em(e._query,this.ma,this.ga))}}function B0e(t){return kB("limit",t),new zB("limit",t,"F")}function z0e(t){return kB("limitToLast",t),new zB("limitToLast",t,"L")}class qB extends Nf{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=HB(e,this.type,this.ya,this.pa);return new an(e.firestore,e.converter,function(r,i){return new ls(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function q0e(...t){return new qB("startAt",t,!0)}function W0e(...t){return new qB("startAfter",t,!1)}class WB extends Nf{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=HB(e,this.type,this.ya,this.pa);return new an(e.firestore,e.converter,function(r,i){return new ls(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function H0e(...t){return new WB("endBefore",t,!1)}function K0e(...t){return new WB("endAt",t,!0)}function HB(t,e,n,r){if(n[0]=N(n[0]),n[0]instanceof xd)return function(i,s,o,a,l){if(!a)throw new x(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of Tu(i))if(c.field.isKeyField())u.push(Na(s,a.key));else{const h=a.data.field(c.field);if(o1(h))throw new x(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=c.field.canonicalString();throw new x(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}u.push(h)}return new oo(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ol(t.firestore);return function(s,o,a,l,u,c){const h=s.explicitOrderBy;if(u.length>h.length)throw new x(b.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let f=0;f<u.length;f++){const p=u[f];if(h[f].field.isKeyField()){if(typeof p!="string")throw new x(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!u1(s)&&p.indexOf("/")!==-1)throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const g=s.path.child(ce.fromString(p));if(!M.isDocumentKey(g))throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const w=new M(g);d.push(Na(o,w))}else{const g=FB(a,l,p);d.push(g)}}return new oo(d,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function iP(t,e,n){if(typeof(n=N(n))=="string"){if(n==="")throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u1(e)&&n.indexOf("/")!==-1)throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ce.fromString(n));if(!M.isDocumentKey(r))throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Na(t,new M(r))}if(n instanceof Pe)return Na(t,n._key);throw new x(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bv(n)}.`)}function sP(t,e){if(!Array.isArray(t)||t.length===0)throw new x(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new x(b.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function KB(t,e,n){if(!n.isEqual(e))throw new x(b.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0e={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{convertValue(e,n="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){const r={};return il(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new zv(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tV(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ed(e));default:return null}}convertTimestamp(e){const n=io(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ce.fromString(e);Y($V(r));const i=new es(r.get(1),r.get(3)),s=new M(r.popFirst(5));return i.isEqual(n)||tt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Q0e extends G1{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0e{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ol(e)}set(e,n,r){this._verifyNotCommitted();const i=bs(e,this._firestore),s=Kv(i.converter,n,r),o=Wv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ze.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=bs(e,this._firestore);let o;return o=typeof(n=N(n))=="string"||n instanceof lo?W1(this._dataReader,"WriteBatch.update",s._key,n,r,i):q1(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ze.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=bs(e,this._firestore);return this._mutations=this._mutations.concat(new oc(n._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bs(t,e){if((t=N(t)).firestore!==e)throw new x(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0e(t){t=de(t,Pe);const e=de(t.firestore,Je);return TB(Mt(e),t._key).then(n=>Q1(e,t,n))}class ll extends G1{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}function J0e(t){t=de(t,Pe);const e=de(t.firestore,Je),n=Mt(e),r=new ll(e);return c0e(n,t._key).then(i=>new ts(e,r,t._key,i,new ta(i!==null&&i.hasLocalMutations,!0),t.converter))}function Z0e(t){t=de(t,Pe);const e=de(t.firestore,Je);return TB(Mt(e),t._key,{source:"server"}).then(n=>Q1(e,t,n))}function eEe(t){t=de(t,an);const e=de(t.firestore,Je),n=Mt(e),r=new ll(e);return BB(t._query),IB(n,t._query).then(i=>new uo(e,r,t,i))}function tEe(t){t=de(t,an);const e=de(t.firestore,Je),n=Mt(e),r=new ll(e);return h0e(n,t._query).then(i=>new uo(e,r,t,i))}function nEe(t){t=de(t,an);const e=de(t.firestore,Je),n=Mt(e),r=new ll(e);return IB(n,t._query,{source:"server"}).then(i=>new uo(e,r,t,i))}function oP(t,e,n){t=de(t,Pe);const r=de(t.firestore,Je),i=Kv(t.converter,e,n);return Pf(r,[Wv(ol(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ze.none())])}function aP(t,e,n,...r){t=de(t,Pe);const i=de(t.firestore,Je),s=ol(i);let o;return o=typeof(e=N(e))=="string"||e instanceof lo?W1(s,"updateDoc",t._key,e,n,r):q1(s,"updateDoc",t._key,e),Pf(i,[o.toMutation(t._key,ze.exists(!0))])}function rEe(t){return Pf(de(t.firestore,Je),[new oc(t._key,ze.none())])}function iEe(t,e){const n=de(t.firestore,Je),r=Am(t),i=Kv(t.converter,e);return Pf(n,[Wv(ol(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ze.exists(!1))]).then(()=>r)}function GB(t,...e){var n,r,i;t=N(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||_S(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(_S(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof Pe)u=de(t.firestore,Je),c=ic(t._key.path),l={next:h=>{e[o]&&e[o](Q1(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=de(t,an);u=de(h.firestore,Je),c=h._query;const d=new ll(u);l={next:f=>{e[o]&&e[o](new uo(u,d,h,f))},error:e[o+1],complete:e[o+2]},BB(t._query)}return function(h,d,f,p){const g=new jv(p),w=new N1(d,g,f);return h.asyncQueue.enqueueAndForget(async()=>A1(await Nu(h),w)),()=>{g.Tc(),h.asyncQueue.enqueueAndForget(async()=>R1(await Nu(h),w))}}(Mt(u),c,a,l)}function sEe(t,e){return d0e(Mt(t=de(t,Je)),_S(e)?e:{next:e})}function Pf(t,e){return function(n,r){const i=new It;return n.asyncQueue.enqueueAndForget(async()=>Vwe(await V1(n),r,i)),i.promise}(Mt(t),e)}function Q1(t,e,n){const r=n.docs.get(e._key),i=new ll(t);return new ts(t,i,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oEe extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ol(e)}get(e){const n=bs(e,this._firestore),r=new Q0e(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return V();const s=i[0];if(s.isFoundDocument())return new xd(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new xd(this._firestore,r,n._key,null,n.converter);throw V()})}set(e,n,r){const i=bs(e,this._firestore),s=Kv(i.converter,n,r),o=Wv(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=bs(e,this._firestore);let o;return o=typeof(n=N(n))=="string"||n instanceof lo?W1(this._dataReader,"Transaction.update",s._key,n,r,i):q1(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=bs(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=bs(e,this._firestore),r=new ll(this._firestore);return super.get(e).then(i=>new ts(this._firestore,r,n._key,i._document,new ta(!1,!1),n.converter))}}function aEe(t,e,n){t=de(t,Je);const r=Object.assign(Object.assign({},G0e),n);return function(i){if(i.maxAttempts<1)throw new x(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),f0e(Mt(t),i=>e(new oEe(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lEe(){return new xf("deleteField")}function uEe(){return new z1("serverTimestamp")}function cEe(...t){return new P0e("arrayUnion",t)}function hEe(...t){return new O0e("arrayRemove",t)}function dEe(t){return new D0e("increment",t)}(function(t,e=!0){(function(n){rc=n})(bi),Ye(new fe("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new Je(i,new vve(n.getProvider("auth-internal")),new Sve(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),we(iN,"3.4.14",t),we(iN,"3.4.14","esm2017")})();const fEe="@firebase/firestore-compat",pEe="0.1.23";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new x("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(){if(typeof Uint8Array>"u")throw new x("unimplemented","Uint8Arrays are not available in this environment.")}function uP(){if(!xve())throw new x("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Nd{constructor(e){this._delegate=e}static fromBase64String(e){return uP(),new Nd(wi.fromBase64String(e))}static fromUint8Array(e){return lP(),new Nd(wi.fromUint8Array(e))}toBase64(){return uP(),this._delegate.toBase64()}toUint8Array(){return lP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){return gEe(t,["next","error","complete"])}function gEe(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mEe{enableIndexedDbPersistence(e,n){return E0e(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return S0e(e._delegate)}clearIndexedDbPersistence(e){return b0e(e._delegate)}}class QB{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof es||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Su("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){m0e(this._delegate,e,n,r)}enableNetwork(){return I0e(this._delegate)}disableNetwork(){return C0e(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CB("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return T0e(this._delegate)}onSnapshotsInSync(e){return sEe(this._delegate,e)}get app(){if(!this._appCompat)throw new x("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pu(this,AB(this._delegate,e))}catch(n){throw hn(n,"collection()","Firestore.collection()")}}doc(e){try{return new yr(this,Am(this._delegate,e))}catch(n){throw hn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new cn(this,y0e(this._delegate,e))}catch(n){throw hn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return aEe(this._delegate,n=>e(new YB(this,n)))}batch(){return Mt(this._delegate),new XB(new Y0e(this._delegate,e=>Pf(this._delegate,e)))}loadBundle(e){return k0e(this._delegate,e)}namedQuery(e){return A0e(this._delegate,e).then(n=>n?new cn(this,n):null)}}class Gv extends G1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nd(new wi(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return yr.forKey(n,this.firestore,null)}}function yEe(t){pve(t)}class YB{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Gv(e)}get(e){const n=na(e);return this._delegate.get(n).then(r=>new Pd(this._firestore,new ts(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=na(e);return r?(Y1("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=na(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=na(e);return this._delegate.delete(n),this}}class XB{constructor(e){this._delegate=e}set(e,n,r){const i=na(e);return r?(Y1("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=na(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=na(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class La{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Eh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Od(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=La.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new La(e,new Gv(e),n),i.set(n,s)),s}}La.INSTANCES=new WeakMap;class yr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Gv(e)}static forPath(e,n,r){if(e.length%2!==0)throw new x("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new yr(n,new Pe(n._delegate,r,new M(e)))}static forKey(e,n,r){return new yr(n,new Pe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Pu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pu(this.firestore,AB(this._delegate,e))}catch(n){throw hn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=N(e),e instanceof Pe?RB(this._delegate,e):!1}set(e,n){n=Y1("DocumentReference.set",n);try{return n?oP(this._delegate,e,n):oP(this._delegate,e)}catch(r){throw hn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?aP(this._delegate,e):aP(this._delegate,e,n,...r)}catch(i){throw hn(i,"updateDoc()","DocumentReference.update()")}}delete(){return rEe(this._delegate)}onSnapshot(...e){const n=JB(e),r=ZB(e,i=>new Pd(this.firestore,new ts(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return GB(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=J0e(this._delegate):(e==null?void 0:e.source)==="server"?n=Z0e(this._delegate):n=X0e(this._delegate),n.then(r=>new Pd(this.firestore,new ts(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new yr(this.firestore,e?this._delegate.withConverter(La.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function hn(t,e,n){return t.message=t.message.replace(e,n),t}function JB(t){for(const e of t)if(typeof e=="object"&&!ES(e))return e;return{}}function ZB(t,e){var n,r;let i;return ES(t[0])?i=t[0]:ES(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Pd{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new yr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return VB(this._delegate,e._delegate)}}class Od extends Pd{data(e){const n=this._delegate.data(e);return gve(n!==void 0),n}}class cn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Gv(e)}where(e,n,r){try{return new cn(this.firestore,gs(this._delegate,U0e(e,n,r)))}catch(i){throw hn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new cn(this.firestore,gs(this._delegate,V0e(e,n)))}catch(r){throw hn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new cn(this.firestore,gs(this._delegate,B0e(e)))}catch(n){throw hn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new cn(this.firestore,gs(this._delegate,z0e(e)))}catch(n){throw hn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new cn(this.firestore,gs(this._delegate,q0e(...e)))}catch(n){throw hn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new cn(this.firestore,gs(this._delegate,W0e(...e)))}catch(n){throw hn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new cn(this.firestore,gs(this._delegate,H0e(...e)))}catch(n){throw hn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new cn(this.firestore,gs(this._delegate,K0e(...e)))}catch(n){throw hn(n,"endAt()","Query.endAt()")}}isEqual(e){return xB(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=tEe(this._delegate):(e==null?void 0:e.source)==="server"?n=nEe(this._delegate):n=eEe(this._delegate),n.then(r=>new SS(this.firestore,new uo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=JB(e),r=ZB(e,i=>new SS(this.firestore,new uo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return GB(this._delegate,n,r)}withConverter(e){return new cn(this.firestore,e?this._delegate.withConverter(La.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class vEe{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Od(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class SS{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new cn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Od(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new vEe(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Od(this._firestore,r))})}isEqual(e){return VB(this._delegate,e._delegate)}}class Pu extends cn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yr(this.firestore,e):null}doc(e){try{return e===void 0?new yr(this.firestore,Am(this._delegate)):new yr(this.firestore,Am(this._delegate,e))}catch(n){throw hn(n,"doc()","CollectionReference.doc()")}}add(e){return iEe(this._delegate,e).then(n=>new yr(this.firestore,n))}isEqual(e){return RB(this._delegate,e._delegate)}withConverter(e){return new Pu(this.firestore,e?this._delegate.withConverter(La.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function na(t){return de(t,Pe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(...e){this._delegate=new lo(...e)}static documentId(){return new X1(nt.keyField().canonicalString())}isEqual(e){return e=N(e),e instanceof lo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this._delegate=e}static serverTimestamp(){const e=uEe();return e._methodName="FieldValue.serverTimestamp",new qo(e)}static delete(){const e=lEe();return e._methodName="FieldValue.delete",new qo(e)}static arrayUnion(...e){const n=cEe(...e);return n._methodName="FieldValue.arrayUnion",new qo(n)}static arrayRemove(...e){const n=hEe(...e);return n._methodName="FieldValue.arrayRemove",new qo(n)}static increment(e){const n=dEe(e);return n._methodName="FieldValue.increment",new qo(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ee={Firestore:QB,GeoPoint:zv,Timestamp:Ue,Blob:Nd,Transaction:YB,WriteBatch:XB,DocumentReference:yr,DocumentSnapshot:Pd,Query:cn,QueryDocumentSnapshot:Od,QuerySnapshot:SS,CollectionReference:Pu,FieldPath:X1,FieldValue:qo,setLogLevel:yEe,CACHE_SIZE_UNLIMITED:w0e};function wEe(t,e){t.INTERNAL.registerComponent(new fe("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_Ee)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EEe(t){wEe(t,(e,n)=>new QB(e,n,new mEe)),t.registerVersion(fEe,pEe)}EEe(rt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SEe="type.googleapis.com/google.protobuf.Int64Value",bEe="type.googleapis.com/google.protobuf.UInt64Value";function e3(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function bS(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>bS(e));if(typeof t=="function"||typeof t=="object")return e3(t,e=>bS(e));throw new Error("Data cannot be encoded in JSON: "+t)}function xm(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case SEe:case bEe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>xm(e)):typeof t=="function"||typeof t=="object"?e3(t,e=>xm(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zl extends We{constructor(e,n,r){super(`${t3}/${e}`,n||""),this.details=r}}function TEe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function IEe(t,e){let n=TEe(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!cP[o])return new Zl("internal","internal");n=cP[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=xm(i))}}catch{}return n==="ok"?null:new Zl(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CEe{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(!!this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),n=await this.getMessagingToken(),r=await this.getAppCheckToken();return{authToken:e,messagingToken:n,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="us-central1";function kEe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Zl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class AEe{constructor(e,n,r,i,s=hP,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new CEe(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=hP}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function REe(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function xEe(t,e,n){return r=>OEe(t,e,r,n||{})}function NEe(t,e,n){return r=>n3(t,e,r,n||{})}async function PEe(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function OEe(t,e,n,r){const i=t._url(e);return n3(t,i,n,r)}async function n3(t,e,n,r){n=bS(n);const i={data:n},s={},o=await t.contextProvider.getContext();o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);const a=r.timeout||7e4,l=kEe(a),u=await Promise.race([PEe(e,i,s,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!u)throw new Zl("cancelled","Firebase Functions instance was deleted.");const c=IEe(u.status,u.json);if(c)throw c;if(!u.json)throw new Zl("internal","Response is not valid JSON object.");let h=u.json.data;if(typeof h>"u"&&(h=u.json.result),typeof h>"u")throw new Zl("internal","Response is missing data field.");return{data:xm(h)}}const dP="@firebase/functions",fP="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEe="auth-internal",$Ee="app-check-internal",MEe="messaging-internal";function FEe(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(DEe),a=r.getProvider(MEe),l=r.getProvider($Ee);return new AEe(s,o,a,l,i,t)};Ye(new fe(t3,n,"PUBLIC").setMultipleInstances(!0)),we(dP,fP,e),we(dP,fP,"esm2017")}function pP(t,e,n){REe(N(t),e,n)}function LEe(t,e,n){return xEe(N(t),e,n)}function UEe(t,e,n){return NEe(N(t),e,n)}FEe(fetch.bind(self));const jEe="@firebase/functions-compat",VEe="0.2.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.app=e,this._delegate=n,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,n){return LEe(this._delegate,e,n)}httpsCallableFromURL(e,n){return UEe(this._delegate,e,n)}useFunctionsEmulator(e){const n=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(n==null)throw new We("functions","No origin provided to useFunctionsEmulator()");if(n[2]==null)throw new We("functions","Port missing in origin provided to useFunctionsEmulator()");return pP(this._delegate,n[1],Number(n[2]))}useEmulator(e,n){return pP(this._delegate,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BEe="us-central1",zEe=(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("functions").getImmediate({identifier:e!=null?e:BEe});return new r3(n,r)};function qEe(){const t={Functions:r3};rt.INTERNAL.registerComponent(new fe("functions-compat",zEe,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qEe();rt.registerVersion(jEe,VEe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEe="/firebase-messaging-sw.js",HEe="/firebase-cloud-messaging-push-scope",i3="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",KEe="https://fcmregistrations.googleapis.com/v1",s3="google.c.a.c_id",GEe="google.c.a.c_l",QEe="google.c.a.ts",YEe="google.c.a.e";var gP;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(gP||(gP={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Dd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Dd||(Dd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function XEe(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="fcm_token_details_db",JEe=5,mP="fcm_token_object_Store";async function ZEe(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(kw))return null;let e=null;return(await Uu(kw,JEe,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(mP))return;const l=o.objectStore(mP),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Ri(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Ri(c.auth),p256dh:Ri(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Ri(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Ri(c.auth),p256dh:Ri(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Ri(c.vapidKey)}}}}}})).close(),await ql(kw),await ql("fcm_vapid_details_db"),await ql("undefined"),eSe(e)?e:null}function eSe(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tSe="firebase-messaging-database",nSe=1,Ua="firebase-messaging-store";let Aw=null;function J1(){return Aw||(Aw=Uu(tSe,nSe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ua)}}})),Aw}async function o3(t){const e=eC(t),r=await(await J1()).transaction(Ua).objectStore(Ua).get(e);if(r)return r;{const i=await ZEe(t.appConfig.senderId);if(i)return await Z1(t,i),i}}async function Z1(t,e){const n=eC(t),i=(await J1()).transaction(Ua,"readwrite");return await i.objectStore(Ua).put(e,n),await i.done,e}async function rSe(t){const e=eC(t),r=(await J1()).transaction(Ua,"readwrite");await r.objectStore(Ua).delete(e),await r.done}function eC({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iSe={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},wn=new bn("messaging","Messaging",iSe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sSe(t,e){var n;const r=await nC(t),i=l3(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=await(await fetch(tC(t.appConfig),s)).json()}catch(a){throw wn.create("token-subscribe-failed",{errorInfo:(n=a)===null||n===void 0?void 0:n.toString()})}if(o.error){const a=o.error.message;throw wn.create("token-subscribe-failed",{errorInfo:a})}if(!o.token)throw wn.create("token-subscribe-no-token");return o.token}async function oSe(t,e){var n;const r=await nC(t),i=l3(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${tC(t.appConfig)}/${e.token}`,s)).json()}catch(a){throw wn.create("token-update-failed",{errorInfo:(n=a)===null||n===void 0?void 0:n.toString()})}if(o.error){const a=o.error.message;throw wn.create("token-update-failed",{errorInfo:a})}if(!o.token)throw wn.create("token-update-no-token");return o.token}async function a3(t,e){var n;const r=await nC(t),i={method:"DELETE",headers:r};try{const o=await(await fetch(`${tC(t.appConfig)}/${e}`,i)).json();if(o.error){const a=o.error.message;throw wn.create("token-unsubscribe-failed",{errorInfo:a})}}catch(s){throw wn.create("token-unsubscribe-failed",{errorInfo:(n=s)===null||n===void 0?void 0:n.toString()})}}function tC({projectId:t}){return`${KEe}/projects/${t}/registrations`}async function nC({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function l3({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==i3&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aSe=7*24*60*60*1e3;async function lSe(t){const e=await cSe(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ri(e.getKey("auth")),p256dh:Ri(e.getKey("p256dh"))},r=await o3(t.firebaseDependencies);if(r){if(hSe(r.subscriptionOptions,n))return Date.now()>=r.createTime+aSe?uSe(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await a3(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return yP(t.firebaseDependencies,n)}else return yP(t.firebaseDependencies,n)}async function u3(t){const e=await o3(t.firebaseDependencies);e&&(await a3(t.firebaseDependencies,e.token),await rSe(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function uSe(t,e){try{const n=await oSe(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Z1(t.firebaseDependencies,r),n}catch(n){throw await u3(t),n}}async function yP(t,e){const r={token:await sSe(t,e),createTime:Date.now(),subscriptionOptions:e};return await Z1(t,r),r.token}async function cSe(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:XEe(e)})}function hSe(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return dSe(e,t),fSe(e,t),pSe(e,t),e}function dSe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}function fSe(t,e){!e.data||(t.data=e.data)}function pSe(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gSe(t){return typeof t=="object"&&!!t&&s3 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */c3("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");c3("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function c3(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mSe(t){if(!t||!t.options)throw Rw("App Configuration Object");if(!t.name)throw Rw("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Rw(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Rw(t){return wn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ySe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=mSe(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(t){var e;try{t.swRegistration=await navigator.serviceWorker.register(WEe,{scope:HEe}),t.swRegistration.update().catch(()=>{})}catch(n){throw wn.create("failed-service-worker-registration",{browserErrorMessage:(e=n)===null||e===void 0?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vSe(t,e){if(!e&&!t.swRegistration&&await h3(t),!(!e&&!!t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Se(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=i3)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(t,e){if(!navigator)throw wn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw wn.create("permission-blocked");return await _Se(t,e==null?void 0:e.vapidKey),await vSe(t,e==null?void 0:e.serviceWorkerRegistration),lSe(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wSe(t,e,n){const r=ESe(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[s3],message_name:n[GEe],message_time:n[QEe],message_device_time:Math.floor(Date.now()/1e3)})}function ESe(t){switch(t){case Dd.NOTIFICATION_CLICKED:return"notification_open";case Dd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SSe(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Dd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(vP(n)):t.onMessageHandler.next(vP(n)));const r=n.data;gSe(r)&&r[YEe]==="1"&&await wSe(t,n.messageType,r)}const _P="@firebase/messaging",wP="0.9.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bSe=t=>{const e=new ySe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>SSe(e,n)),e},TSe=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>d3(e,r)}};function ISe(){Ye(new fe("messaging",bSe,"PUBLIC")),Ye(new fe("messaging-internal",TSe,"PRIVATE")),we(_P,wP),we(_P,wP,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CSe(t){if(!navigator)throw wn.create("only-available-in-window");return t.swRegistration||await h3(t),u3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kSe(t,e){if(!navigator)throw wn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function ASe(t,e){return t=N(t),d3(t,e)}function RSe(t){return t=N(t),CSe(t)}function xSe(t,e){return t=N(t),kSe(t,e)}ISe();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",NSe="https://fcmregistrations.googleapis.com/v1",p3="FCM_MSG",PSe="google.c.a.c_id",OSe=3,DSe=1;var Nm;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Nm||(Nm={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Pm;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Pm||(Pm={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $Se(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="fcm_token_details_db",MSe=5,EP="fcm_token_object_Store";async function FSe(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(xw))return null;let e=null;return(await Uu(xw,MSe,{upgrade:async(r,i,s,o)=>{var a;if(i<2||!r.objectStoreNames.contains(EP))return;const l=o.objectStore(EP),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:xi(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:xi(c.auth),p256dh:xi(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:xi(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:xi(c.auth),p256dh:xi(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:xi(c.vapidKey)}}}}}})).close(),await ql(xw),await ql("fcm_vapid_details_db"),await ql("undefined"),LSe(e)?e:null}function LSe(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const USe="firebase-messaging-database",jSe=1,ja="firebase-messaging-store";let Nw=null;function rC(){return Nw||(Nw=Uu(USe,jSe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ja)}}})),Nw}async function iC(t){const e=oC(t),r=await(await rC()).transaction(ja).objectStore(ja).get(e);if(r)return r;{const i=await FSe(t.appConfig.senderId);if(i)return await sC(t,i),i}}async function sC(t,e){const n=oC(t),i=(await rC()).transaction(ja,"readwrite");return await i.objectStore(ja).put(e,n),await i.done,e}async function VSe(t){const e=oC(t),r=(await rC()).transaction(ja,"readwrite");await r.objectStore(ja).delete(e),await r.done}function oC({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BSe={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},fi=new bn("messaging","Messaging",BSe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zSe(t,e){var n;const r=await lC(t),i=m3(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=await(await fetch(aC(t.appConfig),s)).json()}catch(a){throw fi.create("token-subscribe-failed",{errorInfo:(n=a)===null||n===void 0?void 0:n.toString()})}if(o.error){const a=o.error.message;throw fi.create("token-subscribe-failed",{errorInfo:a})}if(!o.token)throw fi.create("token-subscribe-no-token");return o.token}async function qSe(t,e){var n;const r=await lC(t),i=m3(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=await(await fetch(`${aC(t.appConfig)}/${e.token}`,s)).json()}catch(a){throw fi.create("token-update-failed",{errorInfo:(n=a)===null||n===void 0?void 0:n.toString()})}if(o.error){const a=o.error.message;throw fi.create("token-update-failed",{errorInfo:a})}if(!o.token)throw fi.create("token-update-no-token");return o.token}async function g3(t,e){var n;const r=await lC(t),i={method:"DELETE",headers:r};try{const o=await(await fetch(`${aC(t.appConfig)}/${e}`,i)).json();if(o.error){const a=o.error.message;throw fi.create("token-unsubscribe-failed",{errorInfo:a})}}catch(s){throw fi.create("token-unsubscribe-failed",{errorInfo:(n=s)===null||n===void 0?void 0:n.toString()})}}function aC({projectId:t}){return`${NSe}/projects/${t}/registrations`}async function lC({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function m3({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==f3&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WSe=7*24*60*60*1e3;async function HSe(t){const e=await GSe(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:xi(e.getKey("auth")),p256dh:xi(e.getKey("p256dh"))},r=await iC(t.firebaseDependencies);if(r){if(QSe(r.subscriptionOptions,n))return Date.now()>=r.createTime+WSe?KSe(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await g3(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return SP(t.firebaseDependencies,n)}else return SP(t.firebaseDependencies,n)}async function TS(t){const e=await iC(t.firebaseDependencies);e&&(await g3(t.firebaseDependencies,e.token),await VSe(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function KSe(t,e){try{const n=await qSe(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await sC(t.firebaseDependencies,r),n}catch(n){throw await TS(t),n}}async function SP(t,e){const r={token:await zSe(t,e),createTime:Date.now(),subscriptionOptions:e};return await sC(t,r),r.token}async function GSe(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$Se(e)})}function QSe(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YSe(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return XSe(e,t),JSe(e,t),ZSe(e,t),e}function XSe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}function JSe(t,e){!e.data||(t.data=e.data)}function ZSe(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ebe(t){return typeof t=="object"&&!!t&&PSe in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tbe(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */y3("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");y3("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");async function nbe(t,e){const n=rbe(e,await t.firebaseDependencies.installations.getId());ibe(t,n)}function rbe(t,e){var n,r;const i={};return t.from&&(i.project_number=t.from),t.fcmMessageId&&(i.message_id=t.fcmMessageId),i.instance_id=e,t.notification?i.message_type=Nm.DISPLAY_NOTIFICATION.toString():i.message_type=Nm.DATA_MESSAGE.toString(),i.sdk_platform=OSe.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(i.collapse_key=t.collapse_key),i.event=DSe.toString(),!((n=t.fcmOptions)===null||n===void 0)&&n.analytics_label&&(i.analytics_label=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function ibe(t,e){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(e),t.logEvents.push(n)}function y3(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sbe(t,e){var n,r;const{newSubscription:i}=t;if(!i){await TS(e);return}const s=await iC(e.firebaseDependencies);await TS(e),e.vapidKey=(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:f3,await HSe(e)}async function obe(t,e){const n=ube(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await nbe(e,n);const r=await v3();if(hbe(r))return dbe(r,n);if(n.notification&&await fbe(lbe(n)),!!e&&e.onBackgroundMessageHandler){const i=YSe(n);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function abe(t){var e,n;const r=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[p3];if(r){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const i=pbe(r);if(!i)return;const s=new URL(i,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await cbe(s);if(a?a=await a.focus():(a=await self.clients.openWindow(i),await tbe(3e3)),!!a)return r.messageType=Pm.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)}function lbe(t){const e=Object.assign({},t.notification);return e.data={[p3]:t},e}function ube({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function cbe(t){const e=await v3();for(const n of e){const r=new URL(n.url,self.location.href);if(t.host===r.host)return n}return null}function hbe(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function dbe(t,e){e.isFirebaseMessaging=!0,e.messageType=Pm.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function v3(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function fbe(t){var e;const{actions:n}=t,{maxActions:r}=Notification;return n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function pbe(t){var e,n,r;const i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||(ebe(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gbe(t){if(!t||!t.options)throw Pw("App Configuration Object");if(!t.name)throw Pw("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Pw(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Pw(t){return fi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mbe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=gbe(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ybe=t=>{const e=new mbe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(obe(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(sbe(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(abe(n))}),e};function vbe(){Ye(new fe("messaging-sw",ybe,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _be(t,e){if(self.document!==void 0)throw fi.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function wbe(t,e){return t=N(t),_be(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vbe();const Ebe="@firebase/messaging-compat",Sbe="0.1.16";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bbe(){return self&&"ServiceWorkerGlobalScope"in self?Ibe():Tbe()}function Tbe(){return typeof window<"u"&&Ln()&&Ty()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Ibe(){return Ln()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class bP{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return ASe(this._delegate,e)}async deleteToken(){return RSe(this._delegate)}onMessage(e){return xSe(this._delegate,e)}onBackgroundMessage(e){return wbe(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cbe=t=>self&&"ServiceWorkerGlobalScope"in self?new bP(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new bP(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),kbe={isSupported:bbe};function Abe(){rt.INTERNAL.registerComponent(new fe("messaging-compat",Cbe,"PUBLIC").setServiceProps(kbe))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Abe();rt.registerVersion(Ebe,Sbe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3="firebasestorage.googleapis.com",w3="storageBucket",Rbe=2*60*1e3,xbe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends We{constructor(e,n){super(Ow(e),`Firebase Storage: ${n} (${Ow(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}_codeEquals(e){return Ow(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Ow(t){return"storage/"+t}function uC(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze("unknown",t)}function Nbe(t){return new Ze("object-not-found","Object '"+t+"' does not exist.")}function Pbe(t){return new Ze("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Obe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze("unauthenticated",t)}function Dbe(){return new Ze("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function $be(t){return new Ze("unauthorized","User does not have permission to access '"+t+"'.")}function Mbe(){return new Ze("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function E3(){return new Ze("canceled","User canceled the upload/download.")}function Fbe(t){return new Ze("invalid-url","Invalid URL '"+t+"'.")}function Lbe(t){return new Ze("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function Ube(){return new Ze("no-default-bucket","No default bucket found. Did you set the '"+w3+"' property when initializing the app?")}function S3(){return new Ze("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function jbe(){return new Ze("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Vbe(){return new Ze("no-download-url","The given file does not have any download URLs.")}function eu(t){return new Ze("invalid-argument",t)}function b3(){return new Ze("app-deleted","The Firebase app was deleted.")}function T3(t){return new Ze("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sh(t,e){return new Ze("invalid-format","String does not match format '"+t+"': "+e)}function Mc(t){throw new Ze("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=nn.makeFromUrl(e,n)}catch{return new nn(e,"")}if(r.path==="")return r;throw Lbe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(_){_.path_=decodeURIComponent(_.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},g=n===_3?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",m=new RegExp(`^https?://${g}/${i}/${w}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:m,indices:{bucket:1,path:2},postModify:u}];for(let _=0;_<v.length;_++){const E=v[_],T=E.regex.exec(e);if(T){const C=T[E.indices.bucket];let k=T[E.indices.path];k||(k=""),r=new nn(C,k),E.postModify(r);break}}if(r==null)throw Fbe(e);return r}}class Bbe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zbe(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...w){u||(u=!0,e.apply(null,w))}function h(w){i=setTimeout(()=>{i=null,t(f,l())},w)}function d(){s&&clearTimeout(s)}function f(w,...m){if(u){d();return}if(w){d(),c.call(null,w,...m);return}if(l()||o){d(),c.call(null,w,...m);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,h(v)}let p=!1;function g(w){p||(p=!0,d(),!u&&(i!==null?(w||(a=2),clearTimeout(i),h(0)):w||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function qbe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wbe(t){return t!==void 0}function Hbe(t){return typeof t=="function"}function Kbe(t){return typeof t=="object"&&!Array.isArray(t)}function Qv(t){return typeof t=="string"||t instanceof String}function TP(t){return cC()&&t instanceof Blob}function cC(){return typeof Blob<"u"}function IS(t,e,n,r){if(r<e)throw eu(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw eu(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function I3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ua;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ua||(ua={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gbe{constructor(e,n,r,i,s,o,a,l,u,c,h){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ua.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const c=s.getErrorCode()===ua.ABORT;r(!1,new vp(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new vp(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Wbe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=uC();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?b3():E3();o(l)}else{const l=Mbe();o(l)}};this.canceled_?n(!1,new vp(!1,null,!0)):this.backoffId_=zbe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qbe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=this.additionalRetryCodes_.indexOf(e)!==-1;return n||i||s}}class vp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Qbe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ybe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function Xbe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Jbe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Zbe(t,e,n,r,i,s){const o=I3(t.urlParams),a=t.url+o,l=Object.assign({},t.headers);return Xbe(l,e),Qbe(l,n),Ybe(l,s),Jbe(l,r),new Gbe(a,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eTe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tTe(...t){const e=eTe();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(cC())return new Blob(t);throw new Ze("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function nTe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rTe(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dw{constructor(e,n){this.data=e,this.contentType=n||null}}function C3(t,e){switch(t){case vr.RAW:return new Dw(k3(e));case vr.BASE64:case vr.BASE64URL:return new Dw(A3(t,e));case vr.DATA_URL:return new Dw(sTe(e),oTe(e))}throw uC()}function k3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function iTe(t){let e;try{e=decodeURIComponent(t)}catch{throw Sh(vr.DATA_URL,"Malformed data URL.")}return k3(e)}function A3(t,e){switch(t){case vr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Sh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case vr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Sh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=rTe(e)}catch{throw Sh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class R3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Sh(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=aTe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function sTe(t){const e=new R3(t);return e.base64?A3(vr.BASE64,e.rest):iTe(e.rest)}function oTe(t){return new R3(t).contentType}function aTe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){let r=0,i="";TP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(TP(this.data_)){const r=this.data_,i=nTe(r,e,n);return i===null?null:new Pi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Pi(r,!0)}}static getBlob(...e){if(cC()){const n=e.map(r=>r instanceof Pi?r.data_:r);return new Pi(tTe.apply(null,n))}else{const n=e.map(o=>Qv(o)?C3(vr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Pi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){let e;try{e=JSON.parse(t)}catch{return null}return Kbe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lTe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function uTe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function x3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cTe(t,e){return e}class ln{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||cTe}}let _p=null;function hTe(t){return!Qv(t)||t.length<2?t:x3(t)}function Yv(){if(_p)return _p;const t=[];t.push(new ln("bucket")),t.push(new ln("generation")),t.push(new ln("metageneration")),t.push(new ln("name","fullPath",!0));function e(s,o){return hTe(o)}const n=new ln("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ln("size");return i.xform=r,t.push(i),t.push(new ln("timeCreated")),t.push(new ln("updated")),t.push(new ln("md5Hash",null,!0)),t.push(new ln("cacheControl",null,!0)),t.push(new ln("contentDisposition",null,!0)),t.push(new ln("contentEncoding",null,!0)),t.push(new ln("contentLanguage",null,!0)),t.push(new ln("contentType",null,!0)),t.push(new ln("metadata","customMetadata",!0)),_p=t,_p}function dTe(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new nn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function fTe(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return dTe(r,t),r}function N3(t,e,n){const r=hC(e);return r===null?null:fTe(t,r,n)}function pTe(t,e,n,r){const i=hC(e);if(i===null||!Qv(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=To(d,n,r),p=I3({alt:"media",token:u});return f+p})[0]}function dC(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="prefixes",CP="items";function gTe(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[IP])for(const i of n[IP]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new nn(e,s));r.prefixes.push(o)}if(n[CP])for(const i of n[CP]){const s=t._makeStorageReference(new nn(e,i.name));r.items.push(s)}return r}function mTe(t,e,n){const r=hC(n);return r===null?null:gTe(t,e,r)}class hs{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t){if(!t)throw uC()}function Xv(t,e){function n(r,i){const s=N3(t,i,e);return pi(s!==null),s}return n}function yTe(t,e){function n(r,i){const s=mTe(t,e,i);return pi(s!==null),s}return n}function vTe(t,e){function n(r,i){const s=N3(t,i,e);return pi(s!==null),pTe(s,i,t.host,t._protocol)}return n}function hc(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Dbe():i=Obe():n.getStatus()===402?i=Pbe(t.bucket):n.getStatus()===403?i=$be(t.path):i=r,i.serverResponse=r.serverResponse,i}return e}function Jv(t){const e=hc(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Nbe(t.path)),s.serverResponse=i.serverResponse,s}return n}function P3(t,e,n){const r=e.fullServerUrl(),i=To(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new hs(i,s,Xv(t,n),o);return a.errorHandler=Jv(e),a}function _Te(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=To(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,c=new hs(a,l,yTe(t,e.bucket),u);return c.urlParams=s,c.errorHandler=hc(e),c}function wTe(t,e,n){const r=e.fullServerUrl(),i=To(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new hs(i,s,vTe(t,n),o);return a.errorHandler=Jv(e),a}function ETe(t,e,n,r){const i=e.fullServerUrl(),s=To(i,t.host,t._protocol),o="PATCH",a=dC(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,c=new hs(s,o,Xv(t,r),u);return c.headers=l,c.body=a,c.errorHandler=Jv(e),c}function STe(t,e){const n=e.fullServerUrl(),r=To(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new hs(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Jv(e),a}function bTe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function O3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=bTe(null,e)),r}function TTe(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let _=0;_<2;_++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=O3(e,r,i),c=dC(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=Pi.getBlob(h,r,d);if(f===null)throw S3();const p={name:u.fullPath},g=To(s,t.host,t._protocol),w="POST",m=t.maxUploadRetryTime,y=new hs(g,w,Xv(t,n),m);return y.urlParams=p,y.headers=o,y.body=f.uploadData(),y.errorHandler=hc(e),y}class Om{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function fC(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{pi(!1)}return pi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function ITe(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=O3(e,r,i),a={name:o.fullPath},l=To(s,t.host,t._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=dC(o,n),d=t.maxUploadRetryTime;function f(g){fC(g);let w;try{w=g.getResponseHeader("X-Goog-Upload-URL")}catch{pi(!1)}return pi(Qv(w)),w}const p=new hs(l,u,f,d);return p.urlParams=a,p.headers=c,p.body=h,p.errorHandler=hc(e),p}function CTe(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const c=fC(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{pi(!1)}h||pi(!1);const d=Number(h);return pi(!isNaN(d)),new Om(d,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,l=new hs(n,o,s,a);return l.headers=i,l.errorHandler=hc(e),l}const kP=256*1024;function kTe(t,e,n,r,i,s,o,a){const l=new Om(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw jbe();const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const h=l.current,d=h+c,p={"X-Goog-Upload-Command":c===u?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,d);if(g===null)throw S3();function w(_,E){const T=fC(_,["active","final"]),C=l.current+c,k=r.size();let z;return T==="final"?z=Xv(e,s)(_,E):z=null,new Om(C,k,T==="final",z)}const m="POST",y=e.maxUploadRetryTime,v=new hs(n,m,w,y);return v.headers=p,v.body=g.uploadData(),v.progressCallback=a||null,v.errorHandler=hc(t),v}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ATe={STATE_CHANGED:"state_changed"},dn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $w(t){switch(t){case"running":case"pausing":case"canceling":return dn.RUNNING;case"paused":return dn.PAUSED;case"success":return dn.SUCCESS;case"canceled":return dn.CANCELED;case"error":return dn.ERROR;default:return dn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RTe{constructor(e,n,r){if(Hbe(e)||n!=null||r!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=r!=null?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class xTe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ua.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ua.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ua.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Mc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class NTe extends xTe{initXhr(){this.xhr_.responseType="text"}}function ni(){return new NTe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Yv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=ITe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ni,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=CTe(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ni,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=kP*this._chunkMultiplier,n=new Om(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=kTe(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ni,i,s);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){kP*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=P3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ni,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=TTe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ni,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=E3(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=$w(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new RTe(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch($w(this._state)){case dn.SUCCESS:yl(this._resolve.bind(null,this.snapshot))();break;case dn.CANCELED:case dn.ERROR:const n=this._reject;yl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($w(this._state)){case dn.RUNNING:case dn.PAUSED:e.next&&yl(e.next.bind(e,this.snapshot))();break;case dn.SUCCESS:e.complete&&yl(e.complete.bind(e))();break;case dn.CANCELED:case dn.ERROR:e.error&&yl(e.error.bind(e,this._error))();break;default:e.error&&yl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this._service=e,n instanceof nn?this._location=n:this._location=nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Va(e,n)}get root(){const e=new nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return x3(this._location.path)}get storage(){return this._service}get parent(){const e=lTe(this._location.path);if(e===null)return null;const n=new nn(this._location.bucket,e);return new Va(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw T3(e)}}function PTe(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new D3(t,new Pi(e),n)}function OTe(t){const e={prefixes:[],items:[]};return $3(t,e).then(()=>e)}async function $3(t,e,n){const i=await M3(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await $3(t,e,i.nextPageToken)}function M3(t,e){e!=null&&typeof e.maxResults=="number"&&IS("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=_Te(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,ni)}function DTe(t){t._throwIfRoot("getMetadata");const e=P3(t.storage,t._location,Yv());return t.storage.makeRequestWithTokens(e,ni)}function $Te(t,e){t._throwIfRoot("updateMetadata");const n=ETe(t.storage,t._location,e,Yv());return t.storage.makeRequestWithTokens(n,ni)}function MTe(t){t._throwIfRoot("getDownloadURL");const e=wTe(t.storage,t._location,Yv());return t.storage.makeRequestWithTokens(e,ni).then(n=>{if(n===null)throw Vbe();return n})}function FTe(t){t._throwIfRoot("deleteObject");const e=STe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ni)}function F3(t,e){const n=uTe(t._location.path,e),r=new nn(t._location.bucket,n);return new Va(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LTe(t){return/^[A-Za-z]+:\/\//.test(t)}function UTe(t,e){return new Va(t,e)}function L3(t,e){if(t instanceof pC){const n=t;if(n._bucket==null)throw Ube();const r=new Va(n,n._bucket);return e!=null?L3(r,e):r}else return e!==void 0?F3(t,e):t}function jTe(t,e){if(e&&LTe(e)){if(t instanceof pC)return UTe(t,e);throw eu("To use ref(service, url), the first argument must be a Storage instance.")}else return L3(t,e)}function AP(t,e){const n=e==null?void 0:e[w3];return n==null?null:nn.makeFromBucketSpec(n,t)}function VTe(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Qb(i,t.app.options.projectId))}class pC{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=_3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Rbe,this._maxUploadRetryTime=xbe,this._requests=new Set,i!=null?this._bucket=nn.makeFromBucketSpec(i,this._host):this._bucket=AP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nn.makeFromBucketSpec(this._url,e):this._bucket=AP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Va(this,e)}_makeRequest(e,n,r,i){if(this._deleted)return new Bbe(b3());{const s=Zbe(e,this._appId,r,i,n,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const RP="@firebase/storage",xP="0.9.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BTe="storage";function zTe(t,e,n){return t=N(t),PTe(t,e,n)}function qTe(t){return t=N(t),DTe(t)}function WTe(t,e){return t=N(t),$Te(t,e)}function HTe(t,e){return t=N(t),M3(t,e)}function KTe(t){return t=N(t),OTe(t)}function GTe(t){return t=N(t),MTe(t)}function QTe(t){return t=N(t),FTe(t)}function NP(t,e){return t=N(t),jTe(t,e)}function YTe(t,e){return F3(t,e)}function XTe(t,e,n,r={}){VTe(t,e,n,r)}function JTe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new pC(n,r,i,e,bi)}function ZTe(){Ye(new fe(BTe,JTe,"PUBLIC").setMultipleInstances(!0)),we(RP,xP,""),we(RP,xP,"esm2017")}ZTe();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wp(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new wp(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new wp(o,this,this._ref)):s={next:n.next?o=>n.next(new wp(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class OP{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Wi(e,this._service))}get items(){return this._delegate.items.map(e=>new Wi(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=YTe(this._delegate,e);return new Wi(n,this.storage)}get root(){return new Wi(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Wi(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new PP(zTe(this._delegate,e,n),this)}putString(e,n=vr.RAW,r){this._throwIfRoot("putString");const i=C3(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new PP(new D3(this._delegate,new Pi(i.data,!0),s),this)}listAll(){return KTe(this._delegate).then(e=>new OP(e,this.storage))}list(e){return HTe(this._delegate,e||void 0).then(n=>new OP(n,this.storage))}getMetadata(){return qTe(this._delegate)}updateMetadata(e){return WTe(this._delegate,e)}getDownloadURL(){return GTe(this._delegate)}delete(){return this._throwIfRoot("delete"),QTe(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw T3(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(DP(e))throw eu("ref() expected a child path but got a URL, use refFromURL instead.");return new Wi(NP(this._delegate,e),this)}refFromURL(e){if(!DP(e))throw eu("refFromURL() expected a full URL but got a child path, use ref() instead.");try{nn.makeFromUrl(e,this._delegate.host)}catch{throw eu("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wi(NP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){XTe(this._delegate,e,n,r)}}function DP(t){return/^[A-Za-z]+:\/\//.test(t)}const eIe="@firebase/storage-compat",tIe="0.1.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nIe="storage-compat";function rIe(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new U3(n,r)}function iIe(t){const e={TaskState:dn,TaskEvent:ATe,StringFormat:vr,Storage:U3,Reference:Wi};t.INTERNAL.registerComponent(new fe(nIe,rIe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(eIe,tIe)}iIe(rt);const $P="@firebase/performance",CS="0.5.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=CS,sIe="FB-PERF-TRACE-START",oIe="FB-PERF-TRACE-STOP",kS="FB-PERF-TRACE-MEASURE",V3="_wt_",B3="_fp",z3="_fcp",q3="_fid",W3="@firebase/performance/config",H3="@firebase/performance/configexpire",aIe="performance",K3="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lIe={["trace started"]:"Trace {$traceName} was started before.",["trace stopped"]:"Trace {$traceName} is not running.",["nonpositive trace startTime"]:"Trace {$traceName} startTime should be positive.",["nonpositive trace duration"]:"Trace {$traceName} duration should be positive.",["no window"]:"Window is not available.",["no app id"]:"App id is not available.",["no project id"]:"Project id is not available.",["no api key"]:"Api key is not available.",["invalid cc log"]:"Attempted to queue invalid cc event",["FB not default"]:"Performance can only start when Firebase app instance is the default one.",["RC response not ok"]:"RC response is not ok",["invalid attribute name"]:"Attribute name {$attributeName} is invalid.",["invalid attribute value"]:"Attribute value {$attributeValue} is invalid.",["invalid custom metric name"]:"Custom metric name {$customMetricName} is invalid",["invalid String merger input"]:"Input for String merger is invalid, contact support team to resolve.",["already initialized"]:"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},en=new bn(aIe,K3,lIe);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Si(K3);Ei.logLevel=ne.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mw,G3;class kt{constructor(e){if(this.window=e,!e)throw en.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Ty()?(Ei.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Ln()?!0:(Ei.info("IndexedDB is not supported by current browswer"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(const s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return Mw===void 0&&(Mw=new kt(G3)),Mw}}function uIe(t){G3=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q3;function cIe(t){const e=t.getId();return e.then(n=>{Q3=n}),e}function gC(){return Q3}function hIe(t){const e=t.getToken();return e.then(n=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t,e){const n=t.length-e.length;if(n<0||n>1)throw en.create("invalid String merger input");const r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fw;class Kn{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=MP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=MP("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Fw===void 0&&(Fw=new Kn),Fw}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tu;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"})(tu||(tu={}));const dIe=["firebase_","google_","ga_"],fIe=new RegExp("^[a-zA-Z]\\w*$"),pIe=40,gIe=100;function mIe(){const t=kt.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Y3(){switch(kt.getInstance().document.visibilityState){case"visible":return tu.VISIBLE;case"hidden":return tu.HIDDEN;default:return tu.UNKNOWN}}function yIe(){const e=kt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function vIe(t){return t.length===0||t.length>pIe?!1:!dIe.some(n=>t.startsWith(n))&&!!t.match(fIe)}function _Ie(t){return t.length!==0&&t.length<=gIe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw en.create("no app id");return n}function wIe(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw en.create("no project id");return n}function EIe(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw en.create("no api key");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SIe="0.0.1",Rr={loggingEnabled:!0},bIe="FIREBASE_INSTALLATIONS_AUTH";function TIe(t,e){const n=IIe();return n?(FP(n),Promise.resolve()):AIe(t,e).then(FP).then(r=>CIe(r),()=>{})}function IIe(){const t=kt.getInstance().localStorage;if(!t)return;const e=t.getItem(H3);if(!e||!RIe(e))return;const n=t.getItem(W3);if(!!n)try{return JSON.parse(n)}catch{return}}function CIe(t){const e=kt.getInstance().localStorage;!t||!e||(e.setItem(W3,JSON.stringify(t)),e.setItem(H3,String(Date.now()+Kn.getInstance().configTimeToLive*60*60*1e3)))}const kIe="Could not fetch config, will use default configs";function AIe(t,e){return hIe(t.installations).then(n=>{const r=wIe(t.app),i=EIe(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${bIe} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:X3(t.app),app_version:j3,sdk_version:SIe})});return fetch(o).then(a=>{if(a.ok)return a.json();throw en.create("RC response not ok")})}).catch(()=>{Ei.info(kIe)})}function FP(t){if(!t)return t;const e=Kn.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=Rr.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):Rr.logSource&&(e.logSource=Rr.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:Rr.logEndPointUrl&&(e.logEndPointUrl=Rr.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:Rr.transportKey&&(e.transportKey=Rr.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):Rr.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=Rr.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):Rr.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=Rr.tracesSamplingRate),e.logTraceAfterSampling=LP(e.tracesSamplingRate),e.logNetworkAfterSampling=LP(e.networkRequestsSamplingRate),t}function RIe(t){return Number(t)>Date.now()}function LP(t){return Math.random()<=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mC=1,Lw;function J3(t){return mC=2,Lw=Lw||NIe(t),Lw}function xIe(){return mC===3}function NIe(t){return PIe().then(()=>cIe(t.installations)).then(e=>TIe(t,e)).then(()=>UP(),()=>UP())}function PIe(){const t=kt.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){const n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function UP(){mC=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=10*1e3,OIe=5.5*1e3,Z3=3,DIe=1e3;let Dm=Z3,zs=[],jP=!1;function $Ie(){jP||(Zv(OIe),jP=!0)}function Zv(t){setTimeout(()=>{if(Dm!==0){if(!zs.length)return Zv(yC);MIe()}},t)}function MIe(){const t=zs.splice(0,DIe),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Kn.getInstance().logSource,log_event:e};FIe(n,t).catch(()=>{zs=[...t,...zs],Dm--,Ei.info(`Tries left: ${Dm}.`),Zv(yC)})}function FIe(t,e){return LIe(t).then(n=>(n.ok||Ei.info("Call to Firebase backend failed."),n.json())).then(n=>{const r=Number(n.nextRequestWaitMillis);let i=yC;isNaN(r)||(i=Math.max(r,i));const s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(zs=[...e,...zs],Ei.info("Retry transport request later.")),Dm=Z3,Zv(i)})}function LIe(t){const e=Kn.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function UIe(t){if(!t.eventTime||!t.message)throw en.create("invalid cc log");zs=[...zs,t]}function jIe(t){return(...e)=>{const n=t(...e);UIe({message:n,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uw;function e4(t,e){Uw||(Uw=jIe(BIe)),Uw(t,e)}function Ep(t){const e=Kn.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||!kt.getInstance().requiredApisAvailable()||t.isAuto&&Y3()!==tu.VISIBLE||(xIe()?jw(t):J3(t.performanceController).then(()=>jw(t),()=>jw(t)))}function jw(t){if(!gC())return;const e=Kn.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>e4(t,1),0)}function VIe(t){const e=Kn.getInstance();if(!e.instrumentationEnabled)return;const n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>e4(t,0),0)}function BIe(t,e){return e===0?zIe(t):qIe(t)}function zIe(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:t4(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function qIe(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);const n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);const r={application_info:t4(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function t4(t){return{google_app_id:X3(t),app_instance_id:gC(),web_app_info:{sdk_version:j3,page_url:kt.getInstance().getUrl(),service_worker_status:mIe(),visibility_state:Y3(),effective_connection_type:yIe()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIe=100,HIe="_",KIe=[B3,z3,q3];function GIe(t,e){return t.length===0||t.length>WIe?!1:e&&e.startsWith(V3)&&KIe.indexOf(t)>-1||!t.startsWith(HIe)}function QIe(t){const e=Math.floor(t);return e<t&&Ei.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=kt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${sIe}-${this.randomId}-${this.name}`,this.traceStopMark=`${oIe}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${kS}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw en.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw en.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ep(this)}record(e,n,r){if(e<=0)throw en.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw en.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));Ep(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(GIe(e,this.name))this.counters[e]=QIe(n!=null?n:0);else throw en.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){const r=vIe(e),i=_Ie(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw en.create("invalid attribute name",{attributeName:e});if(!i)throw en.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i){const s=kt.getInstance().getUrl();if(!s)return;const o=new qs(e,V3+s,!0),a=Math.floor(kt.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));const l="first-paint",u="first-contentful-paint";if(r){const c=r.find(d=>d.name===l);c&&c.startTime&&o.putMetric(B3,Math.floor(c.startTime*1e3));const h=r.find(d=>d.name===u);h&&h.startTime&&o.putMetric(z3,Math.floor(h.startTime*1e3)),i&&o.putMetric(q3,Math.floor(i*1e3))}Ep(o)}static createUserTimingTrace(e,n){const r=new qs(e,n,!1,n);Ep(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t,e){const n=e;if(!n||n.responseStart===void 0)return;const r=kt.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],l={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};VIe(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YIe=5e3;function BP(t){!gC()||(setTimeout(()=>JIe(t),0),setTimeout(()=>XIe(t),0),setTimeout(()=>ZIe(t),0))}function XIe(t){const e=kt.getInstance(),n=e.getEntriesByType("resource");for(const r of n)VP(t,r);e.setupObserver("resource",r=>VP(t,r))}function JIe(t){const e=kt.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{qs.createOobTrace(t,n,r),i=void 0},YIe);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),qs.createOobTrace(t,n,r,s))})}else qs.createOobTrace(t,n,r)}function ZIe(t){const e=kt.getInstance(),n=e.getEntriesByType("measure");for(const r of n)zP(t,r);e.setupObserver("measure",r=>zP(t,r))}function zP(t,e){const n=e.name;n.substring(0,kS.length)!==kS&&qs.createUserTimingTrace(t,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1e{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),kt.getInstance().requiredApisAvailable()?qd().then(n=>{n&&($Ie(),J3(this).then(()=>BP(this),()=>BP(this)),this.initialized=!0)}).catch(n=>{Ei.info(`Environment doesn't support IndexedDB: ${n}`)}):Ei.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Kn.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Kn.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Kn.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Kn.getInstance().dataCollectionEnabled}}const t1e="[DEFAULT]";function n1e(t,e){return t=N(t),new qs(t,e)}const r1e=(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==t1e)throw en.create("FB not default");if(typeof window>"u")throw en.create("no window");uIe(window);const i=new e1e(n,r);return i._init(e),i};function i1e(){Ye(new fe("performance",r1e,"PUBLIC")),we($P,CS),we($P,CS,"esm2017")}i1e();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1e{constructor(e,n){this.app=e,this._delegate=n}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return n1e(this._delegate,e)}}const o1e="@firebase/performance-compat",a1e="0.1.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1e(t){t.INTERNAL.registerComponent(new fe("performance-compat",u1e,"PUBLIC")),t.registerVersion(o1e,a1e)}function u1e(t){const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("performance").getImmediate();return new s1e(e,n)}l1e(rt);const Vw="@firebase/remote-config",qP="0.3.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1e{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1e="remote-config";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1e={["registration-window"]:"Undefined window object. This SDK only supports usage in a browser environment.",["registration-project-id"]:"Undefined project identifier. Check Firebase app initialization.",["registration-api-key"]:"Undefined API key. Check Firebase app initialization.",["registration-app-id"]:"Undefined app identifier. Check Firebase app initialization.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",["fetch-client-network"]:"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-timeout"]:'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',["fetch-throttle"]:'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',["fetch-client-parse"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["indexed-db-unavailable"]:"Indexed DB is not supported by current browser"},kn=new bn("remoteconfig","Remote Config",d1e);function f1e(t,e){return t instanceof We&&t.code.indexOf(e)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1e=!1,g1e="",WP=0,m1e=["1","true","t","yes","y","on"];class Bw{constructor(e,n=g1e){this._source=e,this._value=n}asString(){return this._value}asBoolean(){return this._source==="static"?p1e:m1e.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return WP;let e=Number(this._value);return isNaN(e)&&(e=WP),e}getSource(){return this._source}}async function n4(t){const e=N(t),[n,r]=await Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!n||!n.config||!n.eTag||n.eTag===r?!1:(await Promise.all([e._storageCache.setActiveConfig(n.config),e._storage.setActiveConfigEtag(n.eTag)]),!0)}function r4(t){const e=N(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}async function i4(t){const e=N(t),n=new c1e;setTimeout(async()=>{n.abort()},e.settings.fetchTimeoutMillis);try{await e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:n}),await e._storageCache.setLastFetchStatus("success")}catch(r){const i=f1e(r,"fetch-throttle")?"throttle":"failure";throw await e._storageCache.setLastFetchStatus(i),r}}function y1e(t){const e=N(t);return S1e(e._storageCache.getActiveConfig(),e.defaultConfig).reduce((n,r)=>(n[r]=Of(t,r),n),{})}function v1e(t,e){return Of(N(t),e).asBoolean()}function _1e(t,e){return Of(N(t),e).asNumber()}function w1e(t,e){return Of(N(t),e).asString()}function Of(t,e){const n=N(t);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const r=n._storageCache.getActiveConfig();return r&&r[e]!==void 0?new Bw("remote",r[e]):n.defaultConfig&&n.defaultConfig[e]!==void 0?new Bw("default",String(n.defaultConfig[e])):(n._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new Bw("static"))}function E1e(t,e){const n=N(t);switch(e){case"debug":n._logger.logLevel=ne.DEBUG;break;case"silent":n._logger.logLevel=ne.SILENT;break;default:n._logger.logLevel=ne.ERROR}}function S1e(t={},e={}){return Object.keys(Object.assign(Object.assign({},t),e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1e{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}async fetch(e){const[n,r]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=await this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),await Promise.all(s),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1e(t=navigator){return t.languages&&t.languages[0]||t.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1e{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}async fetch(e){var n,r,i;const[s,o]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,u={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:this.sdkVersion,app_instance_id:s,app_instance_id_token:o,app_id:this.appId,language_code:T1e()},h={method:"POST",headers:u,body:JSON.stringify(c)},d=fetch(l,h),f=new Promise((v,_)=>{e.signal.addEventListener(()=>{const E=new Error("The operation was aborted.");E.name="AbortError",_(E)})});let p;try{await Promise.race([d,f]),p=await d}catch(v){let _="fetch-client-network";throw((n=v)===null||n===void 0?void 0:n.name)==="AbortError"&&(_="fetch-timeout"),kn.create(_,{originalErrorMessage:(r=v)===null||r===void 0?void 0:r.message})}let g=p.status;const w=p.headers.get("ETag")||void 0;let m,y;if(p.status===200){let v;try{v=await p.json()}catch(_){throw kn.create("fetch-client-parse",{originalErrorMessage:(i=_)===null||i===void 0?void 0:i.message})}m=v.entries,y=v.state}if(y==="INSTANCE_STATE_UNSPECIFIED"?g=500:y==="NO_CHANGE"?g=304:(y==="NO_TEMPLATE"||y==="EMPTY_CONFIG")&&(m={}),g!==304&&g!==200)throw kn.create("fetch-status",{httpStatus:g});return{status:g,eTag:w,config:m}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1e(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function k1e(t){if(!(t instanceof We)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class A1e{constructor(e,n){this.client=e,this.storage=n}async fetch(e){const n=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)}async attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){await C1e(e.signal,n);try{const i=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),i}catch(i){if(!k1e(i))throw i;const s={throttleEndTimeMillis:Date.now()+Pg(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(s),this.attemptFetch(e,s)}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1e=60*1e3,x1e=12*60*60*1e3;class N1e{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:R1e,minimumFetchIntervalMillis:x1e},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){var n;const r=t.target.error||void 0;return kn.create(e,{originalErrorMessage:r&&((n=r)===null||n===void 0?void 0:n.message)})}const Uo="app_namespace_store",P1e="firebase_remote_config",O1e=1;function D1e(){return new Promise((t,e)=>{var n;try{const r=indexedDB.open(P1e,O1e);r.onerror=i=>{e(Qp(i,"storage-open"))},r.onsuccess=i=>{t(i.target.result)},r.onupgradeneeded=i=>{const s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(Uo,{keyPath:"compositeKey"})}}}catch(r){e(kn.create("storage-open",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message}))}})}class $1e{constructor(e,n,r,i=D1e()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const n=await this.openDbPromise;return new Promise((r,i)=>{var s;const a=n.transaction([Uo],"readonly").objectStore(Uo),l=this.createCompositeKey(e);try{const u=a.get(l);u.onerror=c=>{i(Qp(c,"storage-get"))},u.onsuccess=c=>{const h=c.target.result;r(h?h.value:void 0)}}catch(u){i(kn.create("storage-get",{originalErrorMessage:(s=u)===null||s===void 0?void 0:s.message}))}})}async set(e,n){const r=await this.openDbPromise;return new Promise((i,s)=>{var o;const l=r.transaction([Uo],"readwrite").objectStore(Uo),u=this.createCompositeKey(e);try{const c=l.put({compositeKey:u,value:n});c.onerror=h=>{s(Qp(h,"storage-set"))},c.onsuccess=()=>{i()}}catch(c){s(kn.create("storage-set",{originalErrorMessage:(o=c)===null||o===void 0?void 0:o.message}))}})}async delete(e){const n=await this.openDbPromise;return new Promise((r,i)=>{var s;const a=n.transaction([Uo],"readwrite").objectStore(Uo),l=this.createCompositeKey(e);try{const u=a.delete(l);u.onerror=c=>{i(Qp(c,"storage-delete"))},u.onsuccess=()=>{r()}}catch(u){i(kn.create("storage-delete",{originalErrorMessage:(s=u)===null||s===void 0?void 0:s.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1e{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=await e;i&&(this.lastFetchStatus=i);const s=await n;s&&(this.lastSuccessfulFetchTimestampMillis=s);const o=await r;o&&(this.activeConfig=o)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1e(){Ye(new fe(h1e,t,"PUBLIC").setMultipleInstances(!0)),we(Vw,qP),we(Vw,qP,"esm2017");function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw kn.create("registration-window");if(!Ln())throw kn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw kn.create("registration-project-id");if(!o)throw kn.create("registration-api-key");if(!a)throw kn.create("registration-app-id");n=n||"firebase";const l=new $1e(a,r.name,n),u=new M1e(l),c=new Si(Vw);c.logLevel=ne.ERROR;const h=new I1e(i,bi,n,s,o,a),d=new A1e(h,l),f=new b1e(d,l,u,c),p=new N1e(r,f,u,l,c);return r4(p),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1e(t){return t=N(t),await i4(t),n4(t)}async function U1e(){if(!Ln())return!1;try{return await qd()}catch{return!1}}F1e();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1e{constructor(e,n){this.app=e,this._delegate=n}get defaultConfig(){return this._delegate.defaultConfig}set defaultConfig(e){this._delegate.defaultConfig=e}get fetchTimeMillis(){return this._delegate.fetchTimeMillis}get lastFetchStatus(){return this._delegate.lastFetchStatus}get settings(){return this._delegate.settings}set settings(e){this._delegate.settings=e}activate(){return n4(this._delegate)}ensureInitialized(){return r4(this._delegate)}fetch(){return i4(this._delegate)}fetchAndActivate(){return L1e(this._delegate)}getAll(){return y1e(this._delegate)}getBoolean(e){return v1e(this._delegate,e)}getNumber(e){return _1e(this._delegate,e)}getString(e){return w1e(this._delegate,e)}getValue(e){return Of(this._delegate,e)}setLogLevel(e){E1e(this._delegate,e)}}const V1e="@firebase/remote-config-compat",B1e="0.1.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1e(t){t.INTERNAL.registerComponent(new fe("remoteConfig-compat",q1e,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:U1e})),t.registerVersion(V1e,B1e)}function q1e(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("remote-config").getImmediate({identifier:e});return new j1e(n,r)}z1e(rt);var W1e="firebase",H1e="9.9.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rt.registerVersion(W1e,H1e,"app-compat");var K1e="firebase",G1e="9.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);rt.registerVersion(K1e,G1e,"compat");rt.auth.OAuthCredential;const Q1e=()=>{const[t,e]=A.exports.useState(!1),n=Kb(),r=wy();return R(RL,{onAfterSubmit:(s,o,a)=>{const{setErrors:l}=a,u=YM();e(!0),AM(u,s,o).then(c=>{const{user:h}=c,{email:d,uid:f}=h,{accessToken:p=null}=h;n(C$({email:d,token:p,id:f})),r(Rn.index,{replace:!0}),n(Go({label:"Registration is successful. Welcome!"}))}).catch(({code:c})=>{if(c===rh.emailAlreadyInUse){const h=`Email '${s}' is already use! Please, use another email address.`;n(Go({label:h})),l({email:h})}}).finally(()=>e(!1))},submitButtonLabel:"Sign Up",submitButtonIcon:"sign-up",notice:Ve(qa,{children:["Already have an account? ",R(Ey,{to:Rn.auth,children:"Sign In"})]}),hasPasswordConfirmField:!0})},Y1e=()=>Ve(qa,{children:[R(Gb,{children:"Sign Up"}),R(Q1e,{})]});rt.auth.OAuthCredential;rt.auth.UserCredential;const X1e=()=>{const[t,e]=A.exports.useState(!1),n=Kb(),r=wy();return R(RL,{onAfterSubmit:(s,o,a)=>{const l=YM(),{setErrors:u}=a;e(!0),RM(l,s,o).then(c=>{const{user:h}=c,{email:d,uid:f}=h,{accessToken:p=null}=h;n(C$({email:d,token:p,id:f})),r(Rn.index,{replace:!0}),n(Go({label:"Auth is successful. Welcome!"}))}).catch(({code:c})=>{switch(c){case rh.wrongPassword:{const h="Password is wrong!";n(Go({label:h})),u({password:h});break}case rh.userNotFound:{const h=`User with email '${s}' is not found!`;n(Go({label:h})),u({email:h});break}case rh.tooManyRequests:{n(Go({label:"Too many attempts. Please, try again a bit later!"}));break}}}).finally(()=>e(!1))},submitButtonLabel:"Sign In",submitButtonIcon:"sign-in",notice:Ve(qa,{children:["Don't have an account yet? ",R(Ey,{to:Rn.register,children:"Sign Up"})]}),hasPasswordAutoComplete:!0,isLoading:t})},J1e=()=>Ve(qa,{children:[R(Gb,{children:"Sign In"}),R(X1e,{})]}),Z1e=()=>(A.exports.useEffect(()=>{document.documentElement.classList.add(M$.isDomReady)},[]),R("div",{className:"app",children:R(AK,{children:R(IK,{children:Ve(Bc,{path:Rn.index,element:R(UK,{}),children:[R(Bc,{index:!0,element:R(jK,{children:R(VK,{})})}),R(Bc,{path:Rn.auth,element:R(J1e,{})}),R(Bc,{path:Rn.register,element:R(Y1e,{})})]})})})}));if(typeof window<"u"){let t=function(){var e=document.body,n=document.getElementById("svg-sprite");n||(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.style.position="absolute",n.style.width="0",n.style.height="0",n.id="svg-sprite",n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),n.innerHTML='<symbol fill="none"  viewBox="0 0 472 404" id="icon-sign-in"><path d="M411.534 209.12 222.627 350.24c-4.479 3.735-11.947 0-11.947-5.974l.005-82.13c0-3.735-2.985-7.469-7.469-7.469H8.336c-3.734 0-7.469-2.985-7.469-7.469V142.667c0-3.734 2.985-7.468 7.469-7.468h195.627c3.734 0 7.468-2.985 7.468-7.469V60.532c0-5.973 6.719-9.708 11.948-5.973l188.16 142.613c3.735 2.989 3.735 8.963 0 11.948h-.005Zm59.735 90.35V105.336c0-57.494-47.042-104.53-104.531-104.53h-134.4V30.67h134.4c41.068 0 74.667 33.598 74.667 74.666V299.47c0 41.068-33.599 74.666-74.667 74.666h-134.4V404h134.4c57.495 0 104.531-47.041 104.531-104.53Z" fill="#000" /></symbol><symbol fill="none"  viewBox="0 0 471 404" id="icon-sign-out"><path d="m59.735 208.315 188.907 141.12c4.479 3.734 11.948 0 11.948-5.974l-.005-82.131c0-3.734 2.984-7.469 7.469-7.469h194.88c3.734 0 7.468-2.984 7.468-7.469v-104.53c0-3.735-2.984-7.469-7.468-7.469H267.307c-3.735 0-7.469-2.984-7.469-7.469V59.727c0-5.974-6.719-9.708-11.948-5.974L59.73 196.366c-3.734 2.99-3.734 8.964 0 11.948l.005.001ZM.001 298.664V104.531C0 47.036 47.042 0 104.53 0h134.4v29.864h-134.4c-41.068 0-74.666 33.599-74.666 74.667v194.133c0 41.068 33.598 74.667 74.666 74.667h134.4v29.864h-134.4c-57.494 0-104.53-47.042-104.53-104.531Z" fill="#000" /></symbol><symbol fill="none"  viewBox="0 0 607 542" id="icon-sign-up"><path d="M403.241 241.294c57.584 0 104.271-57.448 104.271-128.328S460.824.674 403.241.674c-57.588 0-104.27 41.412-104.27 112.292 0 70.869 46.682 128.328 104.27 128.328Zm202.454 203.84c-10.162-93.115-95.588-133.747-199.52-133.747-.979 0-1.959.047-2.943.073-1-.031-1.964-.073-2.958-.073-103.922 0-189.347 40.626-199.52 133.747-.261 2.406-.5 22.797-.709 33.787 221.56 141.88 406.347 0 406.347 0-.182-10.99-.443-31.38-.703-33.787h.006Zm-368.307-257.36h-88.817V98.962H89.764v88.823H.941v58.802h88.823v88.823h58.807v-88.828h88.822v-58.807l-.005-.001Z" fill="#000" /></symbol>',e.insertBefore(n,e.lastChild)};var loadSvg=t;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()}var eCe="firebase",tCe="9.9.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */we(eCe,tCe,"app");const nCe={apiKey:"AIzaSyCuNbjwNeM9MfwD9el7P-Mu__Ijtr0HIhk",authDomain:"fancy-auth-form.firebaseapp.com",projectId:"fancy-auth-form",storageBucket:"fancy-auth-form.appspot.com",messagingSenderId:"1027453366534",appId:"1:1027453366534:web:774afadc014cdff4156e87"};tT(nCe);zw.createRoot(document.getElementById("root")).render(R(CW,{store:x$,children:R(p$,{loading:R(AL,{isShown:!0}),persistor:GH,children:R(Z1e,{})})}))});export default rCe();
